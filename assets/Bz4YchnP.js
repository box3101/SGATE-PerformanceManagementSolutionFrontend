import _ from"./laoAn_PS.js";import{_ as ee,B as te,r as f,G as O,s as oe,f as le,K as ne,c as d,k as v,o as c,a as l,F as j,x as h,z as k,b as G,n as K,d as ie,t as ue,D as se}from"./sDRcqWF6.js";const ae={class:"flex items-center gap-5"},re={class:"ui-popup__title"},de={class:"ui-popup__header-actions"},ce={class:"ui-popup__actions flex gap-5"},ve={key:2,class:"ui-popup__footer"},fe={__name:"UiModal",props:{modelValue:{type:Boolean,default:!1},title:{type:String,default:""},size:{type:String,default:"medium",validator:o=>["small","xmedium","medium","large","mlarge","xlarge","full"].includes(o)},centered:{type:Boolean,default:!0},showCloseButton:{type:Boolean,default:!0},closeOnBackdropClick:{type:Boolean,default:!0},position:{type:String,default:"center",validator:o=>["center","right"].includes(o)},noDim:{type:Boolean,default:!1},showFooter:{type:Boolean,default:!1},isScroll:{type:Boolean,default:!1},showSizeButtons:{type:Boolean,default:!1},allowBackgroundInteraction:{type:Boolean,default:!1},allowFloating:{type:Boolean,default:!1}},emits:["update:modelValue","floating-changed","activate-modal"],setup(o,{emit:q}){te("floatingPopupCount",f(0));const U=f(!1);se("isModalFloating",U);const g=o,w=q,u=f(!1),r=f(null),y=f(null),s=f("default"),i=f(!1),m=f({x:0,y:0});O(i,e=>{U.value=e,w("floating-changed",e)});const z=f(window.innerWidth),P=()=>{z.value=window.innerWidth},J=oe(()=>{if(u.value)return{};if(i.value){const e={position:"fixed",top:`${m.value.y}px`,left:`${m.value.x}px`,transform:"none",maxHeight:"600px",minWidth:"auto"};return r.value?e.width=`${r.value}px`:e.width=g.position==="right"?`${z.value/3}px`:void 0,y.value&&(e.height=`${y.value}px`,e.maxHeight=`${y.value}px`),e}if(r.value&&g.position==="right")return{width:`${r.value}px`};if(g.position==="right"){if(s.value==="half")return{width:`${z.value/2}px`};if(s.value==="default")return{width:`${z.value/3}px`}}return{}});let L=!1,x=null,B=0,D=0,C=0,F=0,X=null;O(()=>g.modelValue,e=>{e?(document.documentElement.style.overflowY="hidden",document.body.style.overflowY="hidden"):(document.documentElement.style.overflowY="",document.body.style.overflowY="")},{immediate:!0}),le(()=>{document.addEventListener("mousemove",E),document.addEventListener("mouseup",S),window.addEventListener("resize",P),g.modelValue&&(document.documentElement.style.overflowY="hidden",document.body.style.overflowY="hidden");const e=localStorage.getItem("modalSizeMode");e&&(s.value=e)}),ne(()=>{document.removeEventListener("mousemove",E),document.removeEventListener("mouseup",S),window.removeEventListener("resize",P),document.documentElement.style.overflowY="",document.body.style.overflowY=""});function Q(){u.value=!u.value,u.value?(r.value=null,s.value="full",b()):(s.value="default",b())}function A(e){u.value&&e!=="full"&&(u.value=!1),s.value=e,r.value=null,b()}function b(){localStorage.setItem("modalSizeMode",s.value)}function $(e="left",t){u.value||(L=!0,x=e,B=t.clientX,D=t.clientY,X=t.target.closest(".ui-popup__content"),C=X.offsetWidth,F=X.offsetHeight,document.addEventListener("mousemove",E),document.addEventListener("mouseup",S),e==="left"||e==="right"?document.body.style.cursor="ew-resize":e==="bottom"?document.body.style.cursor="ns-resize":e==="corner"&&(document.body.style.cursor="nwse-resize"),t.preventDefault())}function E(e){if(!L)return;const t=window.innerWidth,p=window.innerHeight,n=300,T=200;if(x==="left"){const a=C-(e.clientX-B);a>=n&&a<=t&&(r.value=a,s.value="custom")}else if(x==="right"){const a=C+(e.clientX-B);a>=n&&a<=t&&(r.value=a)}else if(x==="bottom"){const a=F+(e.clientY-D);a>=T&&a<=p&&(y.value=a)}else if(x==="corner"){const a=C+(e.clientX-B),I=F+(e.clientY-D);a>=n&&a<=t&&(r.value=a),I>=T&&I<=p&&(y.value=I)}}function S(){L=!1,x=null,document.removeEventListener("mousemove",E),document.removeEventListener("mouseup",S),document.body.style.cursor="",s.value==="custom"&&b(),console.log("Resize complete",{width:r.value,height:y.value,floating:i.value})}let M=!1,V=0,W=0,Y={x:0,y:0};function Z(e){if(e.target.closest(".ui-popup__actions"))return;w("activate-modal"),M=!0;const t=e.currentTarget.getBoundingClientRect();Y={x:t.left,y:t.top},e.clientX-t.left,e.clientY-t.top,i.value?(V=e.clientX-m.value.x,W=e.clientY-m.value.y):(V=e.clientX-Y.x,W=e.clientY-Y.y),document.addEventListener("mousemove",H),document.addEventListener("mouseup",R),document.body.style.cursor="move"}function H(e){if(!M)return;const t=e.clientX-V,p=e.clientY-W;if(t>z.value-700&&g.position==="right"){i.value=!1,M=!1,m.value={x:0,y:0},w("floating-changed",!1),s.value="default",r.value=null,document.removeEventListener("mousemove",H),document.removeEventListener("mouseup",R),document.body.style.cursor="";return}m.value={x:t,y:p},!i.value&&Y.x-e.clientX>50&&(i.value=!0,w("floating-changed",!0))}function R(){M=!1,document.removeEventListener("mousemove",H),document.removeEventListener("mouseup",R),document.body.style.cursor=""}function N(e){i.value=!1,m.value={x:0,y:0},s.value=e,r.value=null,w("floating-changed",!1),b()}return(e,t)=>{const p=_;return o.modelValue?(c(),d("div",{key:0,class:h(["ui-popup",{"ui-popup--content-only":o.allowBackgroundInteraction}])},[o.noDim?v("",!0):(c(),d("div",{key:0,class:"ui-popup__backdrop",onClick:t[0]||(t[0]=n=>o.closeOnBackdropClick&&e.$emit("update:modelValue",!1))})),l("div",{class:h(["ui-popup__content",[`ui-popup--${o.size}`,{"ui-popup--centered":o.centered&&!u.value},{"ui-popup--right":o.position==="right"&&!u.value},{"ui-popup--no-dim":o.noDim},{"ui-popup--fullscreen":u.value},{"ui-popup--no-scroll":o.isScroll},{"ui-popup--floating":i.value}]]),style:K(J.value),onClick:t[11]||(t[11]=n=>i.value&&w("activate-modal"))},[o.position==="right"&&!u.value&&!i.value?(c(),d("div",{key:0,class:"ui-popup__resize-handle ui-popup__resize-handle--left",onMousedown:t[1]||(t[1]=n=>$("left",n))},null,32)):v("",!0),i.value&&!u.value?(c(),d(j,{key:1},[l("div",{class:"ui-popup__resize-handle ui-popup__resize-handle--right",onMousedown:t[2]||(t[2]=n=>$("right",n))},null,32),l("div",{class:"ui-popup__resize-handle ui-popup__resize-handle--bottom",onMousedown:t[3]||(t[3]=n=>$("bottom",n))},null,32),l("div",{class:"ui-popup__resize-handle ui-popup__resize-handle--corner",onMousedown:t[4]||(t[4]=n=>$("corner",n))},null,32)],64)):v("",!0),l("div",{class:h(["ui-popup__header",{"ui-popup__header--draggable":o.allowFloating}]),onMousedown:t[10]||(t[10]=n=>o.allowFloating&&Z(n))},[l("div",ae,[k(e.$slots,"headerActions-left",{},void 0,!0),l("h3",re,[k(e.$slots,"title",{},()=>[ie(ue(o.title),1)],!0)]),k(e.$slots,"headerActions",{},void 0,!0)]),l("div",de,[k(e.$slots,"headerActions-right",{},void 0,!0),l("div",ce,[(c(),d(j,{key:0},[l("button",{class:"ui-popup__fullscreen",onClick:Q,title:"전체화면"},[G(p,{name:"heroicons:arrows-pointing-out",size:"18"})]),i.value&&!u.value?(c(),d("button",{key:0,class:h(["ui-popup__size-btn",{active:s.value==="half"}]),onClick:t[5]||(t[5]=n=>N("half")),title:"넓은 크기 (1/2)"},t[12]||(t[12]=[l("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("rect",{x:"2",y:"4",width:"9",height:"16",fill:"currentColor"}),l("rect",{x:"13",y:"4",width:"9",height:"16",fill:"none",stroke:"currentColor","stroke-width":"1.5"})],-1)]),2)):v("",!0),i.value&&!u.value?(c(),d("button",{key:1,class:h(["ui-popup__size-btn",{active:s.value==="default"}]),onClick:t[6]||(t[6]=n=>N("default")),title:"기본 크기 (1/3)"},t[13]||(t[13]=[l("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",class:"text-gray-400"},[l("rect",{x:"2",y:"4",width:"6",height:"16",fill:"currentColor"}),l("rect",{x:"10",y:"4",width:"6",height:"16",fill:"none",stroke:"currentColor","stroke-width":"1.5"}),l("rect",{x:"18",y:"4",width:"4",height:"16",fill:"none",stroke:"currentColor","stroke-width":"1.5"})],-1)]),2)):v("",!0),o.position==="right"&&o.showSizeButtons&&!i.value?(c(),d("button",{key:2,class:h(["ui-popup__size-btn",{active:s.value==="half"&&!u.value}]),onClick:t[7]||(t[7]=n=>A("half")),title:"넓은 크기 (1/2)"},t[14]||(t[14]=[l("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("rect",{x:"2",y:"4",width:"9",height:"16",fill:"currentColor"}),l("rect",{x:"13",y:"4",width:"9",height:"16",fill:"none",stroke:"currentColor","stroke-width":"1.5"})],-1)]),2)):v("",!0),o.position==="right"&&o.showSizeButtons&&!i.value?(c(),d("button",{key:3,class:h(["ui-popup__size-btn",{active:s.value==="default"&&!u.value}]),onClick:t[8]||(t[8]=n=>A("default")),title:"기본 크기 (1/3)"},t[15]||(t[15]=[l("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",class:"text-gray-400"},[l("rect",{x:"2",y:"4",width:"6",height:"16",fill:"currentColor"}),l("rect",{x:"10",y:"4",width:"6",height:"16",fill:"none",stroke:"currentColor","stroke-width":"1.5"}),l("rect",{x:"18",y:"4",width:"4",height:"16",fill:"none",stroke:"currentColor","stroke-width":"1.5"})],-1)]),2)):v("",!0),o.showCloseButton||i.value?(c(),d("button",{key:4,class:"ui-popup__close",onClick:t[9]||(t[9]=n=>e.$emit("update:modelValue",!1))},[G(p,{name:"heroicons:x-mark",size:"20"})])):v("",!0)],64))])])],34),l("div",{class:"ui-popup__body",style:K({padding:`${o.size==="small"?"0px":o.size==="xmedium"?"12px":o.size==="medium"?"16px":o.size==="large"?"20px":(o.size==="xlarge","24px")}`})},[k(e.$slots,"default",{},void 0,!0)],4),o.showFooter?(c(),d("div",ve,[k(e.$slots,"footerActions",{},void 0,!0)])):v("",!0)],6)],2)):v("",!0)}}},he=ee(fe,[["__scopeId","data-v-8a3c6b74"]]);export{he as U};
