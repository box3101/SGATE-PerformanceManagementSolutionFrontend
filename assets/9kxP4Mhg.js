import le from"./BZu1_yGw.js";import oe from"./5dSZYmZ5.js";import te from"./DJMiiktw.js";import ae from"./DCzOvufw.js";import ne from"./rVTBaju7.js";import de from"./DkoG5uCL.js";import ue from"./CLSLaei9.js";import re from"./BdheHc5N.js";import se from"./DQnJq7ow.js";import{r as w,B as ie,c as t,a as n,b as d,w as i,F as k,o as l,g as D,x as _,k as f,m as h,t as y,d as J,C as L}from"./Dojx9gEz.js";import"./w4DddYWl.js";const ve={class:"flex-container"},pe={class:"w-70p"},me={key:0,width:"40px"},ge=["width"],ye={key:1,width:"60px"},ce={key:0},Ve={key:1},ke=["onClick","draggable","onDragstart","onDragover","onDrop","onDragend"],fe={key:0},we={key:0,class:"row-checkbox"},_e={key:1,class:"drag-handle"},he={key:1},Ue=["onClick","draggable","onDragstart","onDragover","onDrop","onDragend"],be=["rowspan"],xe={key:0,class:"row-checkbox"},De={key:1,class:"drag-handle"},Ce=["rowspan"],$e=["rowspan"],Be=["rowspan"],Me=["draggable","onDragstart","onDragover","onDrop","onDragend"],Ie={key:1},Oe={key:0,class:"flex items-center gap-2"},Ne={key:1},ze={key:1},Fe={key:0},Qe={__name:"index",setup(Se){const I=w(!0),O=w(!0),m=w([{key:"name",title:"항목명",align:"",width:"100px"},{key:"category",title:"구분",align:"center",width:"100px"},{key:"standard",title:"정의/설명",align:"",width:""},{key:"level",title:"수준/점수",align:"center",width:"100px"},{key:"weight",title:"가중치",align:"center",width:"80px"}]),K=ie(()=>{const u={};return m.value.forEach(e=>{u[e.key]=e.key==="level"||e.key==="weight"?0:""}),u}),U=w([{id:1,name:"샘플 항목 1",category:"카테고리 1",standard:"이 항목에 대한 설명입니다.",level:5,weight:20},{id:2,name:"샘플 항목 2",category:"카테고리 2",standard:"이 항목에 대한 설명입니다.",level:4,weight:15},{id:3,name:"특별 항목",category:"BOS",behaviors:[{description:"첫 번째 행동수준에 대한 설명입니다.",level:5,score:100,weight:"-"},{description:"두 번째 행동수준에 대한 설명입니다.",level:4,score:80,weight:"-"}]}]),P=u=>{console.log("저장된 데이터:",u)},C=w(!1),N=w(!1),z=w(null),Q=w([{value:"카테고리 1",label:"카테고리 1"},{value:"카테고리 2",label:"카테고리 2"},{value:"BOS",label:"BOS"},{value:"일반",label:"일반"}]),j=()=>({name:"",category:"",standard:"",level:3,weight:10,behaviors:[]}),o=w(j()),W=u=>{o.value.behaviors=[],u==="일반"?(o.value.level="-",o.value.weight="-"):u==="BOS"?o.value.behaviors=[X()]:(o.value.level=3,o.value.weight=10)},X=()=>({description:"",level:1,score:20,weight:"-"}),q=()=>{C.value=!1,N.value=!1,z.value=null,o.value=j()},G=u=>{N.value=!0,z.value=u.id,o.value=JSON.parse(JSON.stringify({name:u.name,category:u.category,standard:u.standard,level:u.level,weight:u.weight,behaviors:u.behaviors||[]})),C.value=!0},Y=()=>{if(!o.value.name||!o.value.category){alert("항목명과 구분은 필수 입력 항목입니다.");return}if(o.value.category==="BOS"){if(o.value.behaviors.length===0){alert("BOS 구분의 경우 최소 하나 이상의 행동수준을 추가해야 합니다.");return}for(const u of o.value.behaviors)if(!u.description){alert("모든 행동수준 설명을 입력해주세요.");return}}else if(o.value.category==="일반"){if(!o.value.standard){alert("항목 정의를 입력해주세요.");return}o.value.level="-",o.value.weight="-"}else if(!o.value.standard){alert("항목 정의를 입력해주세요.");return}if(N.value){const u=U.value.findIndex(e=>e.id===z.value);u!==-1&&(U.value[u]={...U.value[u],...o.value,id:z.value})}else U.value.push({id:Date.now(),...o.value});q()};return(u,e)=>{const $=le,B=oe,H=te,b=ae,x=ne,Z=de,T=ue,R=re,ee=se;return l(),t(k,null,[n("div",ve,[e[20]||(e[20]=n("div",{class:"w-30p"},null,-1)),n("div",pe,[d(H,{modelValue:U.value,"onUpdate:modelValue":e[4]||(e[4]=a=>U.value=a),hover:"",editable:"",bordered:"",canAddRow:!1,"default-row-data":K.value,onSave:P},{"action-button":i(()=>[d($,{type:"button",variant:"primary",onClick:e[0]||(e[0]=a=>C.value=!0)},{default:i(()=>e[15]||(e[15]=[J(" 항목 추가 ")])),_:1})]),colgroup:i(()=>[I.value?(l(),t("col",me)):f("",!0),(l(!0),t(k,null,D(m.value,a=>(l(),t("col",{key:a.key,width:a.width},null,8,ge))),128)),O.value?(l(),t("col",ye)):f("",!0)]),header:i(({selectAll:a,isAllSelected:V})=>[n("tr",null,[I.value?(l(),t("th",ce,[d(B,{modelValue:V,"onUpdate:modelValue":a,size:"large",onClick:e[1]||(e[1]=h(()=>{},["stop"]))},null,8,["modelValue","onUpdate:modelValue"])])):f("",!0),(l(!0),t(k,null,D(m.value,g=>(l(),t("th",{key:g.key,class:_(g.align?`text-${g.align}`:"")},y(g.title),3))),128)),O.value?(l(),t("th",Ve,"수정")):f("",!0)])]),body:i(({rows:a,toggleRowSelection:V,isRowSelected:g,handleDragStart:F,handleDragOver:S,handleDrop:A,handleDragEnd:E,sortable:c})=>[(l(!0),t(k,null,D(a,(r,p)=>(l(),t(k,{key:r.id},[r.category!=="BOS"?(l(),t("tr",{key:0,onClick:s=>!c&&V(r),class:_({selected:g(r),"sortable-row":c}),draggable:c,onDragstart:s=>F(s,p),onDragover:s=>S(s),onDrop:s=>A(s,p),onDragend:E},[I.value?(l(),t("td",fe,[c?(l(),t("div",_e,e[16]||(e[16]=[n("i",{class:"icon-md icon-drag"},null,-1)]))):(l(),t("div",we,[d(B,{modelValue:g(r),"onUpdate:modelValue":s=>V(r),size:"large",onClick:e[2]||(e[2]=h(()=>{},["stop"]))},null,8,["modelValue","onUpdate:modelValue"])]))])):f("",!0),(l(!0),t(k,null,D(m.value,(s,v)=>(l(),t("td",{key:v,class:_(s.align?`text-${s.align}`:"")},y(r[s.key]),3))),128)),O.value?(l(),t("td",he,[d($,{variant:"ghost","icon-only":"",onClick:h(s=>G(r),["stop"])},{default:i(()=>e[17]||(e[17]=[n("i",{class:"icon-md icon-pencil icon-gray"},null,-1)])),_:2},1032,["onClick"])])):f("",!0)],42,ke)):(l(!0),t(k,{key:1},D(r.behaviors,(s,v)=>(l(),t("tr",{key:`${r.id}-behaviorIndex`,onClick:M=>!c&&V(r),class:_({selected:g(r),"sortable-row":c}),draggable:c&&v===0,onDragstart:M=>F(u.event,p),onDragover:M=>S(u.event),onDrop:M=>A(u.event,p),onDragend:E},[v===0?(l(),t(k,{key:0},[I.value?(l(),t("td",{key:0,rowspan:r.behaviors.length},[c?(l(),t("div",De,e[18]||(e[18]=[n("i",{class:"icon-md icon-drag"},null,-1)]))):(l(),t("div",xe,[d(B,{modelValue:g(r),"onUpdate:modelValue":M=>V(r),size:"large",onClick:e[3]||(e[3]=h(()=>{},["stop"]))},null,8,["modelValue","onUpdate:modelValue"])]))],8,be)):f("",!0),n("td",{rowspan:r.behaviors.length},y(r.name),9,Ce),n("td",{rowspan:r.behaviors.length,class:_(m.value[1].align?`text-${m.value[1].align}`:"")},y(r.category),11,$e)],64)):f("",!0),n("td",{class:_(m.value[2].align?`text-${m.value[2].align}`:"")},y(s.description),3),n("td",{class:_(m.value[3].align?`text-${m.value[3].align}`:"")},y(s.level)+"/"+y(s.score),3),n("td",{class:_(m.value[4].align?`text-${m.value[4].align}`:"")},y(s.weight),3),O.value&&v===0?(l(),t("td",{key:1,rowspan:r.behaviors.length},[d($,{variant:"ghost","icon-only":"",onClick:h(M=>G(r),["stop"])},{default:i(()=>e[19]||(e[19]=[n("i",{class:"icon-md icon-pencil icon-gray"},null,-1)])),_:2},1032,["onClick"])],8,Be)):f("",!0)],42,Ue))),128))],64))),128))]),_:1},8,["modelValue","default-row-data"])])]),d(ee,{modelValue:C.value,"onUpdate:modelValue":e[14]||(e[14]=a=>C.value=a),size:"mlarge",title:N.value?"항목 수정":"항목 추가",showFooter:!0},{footerActions:i(()=>[d($,{onClick:Y,variant:"primary"},{default:i(()=>e[27]||(e[27]=[J("저장")])),_:1}),d($,{onClick:q,variant:"secondary-line"},{default:i(()=>e[28]||(e[28]=[J("닫기")])),_:1})]),default:i(()=>[d(R,null,{default:i(()=>[d(x,{label:"항목명"},{default:i(()=>[d(b,{modelValue:o.value.name,"onUpdate:modelValue":e[5]||(e[5]=a=>o.value.name=a),placeholder:"항목명을 입력해주세요."},null,8,["modelValue"])]),_:1}),d(x,{label:"구분"},{default:i(()=>[d(Z,{modelValue:o.value.category,"onUpdate:modelValue":[e[6]||(e[6]=a=>o.value.category=a),W],options:Q.value,placeholder:"구분을 선택해주세요."},null,8,["modelValue","options"])]),_:1}),o.value.category==="일반"?(l(),L(x,{key:0,label:"정의"},{default:i(()=>[d(T,{modelValue:o.value.standard,"onUpdate:modelValue":e[7]||(e[7]=a=>o.value.standard=a),placeholder:"정의를 입력해주세요."},null,8,["modelValue"])]),_:1})):o.value.category!=="BOS"?(l(),t(k,{key:1},[d(x,{label:"정의"},{default:i(()=>[d(T,{modelValue:o.value.standard,"onUpdate:modelValue":e[8]||(e[8]=a=>o.value.standard=a),placeholder:"정의를 입력해주세요."},null,8,["modelValue"])]),_:1}),d(x,{label:"수준/점수"},{default:i(()=>[d(b,{modelValue:o.value.level,"onUpdate:modelValue":e[9]||(e[9]=a=>o.value.level=a),modelModifiers:{number:!0},type:"number",placeholder:"수준/점수를 입력해주세요."},null,8,["modelValue"])]),_:1}),d(x,{label:"가중치"},{default:i(()=>[d(b,{modelValue:o.value.weight,"onUpdate:modelValue":e[10]||(e[10]=a=>o.value.weight=a),modelModifiers:{number:!0},type:"number",placeholder:"가중치를 입력해주세요."},null,8,["modelValue"])]),_:1})],64)):(l(),L(H,{key:2,modelValue:o.value.behaviors,"onUpdate:modelValue":e[13]||(e[13]=a=>o.value.behaviors=a),editable:"",sortable:""},{colgroup:i(()=>e[21]||(e[21]=[n("col",{style:{width:"20px"}},null,-1),n("col",{style:{width:"auto"}},null,-1),n("col",{style:{width:"15%"}},null,-1),n("col",{style:{width:"10%"}},null,-1)])),header:i(({selectAll:a,isAllSelected:V,sortable:g})=>[n("tr",null,[n("th",null,[d(B,{size:"large",onClick:e[11]||(e[11]=h(()=>{},["stop"])),modelValue:V,"onUpdate:modelValue":a},null,8,["modelValue","onUpdate:modelValue"])]),e[22]||(e[22]=n("th",null,"행동수준 설명",-1)),e[23]||(e[23]=n("th",null,"수준/점수",-1)),e[24]||(e[24]=n("th",null,"가중치",-1))])]),body:i(({rows:a,toggleRowSelection:V,isRowSelected:g,handleDragStart:F,handleDragOver:S,handleDrop:A,handleDragEnd:E,sortable:c,editable:r})=>[(l(!0),t(k,null,D(a,(p,s)=>(l(),t("tr",{key:s,draggable:c,onDragstart:v=>F(v,s),onDragover:v=>S(v),onDrop:v=>A(v,s),onDragend:E,class:_({"sortable-row":c})},[n("td",null,[d(B,{modelValue:g(p),"onUpdate:modelValue":v=>V(p),size:"large",onClick:e[12]||(e[12]=h(()=>{},["stop"]))},null,8,["modelValue","onUpdate:modelValue"])]),n("td",null,[r?(l(),L(T,{key:0,modelValue:p.description,"onUpdate:modelValue":v=>p.description=v,placeholder:"행동수준 설명을 입력해주세요.",rows:"3"},null,8,["modelValue","onUpdate:modelValue"])):(l(),t("div",Ie,y(p.description),1))]),n("td",null,[r?(l(),t("div",Oe,[d(b,{modelValue:p.level,"onUpdate:modelValue":v=>p.level=v,modelModifiers:{number:!0},type:"number",placeholder:"수준",class:"w-1/2"},null,8,["modelValue","onUpdate:modelValue"]),e[25]||(e[25]=n("span",null,"/",-1)),d(b,{modelValue:p.score,"onUpdate:modelValue":v=>p.score=v,modelModifiers:{number:!0},type:"number",placeholder:"점수",class:"w-1/2"},null,8,["modelValue","onUpdate:modelValue"])])):(l(),t("div",Ne,y(p.level)+"/"+y(p.score),1))]),n("td",null,[r?(l(),L(b,{key:0,modelValue:p.weight,"onUpdate:modelValue":v=>p.weight=v,modelModifiers:{number:!0},type:"number",placeholder:"가중치"},null,8,["modelValue","onUpdate:modelValue"])):(l(),t("div",ze,y(p.weight),1))])],42,Me))),128)),a.length===0?(l(),t("tr",Fe,e[26]||(e[26]=[n("td",{colspan:"4",class:"text-center py-4"}," 항목이 없습니다. '행 추가' 버튼을 클릭하여 추가해주세요. ",-1)]))):f("",!0)]),_:1},8,["modelValue"]))]),_:1})]),_:1},8,["modelValue","title"])],64)}}};export{Qe as default};
