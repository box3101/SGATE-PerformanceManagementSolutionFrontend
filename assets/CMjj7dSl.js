import et from"./C4bfg8ge.js";import{_ as it,r as M,m as st,p as nt,q as ot,c as m,b as u,a as i,e as R,F as y,j as k,w as C,o as c,f as D,d as j,t as w,h as at,l as v}from"./A6f-O5EY.js";import dt from"./qNIlbxAj.js";import lt from"./DULpxgQl.js";import{C as ct,U as q}from"./Ci2nOzV7.js";import{U as Q}from"./BqV2_0Bl.js";import"./DtnbvNPf.js";import"./Br4kZSNg.js";import"./C2TXWr3m.js";import"./BMaGBHmm.js";import"./BXESCsHk.js";const ht={class:"task-board-page"},rt={class:"board-content"},mt={class:"categories-container"},ut={key:0,class:"empty-category"},pt={class:"add-placeholder-icon"},gt={key:0},wt={key:1},vt={class:"empty-category"},xt={class:"add-placeholder-icon"},ft={class:"edit-title-btn"},_t={key:0,class:"card-detail"},zt={class:"card-detail-header"},Mt={class:"card-detail-title"},yt={class:"card-detail-tags"},kt={class:"card-detail-info"},bt={class:"info-item"},Ct={class:"info-value"},Dt={class:"info-item"},It={class:"info-value"},St={class:"info-item"},$t={class:"info-value"},Ut=["onMousedown"],Nt={class:"detached-modal-title"},Wt={class:"detached-modal-actions"},Vt=["onClick"],Xt=["onClick"],At={class:"detached-modal-body"},Ht={class:"card-detail"},Pt={class:"card-detail-header"},Bt={class:"card-detail-tags"},Ot={class:"card-detail-info"},Yt={class:"info-item"},Et={class:"info-value"},Tt={class:"info-item"},Lt={class:"info-value"},Ft={class:"info-item"},Rt={class:"info-value"},jt=["onMousedown"],qt=["onMousedown"],Qt=["onMousedown"],Zt=["onMousedown"],Gt=["onMousedown"],Jt=["onMousedown"],Kt=["onMousedown"],te=["onMousedown"],ee={__name:"TaskBoard",setup(ie){const f=M([{id:1,title:"기획",cards:[{id:1,title:"디자인 리뉴얼 프로젝트",tags:["디자인","프론트엔드","UX"],date:"2023-05-10 ~ 2023-06-15",comments:5,attachments:3},{id:2,title:"API 개발 및 연동",tags:["백엔드","API"],date:"2023-05-20 ~ 2023-06-15",comments:12,attachments:2},{id:3,title:"프로토타입 개발",tags:["개발","테스트"],date:"2023-04-15 ~ 2023-05-10",comments:3,attachments:1},{id:11,title:"사용자 요구사항 정의",tags:["기획","분석"],date:"2023-04-01 ~ 2023-04-20",comments:8,attachments:5},{id:12,title:"경쟁사 분석 리포트",tags:["리서치","분석"],date:"2023-03-15 ~ 2023-04-05",comments:4,attachments:7}]},{id:2,title:"디자인",cards:[{id:4,title:"사용자 피드백 수집 및 분석",tags:["리서치","UX"],date:"2023-06-01 ~ 2023-06-30",comments:8,attachments:5},{id:5,title:"UI 컴포넌트 개발",tags:["프론트엔드","디자인"],date:"2023-05-15 ~ 2023-06-10",comments:6,attachments:3},{id:13,title:"디자인 시스템 구축",tags:["디자인","시스템"],date:"2023-05-05 ~ 2023-06-15",comments:9,attachments:6},{id:14,title:"프로토타입 사용성 테스트",tags:["UX","테스트"],date:"2023-06-10 ~ 2023-06-25",comments:7,attachments:2}]},{id:3,title:"개발",cards:[{id:6,title:"요구사항 분석",tags:["기획","분석"],date:"2023-03-20 ~ 2023-04-10",comments:4,attachments:2},{id:7,title:"기획서 작성",tags:["기획","문서"],date:"2023-04-01 ~ 2023-04-15",comments:7,attachments:4},{id:15,title:"백엔드 아키텍처 설계",tags:["백엔드","설계"],date:"2023-04-20 ~ 2023-05-10",comments:10,attachments:5},{id:16,title:"데이터베이스 모델링",tags:["데이터","설계"],date:"2023-04-15 ~ 2023-05-05",comments:6,attachments:3},{id:17,title:"API 엔드포인트 구현",tags:["백엔드","API"],date:"2023-05-10 ~ 2023-06-10",comments:8,attachments:4}]},{id:4,title:"테스트",cards:[{id:8,title:"성능 최적화",tags:["개발","최적화"],date:"2023-06-10 ~ 2023-06-25",comments:2,attachments:1},{id:18,title:"단위 테스트 작성",tags:["테스트","개발"],date:"2023-06-05 ~ 2023-06-20",comments:5,attachments:2},{id:19,title:"통합 테스트 수행",tags:["테스트","QA"],date:"2023-06-15 ~ 2023-06-30",comments:7,attachments:3}]},{id:5,title:"배포",cards:[{id:9,title:"서버 환경 구성",tags:["인프라","배포"],date:"2023-06-20 ~ 2023-07-05",comments:3,attachments:2},{id:20,title:"CI/CD 파이프라인 구축",tags:["인프라","자동화"],date:"2023-06-15 ~ 2023-07-10",comments:6,attachments:4},{id:21,title:"모니터링 시스템 구축",tags:["인프라","모니터링"],date:"2023-06-25 ~ 2023-07-15",comments:4,attachments:3}]},{id:6,title:"완료",cards:[{id:10,title:"프로젝트 회고",tags:["회고","문서화"],date:"2023-07-10 ~ 2023-07-15",comments:5,attachments:3},{id:22,title:"사용자 매뉴얼 작성",tags:["문서화","지원"],date:"2023-07-05 ~ 2023-07-20",comments:3,attachments:8},{id:23,title:"성과 측정 및 보고서 작성",tags:["분석","문서화"],date:"2023-07-15 ~ 2023-07-25",comments:7,attachments:5}]}]),I=M(!1),b=M(!1),p=M(null),l=M([]),Z=st({});let S=!1,_=null,$={x:0,y:0},U=!1,z=null,V="",N={x:0,y:0},d={width:0,height:0},r={x:0,y:0};function X(){I.value=!0}function G(a){p.value=a,b.value=!0}function A(a){if(!a||l.value.findIndex(h=>h.card.id===a.id)!==-1)return;b.value=!1;const t=l.value.length*30,e=window.innerWidth,o=window.innerHeight,n={id:`detached-${a.id}-${Date.now()}`,card:{...a},position:{x:Math.min((e-500)/2+t,e-550),y:Math.min((o-600)/2+t,o-650)},size:{width:500,height:600},isMaximized:!1,originalSize:{width:500,height:600},originalPosition:{x:(e-500)/2+t,y:(o-600)/2+t},style:{left:`${Math.min((e-500)/2+t,e-550)}px`,top:`${Math.min((o-600)/2+t,o-650)}px`,width:"500px",height:"600px",zIndex:1e3+l.value.length}};l.value.push(n)}function J(a){const s=l.value.findIndex(t=>t.id===a);s!==-1&&l.value.splice(s,1)}function K(a){const s=l.value.findIndex(e=>e.id===a);if(s===-1)return;const t=l.value[s];t.isMaximized?(t.size={...t.originalSize},t.position={...t.originalPosition},t.isMaximized=!1):(t.originalSize={...t.size},t.originalPosition={...t.position},t.size={width:window.innerWidth-40,height:window.innerHeight-40},t.position={x:20,y:20},t.isMaximized=!0),W(a)}function tt(a,s){const t=l.value.findIndex(o=>o.id===s);if(t===-1)return;const e=l.value[t];e.isMaximized||(S=!0,_=s,$={x:a.clientX-e.position.x,y:a.clientY-e.position.y},H(s),a.preventDefault())}function g(a,s,t){const e=l.value.findIndex(n=>n.id===s);if(e===-1)return;const o=l.value[e];o.isMaximized||(U=!0,z=s,V=t,N={x:a.clientX,y:a.clientY},d={width:o.size.width,height:o.size.height},r={x:o.position.x,y:o.position.y},H(s),a.preventDefault())}function H(a){let s=1e3;l.value.forEach(e=>{const o=parseInt(e.style.zIndex);o>s&&(s=o)});const t=l.value.findIndex(e=>e.id===a);t!==-1&&(l.value[t].style.zIndex=(s+1).toString())}function P(a){if(S&&_){const s=l.value.findIndex(x=>x.id===_);if(s===-1)return;const t=l.value[s],e=a.clientX-$.x,o=a.clientY-$.y,n=window.innerWidth-t.size.width,h=window.innerHeight-t.size.height;t.position={x:Math.max(0,Math.min(e,n)),y:Math.max(0,Math.min(o,h))},W(_)}else if(U&&z){const s=l.value.findIndex(x=>x.id===z);if(s===-1)return;const t=l.value[s],e=a.clientX-N.x,o=a.clientY-N.y,n=300,h=200;switch(V){case"se":t.size={width:Math.max(n,d.width+e),height:Math.max(h,d.height+o)};break;case"sw":const x=Math.max(n,d.width-e);t.position={x:r.x-(x-d.width),y:r.y},t.size={width:x,height:Math.max(h,d.height+o)};break;case"ne":const Y=Math.max(h,d.height-o);t.position={x:r.x,y:r.y-(Y-d.height)},t.size={width:Math.max(n,d.width+e),height:Y};break;case"nw":const E=Math.max(n,d.width-e),T=Math.max(h,d.height-o);t.position={x:r.x-(E-d.width),y:r.y-(T-d.height)},t.size={width:E,height:T};break;case"n":const L=Math.max(h,d.height-o);t.position={x:r.x,y:r.y-(L-d.height)},t.size={width:d.width,height:L};break;case"s":t.size={width:d.width,height:Math.max(h,d.height+o)};break;case"e":t.size={width:Math.max(n,d.width+e),height:d.height};break;case"w":const F=Math.max(n,d.width-e);t.position={x:r.x-(F-d.width),y:r.y},t.size={width:F,height:d.height};break}W(z)}}function B(){S=!1,U=!1,_=null,z=null}function W(a){const s=l.value.findIndex(e=>e.id===a);if(s===-1)return;const t=l.value[s];t.style={...t.style,left:`${t.position.x}px`,top:`${t.position.y}px`,width:`${t.size.width}px`,height:`${t.size.height}px`}}nt(()=>{window.addEventListener("mousemove",P),window.addEventListener("mouseup",B)}),ot(()=>{window.removeEventListener("mousemove",P),window.removeEventListener("mouseup",B)});function O(){console.log("새 카테고리 추가"),f.value.push({id:f.value.length+1,title:"카테고리 "+(f.value.length+1),cards:[]})}return(a,s)=>{const t=et;return c(),m("div",ht,[u(dt,{onAddCategory:O}),i("section",rt,[i("ul",mt,[f.value.length===0?(c(),m("div",ut,[i("div",{class:"add-category-placeholder",onClick:O},[i("div",pt,[u(t,{name:"mdi:plus",size:"24"})]),s[3]||(s[3]=i("p",null,"새 카테고리 추가하기",-1))])])):R("",!0),(c(!0),m(y,null,k(f.value,e=>(c(),D(lt,{key:e.id,title:e.title,onAddBoard:X,onOpenMenu:a.openCategoryMenu},{default:C(()=>[e.cards.length>0?(c(),m("div",gt,[(c(!0),m(y,null,k(e.cards,o=>(c(),D(ct,{key:o.id,title:o.title,tags:o.tags,date:o.date,comments:o.comments,attachments:o.attachments,cardId:o.id,onClick:n=>G(o),onOpenInNewWindow:n=>A(o)},null,8,["title","tags","date","comments","attachments","cardId","onClick","onOpenInNewWindow"]))),128))])):(c(),m("div",wt,[i("div",vt,[i("div",{class:"add-card-placeholder",onClick:X},[i("div",xt,[u(t,{name:"mdi:plus",size:"24"})]),s[4]||(s[4]=i("p",null,[j(" 해당 카테고리의 "),i("br"),j(" 첫 업무카드를 등록해보세요. ")],-1))])])]))]),_:2},1032,["title","onOpenMenu"]))),128))])]),u(Q,{modelValue:I.value,"onUpdate:modelValue":s[0]||(s[0]=e=>I.value=e),position:"right",title:"카드 추가"},{headerActions:C(()=>[i("button",ft,[u(t,{name:"mdi:pencil",size:"16"})])]),_:1},8,["modelValue"]),u(Q,{modelValue:b.value,"onUpdate:modelValue":s[2]||(s[2]=e=>b.value=e),position:"right",title:"카드 상세",size:"medium"},{headerActions:C(()=>[i("button",{class:"detach-modal-btn",onClick:s[1]||(s[1]=e=>A(p.value))},[u(t,{name:"mdi:arrow-expand",size:"16"})])]),default:C(()=>[p.value?(c(),m("div",_t,[i("div",zt,[i("h2",Mt,w(p.value.title),1),i("div",yt,[(c(!0),m(y,null,k(p.value.tags,(e,o)=>(c(),D(q,{key:o,text:e,size:"small"},null,8,["text"]))),128))])]),i("div",kt,[i("div",bt,[s[5]||(s[5]=i("span",{class:"info-label"},"기간",-1)),i("span",Ct,w(p.value.date),1)]),i("div",Dt,[s[6]||(s[6]=i("span",{class:"info-label"},"댓글",-1)),i("span",It,w(p.value.comments||0),1)]),i("div",St,[s[7]||(s[7]=i("span",{class:"info-label"},"첨부파일",-1)),i("span",$t,w(p.value.attachments||0),1)])]),s[8]||(s[8]=i("div",{class:"card-detail-content"},[i("p",null,"카드 상세 내용이 표시됩니다.")],-1))])):R("",!0)]),_:1},8,["modelValue"]),(c(!0),m(y,null,k(l.value,(e,o)=>(c(),m("div",{key:e.id,class:"detached-modal",style:at(e.style),ref_for:!0,ref:n=>{n&&(Z[e.id]=n)}},[i("div",{class:"detached-modal-header",onMousedown:n=>tt(n,e.id)},[i("h3",Nt,w(e.card.title),1),i("div",Wt,[i("button",{class:"detached-modal-btn",onClick:n=>K(e.id)},[u(t,{name:e.isMaximized?"mdi:arrow-collapse":"mdi:arrow-expand",size:"16"},null,8,["name"])],8,Vt),i("button",{class:"detached-modal-btn",onClick:n=>J(e.id)},[u(t,{name:"mdi:close",size:"16"})],8,Xt)])],40,Ut),i("div",At,[i("div",Ht,[i("div",Pt,[i("div",Bt,[(c(!0),m(y,null,k(e.card.tags,(n,h)=>(c(),D(q,{key:h,text:n,size:"small"},null,8,["text"]))),128))])]),i("div",Ot,[i("div",Yt,[s[9]||(s[9]=i("span",{class:"info-label"},"기간",-1)),i("span",Et,w(e.card.date),1)]),i("div",Tt,[s[10]||(s[10]=i("span",{class:"info-label"},"댓글",-1)),i("span",Lt,w(e.card.comments||0),1)]),i("div",Ft,[s[11]||(s[11]=i("span",{class:"info-label"},"첨부파일",-1)),i("span",Rt,w(e.card.attachments||0),1)])]),s[12]||(s[12]=i("div",{class:"card-detail-content"},[i("p",null,"카드 상세 내용이 표시됩니다.")],-1))])]),i("div",{class:"resize-handle resize-handle-se",onMousedown:v(n=>g(n,e.id,"se"),["stop"])},null,40,jt),i("div",{class:"resize-handle resize-handle-sw",onMousedown:v(n=>g(n,e.id,"sw"),["stop"])},null,40,qt),i("div",{class:"resize-handle resize-handle-ne",onMousedown:v(n=>g(n,e.id,"ne"),["stop"])},null,40,Qt),i("div",{class:"resize-handle resize-handle-nw",onMousedown:v(n=>g(n,e.id,"nw"),["stop"])},null,40,Zt),i("div",{class:"resize-handle resize-handle-n",onMousedown:v(n=>g(n,e.id,"n"),["stop"])},null,40,Gt),i("div",{class:"resize-handle resize-handle-s",onMousedown:v(n=>g(n,e.id,"s"),["stop"])},null,40,Jt),i("div",{class:"resize-handle resize-handle-e",onMousedown:v(n=>g(n,e.id,"e"),["stop"])},null,40,Kt),i("div",{class:"resize-handle resize-handle-w",onMousedown:v(n=>g(n,e.id,"w"),["stop"])},null,40,te)],4))),128))])}}},pe=it(ee,[["__scopeId","data-v-d8936c2c"]]);export{pe as default};
