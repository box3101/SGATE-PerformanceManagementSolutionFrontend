import{_ as R,r as o,z as M,a2 as O,f as T,E as U,c as v,o as d,a as m,C as q,k as $,t as g,x as w,F as A,g as F,n as z,a5 as K,H as V}from"./BqCxOAHs.js";const W=["tabindex","aria-expanded"],P={class:"ui-select__value"},Y={key:0,class:"ui-select__selected-text"},j={key:1,class:"ui-select__placeholder"},G={class:"ui-select__options",role:"listbox"},J=["aria-selected","onClick"],Q={key:0,class:"ui-select__no-results"},x="select-dropdown-toggle",X={__name:"UiSelect",props:{placeholder:{type:String,default:"선택하세요"},options:{type:Array,default:()=>[]},modelValue:{type:[String,Number],default:""},disabled:{type:Boolean,default:!1},viewOnly:{type:Boolean,default:!1},error:{type:Boolean,default:!1},size:{type:String,default:"medium",validator:a=>["small","medium","large","xlarge"].includes(a)},width:{type:[String,Number],default:"100%"},maxHeight:{type:[String,Number],default:200},forceUpward:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(a,{emit:D}){const y=o(`select-${Math.random().toString(36).substr(2,9)}`),c=o(null),f=o(null),_=o("down"),b=o({}),t=a,E=D,l=o(!1),u=o(t.modelValue),k=M(()=>t.options.find(e=>e.value===u.value)),s=()=>{if(!c.value)return;const e=c.value.getBoundingClientRect(),r=window.innerHeight,n=window.innerWidth,B=Math.min(t.options.length*40+16,typeof t.maxHeight=="number"?t.maxHeight:parseInt(t.maxHeight)),h=r-e.bottom-8,C=e.top-8;let p="down";(t.forceUpward||h<B&&C>h)&&(p="up"),_.value=p;const i={position:"fixed",left:`${e.left}px`,width:`${e.width}px`,zIndex:9999,maxHeight:`${t.maxHeight}px`};p==="up"?(i.bottom=`${r-e.top+4}px`,i.maxHeight=`${Math.min(C,typeof t.maxHeight=="number"?t.maxHeight:parseInt(t.maxHeight))}px`):(i.top=`${e.bottom+4}px`,i.maxHeight=`${Math.min(h,typeof t.maxHeight=="number"?t.maxHeight:parseInt(t.maxHeight))}px`),e.right>n&&(i.right="8px",delete i.left),b.value=i},I=async()=>{t.disabled||t.viewOnly||(l.value||window.dispatchEvent(new CustomEvent(x,{detail:{id:y.value}})),l.value=!l.value,l.value?(await V(),s(),window.addEventListener("resize",s),window.addEventListener("scroll",s,!0)):(window.removeEventListener("resize",s),window.removeEventListener("scroll",s,!0)))},N=e=>{t.disabled||t.viewOnly||(u.value=e.value,E("update:modelValue",e.value),E("change",e.value),l.value=!1)},H=e=>{e.detail.id!==y.value&&l.value&&(l.value=!1)},L=e=>{l.value&&c.value&&!c.value.contains(e.target)&&f.value&&!f.value.contains(e.target)&&(l.value=!1)},S=e=>{var r,n;e.key==="Escape"&&l.value&&(l.value=!1,(n=(r=c.value)==null?void 0:r.querySelector(".ui-select__header"))==null||n.focus())};return O(()=>t.modelValue,e=>{u.value=e}),O(l,e=>{e&&V(()=>s())}),T(()=>{window.addEventListener(x,H),document.addEventListener("click",L),document.addEventListener("keydown",S)}),U(()=>{window.removeEventListener(x,H),document.removeEventListener("click",L),document.removeEventListener("keydown",S),window.removeEventListener("resize",s),window.removeEventListener("scroll",s,!0)}),(e,r)=>(d(),v("div",{class:w(["ui-select",[`ui-select--${a.size}`,{"ui-select--open":l.value,"ui-select--selected":u.value,"ui-select--error":a.error,"ui-select--disabled":a.disabled,"ui-select--view":a.viewOnly}]]),style:z({width:a.width}),ref_key:"selectRef",ref:c},[m("div",{class:"ui-select__header",onClick:I,tabindex:a.disabled||a.viewOnly?-1:0,role:"combobox","aria-haspopup":"listbox","aria-expanded":l.value},[m("div",P,[k.value?(d(),v("span",Y,g(k.value.label),1)):(d(),v("span",j,g(a.placeholder),1))]),m("i",{class:w(["ui-select__icon",{"ui-select__icon--up":l.value}])},null,2)],8,W),l.value?(d(),q(K,{key:0,to:"body"},[m("div",{class:w(["ui-select__dropdown",{"ui-select__dropdown--up":_.value==="up"}]),style:z(b.value),ref_key:"dropdownRef",ref:f},[m("div",G,[(d(!0),v(A,null,F(a.options,n=>(d(),v("div",{key:n.value,class:w(["ui-select__option",{"ui-select__option--selected":u.value===n.value}]),role:"option","aria-selected":u.value===n.value,onClick:B=>N(n)},g(n.label),11,J))),128)),a.options.length===0?(d(),v("div",Q,"옵션이 없습니다")):$("",!0)])],6)])):$("",!0)],6))}},ee=R(X,[["__scopeId","data-v-c259ee5a"]]);export{ee as default};
