import{_ as O}from"./Bn0IZsKs.js";import{r as m,s as E,H as p,c as i,o as n,a as c,k as f,t as H,D as N,b as h,w as g,x as y,d as j,A as b,n as L}from"./kbWHipEo.js";const U={class:"section-header flex items-center justify-between"},q={class:"heading-4"},F={key:0,class:"table-actions"},G={class:"button-group flex items-center gap-5"},J={key:0,class:"sort-mode-message"},K={key:0},M={key:2},P={key:3},X={__name:"UiTable",props:{bordered:{type:Boolean,default:!1},striped:{type:Boolean,default:!1},hover:{type:Boolean,default:!1},size:{type:String,default:"medium",validator:l=>["small","medium","large"].includes(l)},layout:{type:String,default:"vertical",validator:l=>["vertical","horizontal"].includes(l)},isThLeft:{type:Boolean,default:!1},scrollable:{type:Boolean,default:!1},maxHeight:{type:String,default:"400px"},modelValue:{type:Array,default:()=>[]},editable:{type:Boolean,default:!1},defaultRowData:{type:Object,default:()=>({})},sortableOption:{type:Boolean,default:!1},title:{type:String,default:""},canAddRow:{type:Boolean,default:!0}},emits:["update:modelValue","save","row-added","row-deleted","order-changed"],setup(l,{emit:R}){const u=R,d=l,o=m([]),s=m(d.sortableOption),v=m(!1),r=m(null),w=E(()=>d.modelValue.length>0&&o.value.length===d.modelValue.length),V=()=>{w.value?o.value=[]:o.value=[...d.modelValue]},D=e=>{if(s.value)return;const t=o.value.findIndex(a=>a===e);t===-1?o.value.push(e):o.value.splice(t,1)},S=e=>o.value.includes(e),k=()=>{const t={id:Date.now(),...d.defaultRowData,selected:!1},a=[...d.modelValue,t];u("update:modelValue",a),u("row-added",t)},B=()=>{if(o.value.length===0)return;const e=[...o.value],t=d.modelValue.filter(a=>!o.value.includes(a));u("update:modelValue",t),o.value=[],u("row-deleted",e)},A=()=>{s.value=!s.value,s.value||(o.value=[])},C=(e,t)=>{if(s.value){r.value=t,v.value=!0,e.dataTransfer.effectAllowed="move";try{const a=e.target.closest("tr");a&&e.dataTransfer.setDragImage(a,0,0)}catch(a){console.warn("Drag image not supported in this browser",a)}}},$=e=>{s.value&&(e.preventDefault(),e.dataTransfer.dropEffect="move")},T=(e,t)=>{if(!(!s.value||r.value===null)){if(e.preventDefault(),r.value!==t){const a=[...d.modelValue],[I]=a.splice(r.value,1);a.splice(t,0,I),u("update:modelValue",a),u("order-changed",{from:r.value,to:t,rows:a})}r.value=null,v.value=!1}},z=()=>{r.value=null,v.value=!1},x=()=>{u("save",d.modelValue),s.value=!1};return p(()=>d.modelValue,()=>{o.value=o.value.filter(e=>d.modelValue.some(t=>t===e))}),p(()=>d.editable,e=>{e||(s.value=!1)}),(e,t)=>{const a=O;return n(),i("div",{class:y(["ui-table-wrapper",[l.bordered&&"bordered",l.striped&&"striped",l.hover&&"hover",l.size,l.layout,l.scrollable&&"scrollable",v.value&&"dragging",l.editable&&"editable"]]),style:L(l.scrollable?{maxHeight:l.maxHeight}:{})},[c("div",U,[c("h2",q,H(l.title),1),l.editable?(n(),i("div",F,[c("div",G,[l.canAddRow?(n(),N(a,{key:0,type:"button",variant:"secondary-line","icon-only":"",onClick:k,title:"행 추가"},{default:g(()=>t[0]||(t[0]=[c("i",{class:"icon-md icon-plus"},null,-1)])),_:1})):f("",!0),h(a,{type:"button",variant:"secondary-line","icon-only":"",onClick:B,disabled:o.value.length===0,title:"선택한 행 삭제"},{default:g(()=>t[1]||(t[1]=[c("i",{class:"icon-md icon-delete"},null,-1)])),_:1},8,["disabled"]),h(a,{type:"button",variant:"secondary-line","icon-only":"",onClick:A,class:y({active:s.value}),title:"정렬 모드"},{default:g(()=>t[2]||(t[2]=[c("i",{class:"icon-md icon-sort"},null,-1)])),_:1},8,["class"]),h(a,{type:"button",variant:"primary",onClick:x},{default:g(()=>t[3]||(t[3]=[j("저장")])),_:1})])])):f("",!0)]),s.value&&l.editable?(n(),i("div",J," 행을 드래그하여 순서를 변경할 수 있습니다. 완료 후 정렬 버튼을 다시 클릭하세요. ")):f("",!0),c("table",{class:y(["ui-table",{"th-left":l.isThLeft}])},[e.$slots.colgroup?(n(),i("colgroup",K,[b(e.$slots,"colgroup")])):f("",!0),e.$slots.header&&l.layout!=="horizontal"?(n(),i("thead",{key:1,class:y({"sticky-header":l.scrollable})},[b(e.$slots,"header",{selectAll:V,isAllSelected:w.value,editable:l.editable,sortable:s.value})],2)):f("",!0),e.$slots.body?(n(),i("tbody",M,[b(e.$slots,"body",{rows:l.modelValue,selectedRows:o.value,toggleRowSelection:D,isRowSelected:S,handleDragStart:C,handleDragOver:$,handleDrop:T,handleDragEnd:z,sortable:s.value,editable:l.editable})])):f("",!0),e.$slots.footer?(n(),i("tfoot",P,[b(e.$slots,"footer")])):f("",!0)],2)],6)}}};export{X as _};
