import oe from"./Dc8DIv0-.js";import{_ as he}from"./-dHpVkzT.js";import{_ as pe}from"./RyJCNiHi.js";import{a as fe,b as _e}from"./D8-uXjgz.js";import{a as ve,_ as ge}from"./DkCiJ0T2.js";import{_ as xe}from"./D7rWr6iO.js";import{_ as we}from"./n3oqeHZ2.js";import{_ as ae,z as ie,r as U,c as v,o as p,a as e,t as y,n as z,s as ye,l as P,b as s,F as L,g as C,e as ze,f as Me,A as be,w as u,y as H,d as S,p as ke}from"./CSzMJbbZ.js";import $e from"./DsKlz8Oz.js";import Ue from"./CdV0ikkw.js";import{C as De,U as se}from"./BlpzDjZA.js";import{U as Q}from"./B2pFf9eA.js";const Ve={class:"ui-attachment"},Ae={class:"attachment-section"},Se={class:"section-header"},Ie={class:"section-title"},Le={class:"section-content"},Ce={class:"file-upload-container"},Fe={for:"file-upload",class:"file-upload-label"},We={key:0,class:"file-info"},Oe={class:"file-info-text"},Be={key:1,class:"uploaded-files-list"},Ne={class:"file-info-text"},Te={class:"file-name"},He=["onClick"],Pe={__name:"UiAttachment",props:{title:{type:String,default:"파일첨부"},modelValue:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(X,{emit:V}){const Y=X,F=V,x=ie({get:()=>Y.modelValue,set:h=>F("update:modelValue",h)}),k=U(!1),M=ie(()=>x.value.reduce((m,b)=>m+b.size,0).toLocaleString());function r(h){const m=Array.from(h.target.files);I(m),h.target.value=""}function j(h){k.value=!0}function W(h){k.value=!1}function A(h){k.value=!1;const m=Array.from(h.dataTransfer.files);I(m)}function I(h){if(h.length>0){const m=[...x.value,...h];if(m.length>5){alert("최대 5개 파일까지만 업로드 가능합니다.");return}if(m.reduce((d,_)=>d+_.size,0)>52428800){alert("총 파일 크기는 50MB를 초과할 수 없습니다.");return}x.value=m}}function O(h){const m=[...x.value];m.splice(h,1),x.value=m}return(h,m)=>{const b=oe;return p(),v("div",Ve,[e("div",Ae,[e("div",Se,[e("span",Ie,y(X.title),1)]),e("div",Le,[e("div",{class:"attachment-container",onDragleave:z(W,["prevent"]),onDrop:z(A,["prevent"]),onDragover:z(j,["prevent"])},[e("div",{class:ye(["attachment-content",{"drag-over":k.value}])},[e("div",Ce,[e("label",Fe,[s(b,{name:"mdi:plus",size:"20"}),m[0]||(m[0]=e("span",null,"클릭하거나 드래그해서 파일을 추가하세요.",-1))]),e("input",{id:"file-upload",type:"file",class:"file-upload-input",multiple:"",onChange:r},null,32)]),x.value.length===0?(p(),v("div",We,[e("div",Oe,[s(b,{name:"mdi:file-outline",size:"24",class:"file-icon"}),m[1]||(m[1]=e("span",null,"파일 개수 : 0 / 5　　Total Size : 0 / 52,428,800 bytes",-1))]),m[2]||(m[2]=e("div",{class:"file-formats"},[e("span",null,"첨부 허용 확장자 : jpg,jpeg,gif,png,bmp,txt,pdf,xls,xlsx,ppt,pptx,doc,docx,hwp,zip,7z,rar,alz,hwpx,heic,avi,mp4")],-1))])):P("",!0),x.value.length>0?(p(),v("div",Be,[e("div",Ne,[e("span",null,"파일 개수 : "+y(x.value.length)+" / 5　　Total Size : "+y(M.value)+" / 52,428,800 bytes",1)]),(p(!0),v(L,null,C(x.value,(d,_)=>(p(),v("div",{key:_,class:"uploaded-file-item"},[e("span",Te,y(d.name),1),e("button",{class:"file-delete-btn",onClick:E=>O(_)},[s(b,{name:"mdi:close",size:"16"})],8,He)]))),128))])):P("",!0)],2)],32)])])])}}},ne=ae(Pe,[["__scopeId","data-v-5039af0e"]]),Xe={class:"task-board-page"},Ye={class:"board-content"},je={class:"categories-container"},Ee={key:0,class:"empty-category"},Re={class:"add-category-placeholder-icon"},Ge={key:0},Qe={key:1},Ze={class:"empty-category"},qe={class:"add-placeholder-icon"},Je={class:"category-column"},Ke={class:"category-header"},et={class:"category-actions"},tt={class:"edit-title-btn"},it={class:"flex gap-5"},st={class:"flex gap-5"},nt={class:"flex gap-5 justify-end"},ot={class:"activity-content"},at={class:"flex justify-between gap-5 mb-4"},lt={class:"flex gap-10 items-center"},dt={class:"flex gap-20 items-center"},ct={class:"flex justify-between items-center mt-20 pt-10",style:{"border-top":"1px solid #eee"}},rt={class:"attachment-btn"},ut={key:0,class:"card-detail"},mt={class:"card-detail-header"},ht={class:"card-detail-title"},pt={class:"card-detail-tags"},ft={class:"card-detail-content"},_t={class:"card-detail-info"},vt={class:"info-item"},gt={class:"info-value"},xt={class:"info-item"},wt={class:"info-value"},yt={class:"info-item"},zt={class:"info-value"},Mt=["onMousedown"],bt={class:"detached-modal-title"},kt={class:"detached-modal-actions"},$t=["onClick"],Ut=["onClick"],Dt={class:"detached-modal-body"},Vt={class:"card-detail"},At={class:"card-detail-header"},St={class:"card-detail-tags"},It={class:"card-detail-info"},Lt={class:"info-item"},Ct={class:"info-value"},Ft={class:"info-item"},Wt={class:"info-value"},Ot={class:"info-item"},Bt={class:"info-value"},Nt=["onMousedown"],Tt=["onMousedown"],Ht=["onMousedown"],Pt=["onMousedown"],Xt=["onMousedown"],Yt=["onMousedown"],jt=["onMousedown"],Et=["onMousedown"],Rt={class:"attachment-modal-content"},Gt={class:"attachment-actions flex justify-end"},Qt={__name:"TaskBoard",setup(X){const V=U([{id:1,title:"할 일",cards:[{id:1,title:"디자인 시스템 구축",tags:["디자인","UI/UX"],date:"2023-09-15",comments:3,attachments:2,commentsList:[{id:"comment-1",author:"김윤기",date:"2023-09-10 14:30",text:"디자인 시스템 초안 완료했습니다. 리뷰 부탁드립니다.",replies:[]},{id:"comment-2",author:"이지은",date:"2023-09-11 09:15",text:"컬러 팔레트 부분 조금 수정이 필요할 것 같습니다. 미팅에서 논의해요.",replies:[{id:"reply-1",author:"김윤기",date:"2023-09-11 10:30",text:"네, 미팅에서 논의하겠습니다. 추가 의견 있으시면 미리 공유해주세요."}]}]},{id:2,title:"사용자 피드백 수집",tags:["리서치","사용자경험"],date:"2023-09-20",comments:1,attachments:0,commentsList:[{id:"comment-4",author:"최수진",date:"2023-09-18 11:20",text:"설문조사 양식 초안 작성했습니다. 검토 부탁드려요.",replies:[]}]},{id:5,title:"프로토타입 제작",tags:["디자인","프로토타입"],date:"2023-09-30",comments:0,attachments:1,commentsList:[]},{id:6,title:"사용성 테스트 계획",tags:["테스트","QA"],date:"2023-10-05",comments:0,attachments:0,commentsList:[]},{id:7,title:"경쟁사 분석 보고서",tags:["리서치","분석"],date:"2023-10-10",comments:0,attachments:0,commentsList:[]}]},{id:2,title:"진행 중",cards:[{id:3,title:"랜딩 페이지 개발",tags:["프론트엔드","개발"],date:"2023-09-25",comments:2,attachments:3,commentsList:[{id:"comment-5",author:"김개발",date:"2023-09-22 10:30",text:"헤더 부분 반응형 이슈가 있습니다. 수정 중입니다.",replies:[]},{id:"comment-6",author:"이디자인",date:"2023-09-23 15:45",text:"모바일 뷰에서 버튼 크기 조정이 필요합니다.",replies:[]}]},{id:8,title:"API 연동 작업",tags:["백엔드","API"],date:"2023-10-15",comments:1,attachments:0,commentsList:[{id:"comment-7",author:"박서버",date:"2023-10-12 09:30",text:"인증 API 문서 업데이트했습니다. 참고해주세요.",replies:[]}]},{id:9,title:"데이터 시각화 구현",tags:["데이터","차트"],date:"2023-10-20",comments:0,attachments:1,commentsList:[]}]},{id:3,title:"완료",cards:[{id:4,title:"로그인 기능 구현",tags:["백엔드","보안"],date:"2023-09-10",comments:0,attachments:1,commentsList:[]},{id:10,title:"회원가입 페이지 개발",tags:["프론트엔드","UI"],date:"2023-09-05",comments:0,attachments:0,commentsList:[]},{id:11,title:"DB 스키마 설계",tags:["데이터베이스","설계"],date:"2023-08-28",comments:2,attachments:1,commentsList:[{id:"comment-8",author:"김데이터",date:"2023-08-25 11:20",text:"인덱스 최적화 작업 완료했습니다.",replies:[]},{id:"comment-9",author:"이백엔드",date:"2023-08-26 14:30",text:"쿼리 성능 테스트 결과 첨부합니다.",replies:[]}]}]}]),Y=[{title:"속성",isAccordion:!0,initialOpen:!1,items:[],action:()=>{}},{title:"활동",isAccordion:!0,initialOpen:!0,items:[],action:()=>{}}],F=U(!1),x=U(!1),k=U(!1),M=U(null),r=U([]),j=ze({});let W=!1,A=null,I={x:0,y:0},O=!1,h=null,m="",b={x:0,y:0},d={width:0,height:0},_={x:0,y:0};const E=U([]),Z=U([]);function le(){F.value=!0}function q(){x.value=!0}function de(a){M.value=a,k.value=!0}function J(a){if(!a||r.value.findIndex(w=>w.card.id===a.id)!==-1)return;k.value=!1;const i=r.value.length*30,o=window.innerWidth,l=window.innerHeight,f={id:`detached-${a.id}-${Date.now()}`,card:{...a},position:{x:Math.min((o-500)/2+i,o-550),y:Math.min((l-600)/2+i,l-650)},size:{width:500,height:600},isMaximized:!1,originalSize:{width:500,height:600},originalPosition:{x:(o-500)/2+i,y:(l-600)/2+i},style:{left:`${Math.min((o-500)/2+i,o-550)}px`,top:`${Math.min((l-600)/2+i,l-650)}px`,width:"500px",height:"600px",zIndex:1e3+r.value.length}};r.value.push(f)}function ce(a){const t=r.value.findIndex(i=>i.id===a);t!==-1&&r.value.splice(t,1)}function re(a){const t=r.value.findIndex(o=>o.id===a);if(t===-1)return;const i=r.value[t];i.isMaximized?(i.size={...i.originalSize},i.position={...i.originalPosition},i.isMaximized=!1):(i.originalSize={...i.size},i.originalPosition={...i.position},i.size={width:window.innerWidth-40,height:window.innerHeight-40},i.position={x:20,y:20},i.isMaximized=!0),R(a)}function ue(a,t){const i=r.value.findIndex(l=>l.id===t);if(i===-1)return;const o=r.value[i];o.isMaximized||(W=!0,A=t,I={x:a.clientX-o.position.x,y:a.clientY-o.position.y},K(t),a.preventDefault())}function D(a,t,i){const o=r.value.findIndex(f=>f.id===t);if(o===-1)return;const l=r.value[o];l.isMaximized||(O=!0,h=t,m=i,b={x:a.clientX,y:a.clientY},d={width:l.size.width,height:l.size.height},_={x:l.position.x,y:l.position.y},K(t),a.preventDefault())}function K(a){let t=1e3;r.value.forEach(o=>{const l=parseInt(o.style.zIndex);l>t&&(t=l)});const i=r.value.findIndex(o=>o.id===a);i!==-1&&(r.value[i].style.zIndex=(t+1).toString())}function ee(a){if(W&&A){const t=r.value.findIndex($=>$.id===A);if(t===-1)return;const i=r.value[t],o=a.clientX-I.x,l=a.clientY-I.y,f=window.innerWidth-i.size.width,w=window.innerHeight-i.size.height;i.position={x:Math.max(0,Math.min(o,f)),y:Math.max(0,Math.min(l,w))},R(A)}else if(O&&h){const t=r.value.findIndex($=>$.id===h);if(t===-1)return;const i=r.value[t],o=a.clientX-b.x,l=a.clientY-b.y,f=300,w=200;switch(m){case"se":i.size={width:Math.max(f,d.width+o),height:Math.max(w,d.height+l)};break;case"sw":const $=Math.max(f,d.width-o);i.position={x:_.x-($-d.width),y:_.y},i.size={width:$,height:Math.max(w,d.height+l)};break;case"ne":const B=Math.max(w,d.height-l);i.position={x:_.x,y:_.y-(B-d.height)},i.size={width:Math.max(f,d.width+o),height:B};break;case"nw":const N=Math.max(f,d.width-o),T=Math.max(w,d.height-l);i.position={x:_.x-(N-d.width),y:_.y-(T-d.height)},i.size={width:N,height:T};break;case"n":const n=Math.max(w,d.height-l);i.position={x:_.x,y:_.y-(n-d.height)},i.size={width:d.width,height:n};break;case"s":i.size={width:d.width,height:Math.max(w,d.height+l)};break;case"e":i.size={width:Math.max(f,d.width+o),height:d.height};break;case"w":const g=Math.max(f,d.width-o);i.position={x:_.x-(g-d.width),y:_.y},i.size={width:g,height:d.height};break}R(h)}}function te(){W=!1,O=!1,A=null,h=null}function R(a){const t=r.value.findIndex(o=>o.id===a);if(t===-1)return;const i=r.value[t];i.style={...i.style,left:`${i.position.x}px`,top:`${i.position.y}px`,width:`${i.size.width}px`,height:`${i.size.height}px`}}function G(){console.log("새 카테고리 추가"),V.value.push({id:V.value.length+1,title:"카테고리 "+(V.value.length+1),cards:[]})}return Me(()=>{window.addEventListener("mousemove",ee),window.addEventListener("mouseup",te)}),be(()=>{window.removeEventListener("mousemove",ee),window.removeEventListener("mouseup",te)}),(a,t)=>{const i=oe,o=he,l=pe,f=_e,w=ve,$=xe,B=ge,N=fe,T=we;return p(),v("div",Xe,[s($e,{onAddCategory:G}),e("section",Ye,[e("ul",je,[V.value.length===0?(p(),v("div",Ee,[e("div",{class:"add-category-placeholder",onClick:G},[e("div",Re,[s(i,{name:"mdi:plus",size:"24"})]),t[6]||(t[6]=e("p",null,"새 카테고리 추가하기",-1))])])):P("",!0),(p(!0),v(L,null,C(V.value,n=>(p(),H(Ue,{key:n.id,title:n.title,onAddBoard:q,onOpenMenu:a.openCategoryMenu},{default:u(()=>[n.cards.length>0?(p(),v("div",Ge,[(p(!0),v(L,null,C(n.cards,g=>(p(),H(De,{key:g.id,title:g.title,tags:g.tags,date:g.date,comments:g.comments,attachments:g.attachments,cardId:g.id,onClick:c=>de(g),onOpenInNewWindow:c=>J(g)},null,8,["title","tags","date","comments","attachments","cardId","onClick","onOpenInNewWindow"]))),128))])):(p(),v("div",Qe,[e("div",Ze,[e("div",{class:"add-card-placeholder",onClick:q},[e("div",qe,[s(i,{name:"mdi:plus",size:"24"})]),t[7]||(t[7]=e("p",null,[S(" 해당 카테고리의 "),e("br"),S(" 첫 업무카드를 등록해보세요. ")],-1))])])]))]),_:2},1032,["title","onOpenMenu"]))),128)),e("li",Je,[e("div",Ke,[t[9]||(t[9]=e("h3",{class:"category-title"},"카테고리 추가",-1)),e("div",et,[s(o,{variant:"tertiary",size:"small",icon:"heroicons:plus",onClick:G},{default:u(()=>t[8]||(t[8]=[S(" 카테고리 추가 ")])),_:1})])])])])]),s(Q,{modelValue:x.value,"onUpdate:modelValue":t[0]||(t[0]=n=>x.value=n),position:"right",title:"카드 추가"},{headerActions:u(()=>[e("button",tt,[s(i,{name:"mdi:pencil",size:"16"})])]),default:u(()=>[s(T,{menuItems:Y},{"content-1":u(()=>[s(N,{showFooter:!0},{footerActions:u(()=>[e("div",nt,[s(o,null,{default:u(()=>t[10]||(t[10]=[S("등록")])),_:1}),s(o,{variant:"tertiary"},{default:u(()=>t[11]||(t[11]=[S("취소")])),_:1})])]),default:u(()=>[s(f,{label:"카테고리",minWidth:"min-w-10"},{default:u(()=>[s(l,{placeholder:"업무 보드명입니다."})]),_:1}),s(f,{label:"실행기간",minWidth:"min-w-10"},{default:u(()=>[s(w,{isRange:""})]),_:1}),s(f,{label:"협업",minWidth:"min-w-10"},{default:u(()=>[e("div",it,[s($,{placeholder:"협업자 이름을 입력해주세요"}),s(o,{variant:"tertiary","icon-only":""},{default:u(()=>[s(i,{name:"heroicons:user",size:"20"})]),_:1}),s(o,{variant:"tertiary","icon-only":""},{default:u(()=>[s(i,{name:"heroicons:magnifying-glass",size:"20"})]),_:1})])]),_:1}),s(f,{label:"공유",minWidth:"min-w-10"},{default:u(()=>[e("div",st,[s($,{placeholder:"공유자 이름을 입력해주세요"}),s(o,{variant:"tertiary","icon-only":""},{default:u(()=>[s(i,{name:"heroicons:user",size:"20"})]),_:1}),s(o,{variant:"tertiary","icon-only":""},{default:u(()=>[s(i,{name:"heroicons:magnifying-glass",size:"20"})]),_:1})])]),_:1}),s(f,{label:"내용",minWidth:"min-w-10"},{default:u(()=>[s(B,{placeholder:"업무에 대한 구체적인 내용을 입력해주세요."})]),_:1})]),_:1})]),"content-2":u(()=>[e("div",ot,[e("div",at,[e("div",lt,[t[12]||(t[12]=e("p",{class:"flex-none"},"일자",-1)),s(w,{placeholder:"날짜 선택"})]),e("div",dt,[t[13]||(t[13]=e("p",{class:"flex-none"},"업무상태",-1)),s(l,{placeholder:"선택하세요",class:"w-200"}),t[14]||(t[14]=e("p",{class:"flex-none"},"진행만족도",-1)),s(l,{placeholder:"선택하세요",class:"w-200"})])]),t[16]||(t[16]=e("div",{class:"editor-container mt-10 my-4",style:{height:"200px",border:"1px solid #141212"}},null,-1)),e("div",ct,[e("button",rt,[s(i,{name:"heroicons:paper-clip",size:"20",onClick:le})]),s(o,{variant:"primary"},{default:u(()=>t[15]||(t[15]=[S("저장")])),_:1})])])]),_:1})]),_:1},8,["modelValue"]),s(Q,{modelValue:k.value,"onUpdate:modelValue":t[2]||(t[2]=n=>k.value=n),position:"right",title:"카드 상세",size:"medium"},{headerActions:u(()=>[e("button",{class:"detach-modal-btn",onClick:t[1]||(t[1]=n=>J(M.value))},[s(i,{name:"mdi:arrow-expand",size:"16"})])]),default:u(()=>[M.value?(p(),v("div",ut,[e("div",mt,[e("h2",ht,y(M.value.title),1),e("div",pt,[(p(!0),v(L,null,C(M.value.tags,(n,g)=>(p(),H(se,{key:g,text:n,size:"small"},null,8,["text"]))),128))])]),e("div",ft,[e("div",_t,[e("div",vt,[t[17]||(t[17]=e("span",{class:"info-label"},"기간",-1)),e("span",gt,y(M.value.date),1)]),e("div",xt,[t[18]||(t[18]=e("span",{class:"info-label"},"댓글",-1)),e("span",wt,y(M.value.comments),1)]),e("div",yt,[t[19]||(t[19]=e("span",{class:"info-label"},"첨부파일",-1)),e("span",zt,y(M.value.attachments),1)])])])])):P("",!0)]),_:1},8,["modelValue"]),(p(!0),v(L,null,C(r.value,(n,g)=>(p(),v("div",{key:n.id,class:"detached-modal",style:ke(n.style),ref_for:!0,ref:c=>{c&&(j[n.id]=c)}},[e("div",{class:"detached-modal-header",onMousedown:c=>ue(c,n.id)},[e("h3",bt,y(n.card.title),1),e("div",kt,[e("button",{class:"detached-modal-btn",onClick:c=>re(n.id)},[s(i,{name:n.isMaximized?"mdi:arrow-collapse":"mdi:arrow-expand",size:"16"},null,8,["name"])],8,$t),e("button",{class:"detached-modal-btn",onClick:c=>ce(n.id)},[s(i,{name:"mdi:close",size:"16"})],8,Ut)])],40,Mt),e("div",Dt,[e("div",Vt,[e("div",At,[e("div",St,[(p(!0),v(L,null,C(n.card.tags,(c,me)=>(p(),H(se,{key:me,text:c,size:"small"},null,8,["text"]))),128))])]),e("div",It,[e("div",Lt,[t[20]||(t[20]=e("span",{class:"info-label"},"기간",-1)),e("span",Ct,y(n.card.date),1)]),e("div",Ft,[t[21]||(t[21]=e("span",{class:"info-label"},"댓글",-1)),e("span",Wt,y(n.card.comments),1)]),e("div",Ot,[t[22]||(t[22]=e("span",{class:"info-label"},"첨부파일",-1)),e("span",Bt,y(n.card.attachments),1)])])])]),e("div",{class:"resize-handle resize-handle-se",onMousedown:z(c=>D(c,n.id,"se"),["stop"])},null,40,Nt),e("div",{class:"resize-handle resize-handle-sw",onMousedown:z(c=>D(c,n.id,"sw"),["stop"])},null,40,Tt),e("div",{class:"resize-handle resize-handle-ne",onMousedown:z(c=>D(c,n.id,"ne"),["stop"])},null,40,Ht),e("div",{class:"resize-handle resize-handle-nw",onMousedown:z(c=>D(c,n.id,"nw"),["stop"])},null,40,Pt),e("div",{class:"resize-handle resize-handle-n",onMousedown:z(c=>D(c,n.id,"n"),["stop"])},null,40,Xt),e("div",{class:"resize-handle resize-handle-s",onMousedown:z(c=>D(c,n.id,"s"),["stop"])},null,40,Yt),e("div",{class:"resize-handle resize-handle-e",onMousedown:z(c=>D(c,n.id,"e"),["stop"])},null,40,jt),e("div",{class:"resize-handle resize-handle-w",onMousedown:z(c=>D(c,n.id,"w"),["stop"])},null,40,Et)],4))),128)),s(Q,{modelValue:F.value,"onUpdate:modelValue":t[5]||(t[5]=n=>F.value=n),title:"첨부파일",size:"medium"},{default:u(()=>[e("div",Rt,[s(ne,{modelValue:E.value,"onUpdate:modelValue":t[3]||(t[3]=n=>E.value=n),title:"파일첨부",initialOpen:!0},null,8,["modelValue"]),s(ne,{modelValue:Z.value,"onUpdate:modelValue":t[4]||(t[4]=n=>Z.value=n),title:"Google Drive",initialOpen:!1},null,8,["modelValue"]),e("div",Gt,[s(o,{onClick:a.saveAttachments},{default:u(()=>t[23]||(t[23]=[S("첨부완료")])),_:1},8,["onClick"])])])]),_:1},8,["modelValue"])])}}},di=ae(Qt,[["__scopeId","data-v-f4e28d2b"]]);export{di as default};
