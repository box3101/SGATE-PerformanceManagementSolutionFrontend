import{_ as E}from"./C6exGeg0.js";import{_ as H}from"./BA4ZG47w.js";import{r as y,s as N,H as k,c as r,o as d,a as i,k as u,t as U,b as m,w as v,d as b,D as j,x as h,A as w,n as L}from"./BCIVEK6b.js";const q={class:"section-header flex items-center justify-between"},F={class:"heading-4"},G={key:0,class:"table-actions"},J={key:0,class:"grade-range-controls flex items-center gap-5 mr-5"},K={class:"button-group flex items-center gap-5"},M={key:1,class:"excel-controls flex items-center gap-5 mr-5"},P={key:0,class:"sort-mode-message"},Q={key:0},W={key:2},X={key:3},ee={__name:"UiTable",props:{bordered:{type:Boolean,default:!1},striped:{type:Boolean,default:!1},hover:{type:Boolean,default:!1},size:{type:String,default:"medium",validator:t=>["small","medium","large"].includes(t)},layout:{type:String,default:"vertical",validator:t=>["vertical","horizontal"].includes(t)},isThLeft:{type:Boolean,default:!1},scrollable:{type:Boolean,default:!1},maxHeight:{type:String,default:"400px"},modelValue:{type:Array,default:()=>[]},editable:{type:Boolean,default:!1},excelControls:{type:Boolean,default:!1},defaultRowData:{type:Object,default:()=>({})},sortableOption:{type:Boolean,default:!1},title:{type:String,default:""},canAddRow:{type:Boolean,default:!0},gradeRangeControls:{type:Boolean,default:!1}},emits:["update:modelValue","save","row-added","row-deleted","order-changed"],setup(t,{emit:V}){const c=V,n=t,o=y([]),s=y(n.sortableOption),g=y(!1),f=y(null),R=N(()=>n.modelValue.length>0&&o.value.length===n.modelValue.length),D=()=>{R.value?o.value=[]:o.value=[...n.modelValue]},S=l=>{if(s.value)return;const e=o.value.findIndex(a=>a===l);e===-1?o.value.push(l):o.value.splice(e,1)},B=l=>o.value.includes(l),x=()=>{const e={id:Date.now(),...n.defaultRowData,selected:!1},a=[...n.modelValue,e];c("update:modelValue",a),c("row-added",e)},C=()=>{if(o.value.length===0)return;const l=[...o.value],e=n.modelValue.filter(a=>!o.value.includes(a));c("update:modelValue",e),o.value=[],c("row-deleted",l)},z=()=>{s.value=!s.value,s.value||(o.value=[])},A=(l,e)=>{if(s.value){f.value=e,g.value=!0,l.dataTransfer.effectAllowed="move";try{const a=l.target.closest("tr");a&&l.dataTransfer.setDragImage(a,0,0)}catch(a){console.warn("Drag image not supported in this browser",a)}}},$=l=>{s.value&&(l.preventDefault(),l.dataTransfer.dropEffect="move")},T=(l,e)=>{if(!(!s.value||f.value===null)){if(l.preventDefault(),f.value!==e){const a=[...n.modelValue],[p]=a.splice(f.value,1);a.splice(e,0,p),c("update:modelValue",a),c("order-changed",{from:f.value,to:e,rows:a})}f.value=null,g.value=!1}},I=()=>{f.value=null,g.value=!1},O=()=>{c("save",n.modelValue),s.value=!1};return k(()=>n.modelValue,()=>{o.value=o.value.filter(l=>n.modelValue.some(e=>e===l))}),k(()=>n.editable,l=>{l||(s.value=!1)}),(l,e)=>{const a=E,p=H;return d(),r("div",{class:h(["ui-table-wrapper",[t.bordered&&"bordered",t.striped&&"striped",t.hover&&"hover",t.size,t.layout,t.scrollable&&"scrollable",g.value&&"dragging",t.editable&&"editable"]]),style:L(t.scrollable?{maxHeight:t.maxHeight}:{})},[i("div",q,[i("h2",F,U(t.title),1),t.editable?(d(),r("div",G,[t.gradeRangeControls?(d(),r("div",J,[m(a,{variant:"primary-line",size:"medium"},{default:v(()=>e[0]||(e[0]=[b(" 기준등급 추가 ")])),_:1}),i("div",null,[m(p,{label:"구간대 설정"})])])):u("",!0),i("div",K,[t.canAddRow?(d(),j(a,{key:0,type:"button",variant:"secondary-line","icon-only":"",onClick:x,title:"행 추가"},{default:v(()=>e[1]||(e[1]=[i("i",{class:"icon-md icon-plus"},null,-1)])),_:1})):u("",!0),m(a,{type:"button",variant:"secondary-line","icon-only":"",onClick:C,disabled:o.value.length===0,title:"선택한 행 삭제"},{default:v(()=>e[2]||(e[2]=[i("i",{class:"icon-md icon-delete"},null,-1)])),_:1},8,["disabled"]),m(a,{type:"button",variant:"secondary-line","icon-only":"",onClick:z,class:h({active:s.value}),title:"정렬 모드"},{default:v(()=>e[3]||(e[3]=[i("i",{class:"icon-md icon-sort"},null,-1)])),_:1},8,["class"]),m(a,{type:"button",variant:"primary",onClick:O},{default:v(()=>e[4]||(e[4]=[b("저장")])),_:1})])])):u("",!0),t.excelControls?(d(),r("div",M,[m(a,{variant:"secondary-line",size:"medium"},{default:v(()=>e[5]||(e[5]=[i("i",{class:"icon-md icon-excel"},null,-1),b(" 엑셀 다운로드 ")])),_:1}),m(a,{variant:"secondary-line",size:"medium"},{default:v(()=>e[6]||(e[6]=[i("i",{class:"icon-md icon-excel"},null,-1),b(" 엑셀 업로드 ")])),_:1})])):u("",!0)]),s.value&&t.editable?(d(),r("div",P," 행을 드래그하여 순서를 변경할 수 있습니다. 완료 후 정렬 버튼을 다시 클릭하세요. ")):u("",!0),i("table",{class:h(["ui-table",{"th-left":t.isThLeft}])},[l.$slots.colgroup?(d(),r("colgroup",Q,[w(l.$slots,"colgroup")])):u("",!0),l.$slots.header&&t.layout!=="horizontal"?(d(),r("thead",{key:1,class:h({"sticky-header":t.scrollable})},[w(l.$slots,"header",{selectAll:D,isAllSelected:R.value,editable:t.editable,sortable:s.value})],2)):u("",!0),l.$slots.body?(d(),r("tbody",W,[w(l.$slots,"body",{rows:t.modelValue,selectedRows:o.value,toggleRowSelection:S,isRowSelected:B,handleDragStart:A,handleDragOver:$,handleDrop:T,handleDragEnd:I,sortable:s.value,editable:t.editable})])):u("",!0),l.$slots.footer?(d(),r("tfoot",X,[w(l.$slots,"footer")])):u("",!0)],2)],6)}}};export{ee as _};
