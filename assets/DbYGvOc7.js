import{_ as K,r as v,A as L,a3 as N,e as q,P as T,c as u,o as i,a as s,h as E,F as I,g as M,k as h,t as f,m as D,v as H,x as w,a9 as P,n as Q,H as j,aa as G}from"./BNsJRXqf.js";const J={class:"ui-multi-select__tags"},R={class:"ui-multi-select__tag-avatar"},W=["src","alt"],X={class:"ui-multi-select__tag-label"},Y=["onClick"],Z={class:"ui-multi-select__input-wrapper"},ee=["placeholder","disabled"],le={class:"ui-multi-select__indicators"},te={key:0,class:"ui-multi-select__spinner"},se={class:"ui-multi-select__dropdown"},ae={key:0,class:"ui-multi-select__no-results"},ue={class:"ui-multi-select__no-results-text"},ie={key:1,class:"ui-multi-select__empty"},ne={key:2,class:"ui-multi-select__options"},ce=["onClick","onMouseenter"],oe={class:"ui-multi-select__option-info"},de={class:"ui-multi-select__option-name"},re={key:0,class:"ui-multi-select__option-email"},ve={key:1,class:"ui-multi-select__option-department"},me={class:"ui-multi-select__option-checkbox"},_e={key:0,viewBox:"0 0 16 16",class:"ui-multi-select__check-icon"},he={__name:"UiMultiSelect",props:{options:{type:Array,default:()=>[]},modelValue:{type:Array,default:()=>[]},placeholder:{type:String,default:"협업자 이름을 입력해주세요"},disabled:{type:Boolean,default:!1},viewOnly:{type:Boolean,default:!1},error:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},size:{type:String,default:"medium",validator:a=>["small","medium","large","xlarge"].includes(a)},width:{type:[String,Number],default:"100%"}},emits:["update:modelValue","search","focus","blur"],setup(a,{emit:z}){G(e=>({"5de6f4a1":a.width}));const n=a,p=z,r=v(!1),y=v(!1),c=v([...n.modelValue]),o=v(""),d=v(-1),g=v(null),O=v(`multi-select-${Math.random().toString(36).substr(2,9)}`),m=L(()=>n.options.filter(e=>c.value.includes(e.value))),_=L(()=>{if(!o.value)return n.options;const e=o.value.toLowerCase();return n.options.filter(l=>l.label.toLowerCase().includes(e)||l.email&&l.email.toLowerCase().includes(e)||l.department&&l.department.toLowerCase().includes(e))}),k=e=>c.value.includes(e.value),C=e=>{if(n.disabled||n.viewOnly)return;const l=c.value.indexOf(e.value);l===-1?c.value.push(e.value):c.value.splice(l,1),p("update:modelValue",c.value),o.value="",j(()=>{var t;(t=g.value)==null||t.focus()})},S=e=>{if(n.disabled||n.viewOnly)return;const l=c.value.indexOf(e.value);l!==-1&&(c.value.splice(l,1),p("update:modelValue",c.value))},A=()=>{var e;n.disabled||n.viewOnly||(e=g.value)==null||e.focus()},F=()=>{y.value=!0,r.value=!0,d.value=-1,p("focus"),window.dispatchEvent(new CustomEvent("select-dropdown-toggle",{detail:{id:O.value}}))},b=e=>{o.value=e.target.value,p("search",o.value),d.value=-1},$=e=>{var l;switch(e.key){case"ArrowDown":e.preventDefault(),d.value<_.value.length-1&&d.value++;break;case"ArrowUp":e.preventDefault(),d.value>0&&d.value--;break;case"Enter":e.preventDefault(),d.value>=0&&_.value[d.value]&&C(_.value[d.value]);break;case"Escape":r.value=!1,(l=g.value)==null||l.blur();break;case"Backspace":!o.value&&m.value.length>0&&S(m.value[m.value.length-1]);break}},V=e=>{e.detail.id!==O.value&&r.value&&(r.value=!1,y.value=!1)},B=e=>{!e.target.closest(".ui-multi-select")&&r.value&&(r.value=!1,y.value=!1)};return N(()=>n.modelValue,e=>{c.value=[...e]},{deep:!0}),q(()=>{document.addEventListener("click",B),window.addEventListener("select-dropdown-toggle",V)}),T(()=>{document.removeEventListener("click",B),window.removeEventListener("select-dropdown-toggle",V)}),(e,l)=>(i(),u("div",{class:w(["ui-multi-select",[`ui-multi-select--${a.size}`,{"ui-multi-select--open":r.value,"ui-multi-select--selected":c.value.length>0,"ui-multi-select--error":a.error,"ui-multi-select--disabled":a.disabled,"ui-multi-select--view":a.viewOnly,"ui-multi-select--focused":y.value}]]),style:Q({width:a.width})},[s("div",{class:"ui-multi-select__control",onClick:A},[s("div",J,[(i(!0),u(I,null,M(m.value,t=>(i(),u("div",{key:t.value,class:"ui-multi-select__tag"},[s("div",R,[t.avatar?(i(),u("img",{key:0,src:t.avatar,alt:t.label,class:"ui-multi-select__avatar-image"},null,8,W)):h("",!0)]),s("span",X,f(t.label),1),!a.disabled&&!a.viewOnly?(i(),u("button",{key:0,class:"ui-multi-select__tag-remove",onClick:D(x=>S(t),["stop"]),type:"button"}," × ",8,Y)):h("",!0)]))),128)),s("div",Z,[E(s("input",{ref_key:"searchInput",ref:g,"onUpdate:modelValue":l[0]||(l[0]=t=>o.value=t),class:"ui-multi-select__input",placeholder:m.value.length===0?a.placeholder:"",disabled:a.disabled||a.viewOnly,onFocus:F,onKeydown:$,onInput:b,onKeyup:b,onCompositionupdate:b,autocomplete:"off"},null,40,ee),[[H,o.value]])])]),s("div",le,[a.loading?(i(),u("div",te)):(i(),u("i",{key:1,class:w(["ui-multi-select__icon",{"ui-multi-select__icon--up":r.value}])},null,2))])]),E(s("div",se,[_.value.length===0&&o.value?(i(),u("div",ae,[l[1]||(l[1]=s("div",{class:"ui-multi-select__no-results-icon"},"🔍",-1)),s("div",ue,' "'+f(o.value)+'"에 대한 검색 결과가 없습니다 ',1)])):a.options.length===0&&!o.value?(i(),u("div",ie,l[2]||(l[2]=[s("div",{class:"ui-multi-select__empty-icon"},"👥",-1),s("div",{class:"ui-multi-select__empty-text"},"협업자를 추가해보세요",-1)]))):(i(),u("div",ne,[(i(!0),u(I,null,M(_.value,(t,x)=>(i(),u("div",{key:t.value,class:w(["ui-multi-select__option",{"ui-multi-select__option--selected":k(t),"ui-multi-select__option--highlighted":d.value===x}]),onClick:D(U=>C(t),["stop"]),onMouseenter:U=>d.value=x},[s("div",oe,[s("div",de,f(t.label),1),t.email?(i(),u("div",re,f(t.email),1)):h("",!0),t.department?(i(),u("div",ve,f(t.department),1)):h("",!0)]),s("div",me,[s("div",{class:w(["ui-multi-select__checkbox",{"ui-multi-select__checkbox--checked":k(t)}])},[k(t)?(i(),u("svg",_e,l[3]||(l[3]=[s("path",{d:"M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"},null,-1)]))):h("",!0)],2)])],42,ce))),128))]))],512),[[P,r.value]])],6))}},pe=K(he,[["__scopeId","data-v-d7d363a1"]]);export{pe as default};
