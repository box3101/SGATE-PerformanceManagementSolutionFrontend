import Z from"./BQXvhV2-.js";import{_,B as ee,r as v,G,s as te,f as oe,K as le,c,k as f,o as m,a as s,F as P,x as b,z as w,b as z,n as K,d as ne,t as ie,D as ue}from"./D6mcqtIU.js";const se={class:"flex items-center gap-5"},ae={class:"ui-popup__title"},de={class:"ui-popup__header-actions"},re={class:"ui-popup__actions flex gap-5"},ce={key:2,class:"ui-popup__footer"},me={__name:"UiModal",props:{modelValue:{type:Boolean,default:!1},title:{type:String,default:""},size:{type:String,default:"medium",validator:o=>["small","xmedium","medium","large","mlarge","xlarge","full"].includes(o)},centered:{type:Boolean,default:!0},showCloseButton:{type:Boolean,default:!0},closeOnBackdropClick:{type:Boolean,default:!0},position:{type:String,default:"center",validator:o=>["center","right"].includes(o)},noDim:{type:Boolean,default:!1},showFooter:{type:Boolean,default:!1},isScroll:{type:Boolean,default:!1},showSizeButtons:{type:Boolean,default:!1},allowBackgroundInteraction:{type:Boolean,default:!1},allowFloating:{type:Boolean,default:!1}},emits:["update:modelValue","floating-changed","activate-modal"],setup(o,{emit:q}){ee("floatingPopupCount",v(0));const A=v(!1);ue("isModalFloating",A);const p=o,x=q,i=v(!1),d=v(null),g=v(null),a=v("default"),u=v(!1),h=v({x:0,y:0});G(u,e=>{A.value=e,x("floating-changed",e)});const k=v(window.innerWidth),N=()=>{k.value=window.innerWidth},J=te(()=>{if(i.value)return{};if(u.value){const e={position:"fixed",top:`${h.value.y}px`,left:`${h.value.x}px`,transform:"none",maxHeight:"600px",minWidth:"auto"};return d.value?e.width=`${d.value}px`:e.width=p.position==="right"?`${k.value/3}px`:void 0,g.value&&(e.height=`${g.value}px`,e.maxHeight=`${g.value}px`),e}if(d.value&&p.position==="right")return{width:`${d.value}px`};if(p.position==="right"){if(a.value==="half")return{width:`${k.value/2}px`};if(a.value==="default")return{width:`${k.value/3}px`}}return{}});let D=!1,y=null,$=0,F=0,B=0,X=0,V=null;G(()=>p.modelValue,e=>{e?(document.documentElement.style.overflowY="hidden",document.body.style.overflowY="hidden"):(document.documentElement.style.overflowY="",document.body.style.overflowY="")},{immediate:!0}),oe(()=>{document.addEventListener("mousemove",M),document.addEventListener("mouseup",Y),window.addEventListener("resize",N),p.modelValue&&(document.documentElement.style.overflowY="hidden",document.body.style.overflowY="hidden");const e=localStorage.getItem("modalSizeMode");e&&(a.value=e)}),le(()=>{document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",Y),window.removeEventListener("resize",N),document.documentElement.style.overflowY="",document.body.style.overflowY=""});function T(){i.value=!i.value,i.value?(d.value=null,a.value="full",E()):(a.value="default",E())}function O(e){i.value&&e!=="full"&&(i.value=!1),a.value=e,d.value=null,E()}function E(){localStorage.setItem("modalSizeMode",a.value)}function S(e="left",t){i.value||(D=!0,y=e,$=t.clientX,F=t.clientY,V=t.target.closest(".ui-popup__content"),B=V.offsetWidth,X=V.offsetHeight,document.addEventListener("mousemove",M),document.addEventListener("mouseup",Y),e==="left"||e==="right"?document.body.style.cursor="ew-resize":e==="bottom"?document.body.style.cursor="ns-resize":e==="corner"&&(document.body.style.cursor="nwse-resize"),t.preventDefault())}function M(e){if(!D)return;const t=window.innerWidth,r=window.innerHeight,l=300,j=200;if(y==="left"){const n=B-(e.clientX-$);n>=l&&n<=t&&(d.value=n,a.value="custom")}else if(y==="right"){const n=B+(e.clientX-$);n>=l&&n<=t&&(d.value=n)}else if(y==="bottom"){const n=X+(e.clientY-F);n>=j&&n<=r&&(g.value=n)}else if(y==="corner"){const n=B+(e.clientX-$),U=X+(e.clientY-F);n>=l&&n<=t&&(d.value=n),U>=j&&U<=r&&(g.value=U)}}function Y(){D=!1,y=null,document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",Y),document.body.style.cursor="",a.value==="custom"&&E(),console.log("Resize complete",{width:d.value,height:g.value,floating:u.value})}let C=!1,W=0,H=0,L={x:0,y:0};function Q(e){if(e.target.closest(".ui-popup__actions"))return;x("activate-modal"),C=!0;const t=e.currentTarget.getBoundingClientRect();L={x:t.left,y:t.top},e.clientX-t.left,e.clientY-t.top,u.value?(W=e.clientX-h.value.x,H=e.clientY-h.value.y):(W=e.clientX-L.x,H=e.clientY-L.y),document.addEventListener("mousemove",I),document.addEventListener("mouseup",R),document.body.style.cursor="move"}function I(e){if(!C)return;const t=e.clientX-W,r=e.clientY-H;if(t>k.value-700&&p.position==="right"){u.value=!1,C=!1,h.value={x:0,y:0},x("floating-changed",!1),a.value="default",d.value=null,document.removeEventListener("mousemove",I),document.removeEventListener("mouseup",R),document.body.style.cursor="";return}h.value={x:t,y:r},!u.value&&L.x-e.clientX>50&&(u.value=!0,x("floating-changed",!0))}function R(){C=!1,document.removeEventListener("mousemove",I),document.removeEventListener("mouseup",R),document.body.style.cursor=""}return(e,t)=>{const r=Z;return o.modelValue?(m(),c("div",{key:0,class:b(["ui-popup",{"ui-popup--content-only":o.allowBackgroundInteraction}])},[o.noDim?f("",!0):(m(),c("div",{key:0,class:"ui-popup__backdrop",onClick:t[0]||(t[0]=l=>o.closeOnBackdropClick&&e.$emit("update:modelValue",!1))})),s("div",{class:b(["ui-popup__content",[`ui-popup--${o.size}`,{"ui-popup--centered":o.centered&&!i.value},{"ui-popup--right":o.position==="right"&&!i.value},{"ui-popup--no-dim":o.noDim},{"ui-popup--fullscreen":i.value},{"ui-popup--no-scroll":o.isScroll},{"ui-popup--floating":u.value}]]),style:K(J.value),onClick:t[10]||(t[10]=l=>u.value&&x("activate-modal"))},[o.position==="right"&&!i.value&&!u.value?(m(),c("div",{key:0,class:"ui-popup__resize-handle ui-popup__resize-handle--left",onMousedown:t[1]||(t[1]=l=>S("left",l))},null,32)):f("",!0),u.value&&!i.value?(m(),c(P,{key:1},[s("div",{class:"ui-popup__resize-handle ui-popup__resize-handle--right",onMousedown:t[2]||(t[2]=l=>S("right",l))},null,32),s("div",{class:"ui-popup__resize-handle ui-popup__resize-handle--bottom",onMousedown:t[3]||(t[3]=l=>S("bottom",l))},null,32),s("div",{class:"ui-popup__resize-handle ui-popup__resize-handle--corner",onMousedown:t[4]||(t[4]=l=>S("corner",l))},null,32)],64)):f("",!0),s("div",{class:b(["ui-popup__header",{"ui-popup__header--draggable":o.allowFloating}]),onMousedown:t[9]||(t[9]=l=>o.allowFloating&&Q(l))},[s("div",se,[w(e.$slots,"headerActions-left",{},void 0,!0),s("h3",ae,[w(e.$slots,"title",{},()=>[ne(ie(o.title),1)],!0)]),w(e.$slots,"headerActions",{},void 0,!0)]),s("div",de,[w(e.$slots,"headerActions-right",{},void 0,!0),s("div",re,[u.value?(m(),c(P,{key:0},[s("button",{class:"ui-popup__fullscreen",onClick:T,title:"전체화면"},[z(r,{name:"heroicons:arrows-pointing-out",size:"18"})]),s("button",{class:"ui-popup__close",onClick:t[5]||(t[5]=l=>e.$emit("update:modelValue",!1))},[z(r,{name:"heroicons:x-mark",size:"20"})])],64)):(m(),c(P,{key:1},[o.position==="right"&&o.showSizeButtons?(m(),c("button",{key:0,class:b(["ui-popup__size-btn",{active:a.value==="default"&&!i.value}]),onClick:t[6]||(t[6]=l=>O("default")),title:"기본 크기 (1/3)"},[z(r,{name:"heroicons:window",size:"18"})],2)):f("",!0),o.position==="right"&&o.showSizeButtons?(m(),c("button",{key:1,class:b(["ui-popup__size-btn",{active:a.value==="half"&&!i.value}]),onClick:t[7]||(t[7]=l=>O("half")),title:"넓은 크기 (1/2)"},[z(r,{name:"heroicons:view-columns",size:"18"})],2)):f("",!0),s("button",{class:"ui-popup__fullscreen",onClick:T,title:"전체화면"},[z(r,{name:"heroicons:arrows-pointing-out",size:"18"})]),o.showCloseButton||u.value?(m(),c("button",{key:2,class:"ui-popup__close",onClick:t[8]||(t[8]=l=>e.$emit("update:modelValue",!1))},[z(r,{name:"heroicons:x-mark",size:"20"})])):f("",!0)],64))])])],34),s("div",{class:"ui-popup__body",style:K({padding:`${o.size==="small"?"0px":o.size==="xmedium"?"12px":o.size==="medium"?"16px":o.size==="large"?"20px":(o.size==="xlarge","24px")}`})},[w(e.$slots,"default",{},void 0,!0)],4),o.showFooter?(m(),c("div",ce,[w(e.$slots,"footerActions",{},void 0,!0)])):f("",!0)],6)],2)):f("",!0)}}},pe=_(me,[["__scopeId","data-v-8ed5d644"]]);export{pe as U};
