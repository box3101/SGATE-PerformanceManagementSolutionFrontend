import B from"./Dn8AYG2_.js";import j from"./aittLkXK.js";import A from"./DpAGUQ8z.js";import{_ as F,r as P,z as k,a2 as L,c as p,b as h,w as f,o as c,F as M,g as q,x as G,k as m,a as s,m as C,d as w,t as y}from"./DA-3N46g.js";import"./B56esJya.js";const J={class:"flex items-center gap-2"},K=["draggable","onDragstart","onDrop"],Q=["rowspan"],W=["rowspan"],X={key:0,class:"definition-content"},Y={key:1,class:"category-content"},Z=["rowspan"],ee={class:"pd-trl10 br vertical-top behavior-cell"},te={class:"text-center"},re={class:"text-center"},oe=["rowspan"],se={__name:"CompetencyInfoPanel",setup(ae){const d=P([{id:"group_1",type:"group",isRowspanGroup:!0,competencyName:"전문가의식",definition:"회사의 목표에 따라 부하의 능력을 최대한으로 발휘 시키려고 노력하며, 평소에 부하의 능력, 적성을 정확히 파악하여 그에 따라 일을 맡기고 지속적으로 육성하는가.",category:"BARS",behaviors:[{behavior:"업무 수행에 있어 높은 수준의 원칙과 완성도를 보이며, 체계적이고 독자적인 자기개발에 매진함은 물론, 동료들 또한 적극적으로 업무에 임하도록 기준을 만들고 격려, 유도한다.",level:"5/100",weight:"-"},{behavior:"업무 수행 시 원칙과 기준을 세우고 이에 따라 완성도 높은 결과를 도출하며, 자기개발을 위해 노력하고 동료들과의 협력을 이끌어낸다.",level:"4/80",weight:"-"},{behavior:"업무 수행 시 일정한 원칙과 기준을 가지고 있으며, 지속적인 자기개발을 위해 노력하고 동료들과 원활한 관계를 유지한다.",level:"3/60",weight:"-"}],sortOrder:1},{id:"single_1",type:"single",isRowspanGroup:!1,category:"핵심역량",categoryType:"리더십",behavior:"팀을 이끌고 목표를 달성하는 능력",level:"5",weight:"30",sortOrder:2},{id:"single_2",type:"single",isRowspanGroup:!1,category:"직무역량",categoryType:"문제해결",behavior:"복잡한 문제를 분석하고 해결하는 능력",level:"4",weight:"25",sortOrder:3},{id:"group_2",type:"group",isRowspanGroup:!0,competencyName:"협업능력",definition:"다양한 배경을 가진 구성원들과 효과적으로 협력하여 공동의 목표를 달성하는 능력",category:"BEI",behaviors:[{behavior:"팀원들과의 협력을 통해 시너지를 창출하고, 갈등 상황에서도 건설적인 해결책을 모색한다.",level:"5/100",weight:"25"},{behavior:"팀원들과 협력하여 업무를 수행하며, 의견 차이가 있을 때 적절한 조율을 시도한다.",level:"3/60",weight:"15"}],sortOrder:4},{id:"single_3",type:"single",isRowspanGroup:!1,category:"직무역량",categoryType:"전문성",behavior:"업무 분야의 전문 지식과 기술을 보유하고 활용",level:"4",weight:"22",sortOrder:5}]),x=k(()=>{const t=[];return[...d.value].sort((r,l)=>r.sortOrder-l.sortOrder).forEach(r=>{r.type==="group"?r.behaviors.forEach((l,i)=>{t.push({id:`${r.id}_${i}`,groupId:r.id,subIndex:i,isRowspanGroup:!0,isGroupHeader:i===0,competencyName:r.competencyName,definition:r.definition,type:r.category,behavior:l.behavior,level:l.level,weight:l.weight,rowspanCount:i===0?r.behaviors.length:0,totalGroupSize:r.behaviors.length,sortOrder:r.sortOrder})}):t.push({id:r.id,isRowspanGroup:!1,category:r.category,type:r.categoryType,behavior:r.behavior,level:r.level,weight:r.weight,sortOrder:r.sortOrder})}),t}),N=k(()=>!d.value.some(t=>t.type==="group")),D=(t,e)=>{if(!t.isRowspanGroup)return!0;switch(e){case"checkbox":case"definition":case"type":case"actions":return t.isGroupHeader;default:return!0}},O=(t,e)=>{if(!t.isRowspanGroup||!t.isGroupHeader)return 1;switch(e){case"checkbox":case"definition":case"type":case"actions":return t.totalGroupSize;default:return 1}},I=t=>{const e=[];return t.isRowspanGroup&&(e.push("rowspan-group"),t.isGroupHeader&&e.push("group-header")),e.join(" ")},V=t=>t.isRowspanGroup?t.isGroupHeader:!0,T=t=>{if(d.value.some(l=>l.type==="group"))return console.warn("그룹 행이 있는 경우 일반 정렬을 사용할 수 없습니다. 드래그 앤 드롭을 사용하세요."),!1;const{field:e,direction:r}=t;d.value.sort((l,i)=>{let n=l[e]||"",u=i[e]||"";return!isNaN(n)&&!isNaN(u)&&(n=Number(n),u=Number(u)),r==="asc"?n>u?1:-1:n<u?1:-1}),d.value.forEach((l,i)=>{l.sortOrder=i+1})},S=(t,e,r)=>{if(r.isRowspanGroup&&!r.isGroupHeader)return t.preventDefault(),!1;t.dataTransfer.setData("sourceIndex",e.toString()),t.dataTransfer.setData("sourceId",r.groupId||r.id),t.dataTransfer.setData("sourceType",r.isRowspanGroup?"group":"single")},E=t=>{t.preventDefault()},U=(t,e)=>{t.preventDefault();const r=parseInt(t.dataTransfer.getData("sourceIndex")),l=t.dataTransfer.getData("sourceId"),i=t.dataTransfer.getData("sourceType");if(isNaN(r)||r===e)return;const n=d.value.find(a=>a.id===l);if(!n)return;const b=x.value[e];let g;if(b.isRowspanGroup){const a=d.value.find(_=>_.id===b.groupId);g=(a==null?void 0:a.sortOrder)||1}else{const a=d.value.find(_=>_.id===b.id);g=(a==null?void 0:a.sortOrder)||1}n.sortOrder<g?(d.value.forEach(a=>{a.sortOrder>n.sortOrder&&a.sortOrder<=g&&a.sortOrder--}),n.sortOrder=g):(d.value.forEach(a=>{a.sortOrder>=g&&a.sortOrder<n.sortOrder&&a.sortOrder++}),n.sortOrder=g)},$=()=>{},z=t=>{switch(t){case"핵심역량":return"category-core";case"직무역량":return"category-job";default:return"category-default"}},H=t=>{console.log("상세보기/수정:",t)};return L(d,t=>{console.log("데이터 변경됨:",t.map(e=>({id:e.id,sortOrder:e.sortOrder})))},{deep:!0}),(t,e)=>{const r=B,l=j,i=A;return c(),p("div",null,[h(i,{modelValue:x.value,"onUpdate:modelValue":e[3]||(e[3]=n=>x.value=n),title:"역량항목 구분 (개선된 멀티행 정렬)",bordered:"",scrollable:"",sortable:N.value,editable:"","max-height":"calc(100vh - 200px)",canAddRow:!1,canSave:!1,isDragging:!0,onSort:T},{"header-action-right":f(()=>[s("div",J,[h(r,{variant:"secondary-line"},{default:f(()=>e[4]||(e[4]=[w("NCS")])),_:1}),h(r,{variant:"secondary-line"},{default:f(()=>e[5]||(e[5]=[w("공통/리더십")])),_:1}),h(r,{variant:"secondary"},{default:f(()=>e[6]||(e[6]=[w("추가")])),_:1})])]),colgroup:f(()=>e[7]||(e[7]=[s("col",{style:{width:"40px"}},null,-1),s("col",{style:{width:"200px"}},null,-1),s("col",{style:{width:"100px"}},null,-1),s("col",{style:{width:"auto"}},null,-1),s("col",{style:{width:"100px"}},null,-1),s("col",{style:{width:"100px"}},null,-1),s("col",{style:{width:"40px"}},null,-1)])),header:f(({selectAll:n,isAllSelected:u})=>[s("th",null,[h(l,{size:"large",onClick:e[0]||(e[0]=C(()=>{},["stop"])),modelValue:u,"onUpdate:modelValue":n},null,8,["modelValue","onUpdate:modelValue"])]),e[8]||(e[8]=s("th",null,"역량정의/역량항목",-1)),e[9]||(e[9]=s("th",null,"구분",-1)),e[10]||(e[10]=s("th",null,"행동기준/행동수준/역량정의",-1)),e[11]||(e[11]=s("th",null,"수준/점수",-1)),e[12]||(e[12]=s("th",null,"가중",-1)),e[13]||(e[13]=s("th",null,"수정",-1))]),body:f(({rows:n,toggleRowSelection:u,isRowSelected:b,handleDragStart:g,handleDragOver:a,handleDrop:_,handleDragEnd:ne})=>[(c(!0),p(M,null,q(n,(o,R)=>(c(),p("tr",{key:`${o.groupId||"single"}-${o.id}-${o.subIndex||0}`,class:G(I(o)),draggable:V(o),onDragstart:v=>S(v,R,o),onDragover:e[2]||(e[2]=v=>E(v)),onDrop:v=>U(v,R),onDragend:$},[D(o,"checkbox")?(c(),p("td",{key:0,rowspan:O(o,"checkbox"),class:"txt-c vertical-top checkbox-cell"},[h(l,{size:"large",onClick:e[1]||(e[1]=C(()=>{},["stop"])),modelValue:b(o),"onUpdate:modelValue":()=>u(o)},null,8,["modelValue","onUpdate:modelValue"])],8,Q)):m("",!0),D(o,"definition")?(c(),p("td",{key:1,rowspan:O(o,"definition"),class:"vertical-middle"},[o.isRowspanGroup&&o.isGroupHeader?(c(),p("div",X,[s("strong",null,"["+y(o.competencyName)+"]",1),e[14]||(e[14]=s("br",null,null,-1)),w(" "+y(o.definition),1)])):o.isRowspanGroup?m("",!0):(c(),p("div",Y,[s("span",{class:G(["category-badge",z(o.category)])},y(o.category),3)]))],8,W)):m("",!0),D(o,"type")?(c(),p("td",{key:2,rowspan:O(o,"type"),class:"text-center"},y(o.type),9,Z)):m("",!0),s("td",ee,[s("div",{class:G(o.isRowspanGroup?"behavior-rowspan":"behavior-normal")},y(o.behavior),3)]),s("td",te,y(o.level),1),s("td",re,y(o.weight),1),D(o,"actions")?(c(),p("td",{key:3,rowspan:O(o,"actions")},[h(r,{variant:"ghost",size:"small",onClick:v=>H(o)},{default:f(()=>e[15]||(e[15]=[s("i",{class:"icon icon-md icon-edit"},null,-1)])),_:2},1032,["onClick"])],8,oe)):m("",!0)],42,K))),128))]),_:1},8,["modelValue","sortable"])])}}},ce=F(se,[["__scopeId","data-v-da99e0a7"]]);export{ce as default};
