import N from"./ChnXMRc9.js";import j from"./Bw4lwhGM.js";import{r as k,z as x,G as E,c as o,o as a,a as i,k as n,t as h,b as v,C as G,J as c,w as g,x as w,d as b,n as J}from"./T4NIYr2-.js";import"./eENT7ASd.js";const M={class:"flex items-center gap-10"},q={class:"heading-4"},F={key:0,class:"grade-range-controls flex items-center gap-5 mr-5"},K={key:0,class:"table-actions"},P={class:"button-group flex items-center gap-5"},Q={key:1,class:"excel-controls flex items-center gap-5 mr-5"},W={key:0,class:"sort-mode-message"},X={key:1,class:"empty-state"},Y={class:"empty-content"},Z={class:"empty-title"},_={class:"empty-description"},ee={key:0,class:"empty-actions"},te={key:2,class:"table-scroll-container"},le={key:0},ae={key:1,class:"sticky-header"},oe={key:2},se={key:3},ne={key:0},de={key:1,class:"sticky-header"},ie={key:2},re={key:3},ue={key:4},ve={__name:"UiTable",props:{title:{type:String,default:""},bordered:{type:Boolean,default:!1},striped:{type:Boolean,default:!0},hover:{type:Boolean,default:!1},size:{type:String,default:"medium",validator:t=>["small","medium","large"].includes(t)},layout:{type:String,default:"vertical",validator:t=>["vertical","horizontal"].includes(t)},isThLeft:{type:Boolean,default:!1},alignTop:{type:Boolean,default:!1},scrollable:{type:Boolean,default:!1},maxHeight:{type:String,default:"400px"},fixHeader:{type:Boolean,default:!1},modelValue:{type:Array,default:()=>[]},editable:{type:Boolean,default:!1},excelControls:{type:Boolean,default:!1},excelDownloadLabel:{type:String,default:"엑셀 다운로드"},excelUploadLabel:{type:String,default:"엑셀 업로드"},defaultRowData:{type:Object,default:()=>({})},sortableOption:{type:Boolean,default:!1},canAddRow:{type:Boolean,default:!0},canSave:{type:Boolean,default:!0},gradeRangeControls:{type:Boolean,default:!1},emptyTitle:{type:String,default:"데이터가 없습니다"},emptyDescription:{type:String,default:"표시할 항목이 없습니다."},forceEmpty:{type:Boolean,default:!1}},emits:["update:modelValue","save","row-added","row-deleted","order-changed"],setup(t,{emit:L}){const y=L,r=t,s=k([]),u=k(r.sortableOption),p=k(!1),m=k(null),D=x(()=>r.forceEmpty||!r.modelValue||r.modelValue.length===0),S=x(()=>r.modelValue.length>0&&s.value.length===r.modelValue.length),V=()=>{S.value?s.value=[]:s.value=[...r.modelValue]},$=e=>{if(u.value)return;const l=s.value.findIndex(d=>d===e);l===-1?s.value.push(e):s.value.splice(l,1)},B=e=>s.value.includes(e),O=()=>({id:`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,...r.defaultRowData}),R=()=>{const e=O(),l=[...r.modelValue,e];y("update:modelValue",l),y("row-added",e)},H=()=>{if(s.value.length===0)return;const e=[...s.value],l=r.modelValue.filter(d=>!s.value.includes(d));y("update:modelValue",l),s.value=[],y("row-deleted",e)},U=()=>{u.value=!u.value,u.value||(s.value=[])},C=(e,l)=>{if(u.value){m.value=l,p.value=!0,e.dataTransfer.effectAllowed="move";try{const d=e.target.closest("tr");d&&e.dataTransfer.setDragImage(d,0,0)}catch(d){console.warn("Drag image not supported in this browser",d)}}},T=e=>{u.value&&(e.preventDefault(),e.dataTransfer.dropEffect="move")},z=(e,l)=>{if(!(!u.value||m.value===null)){if(e.preventDefault(),m.value!==l){const d=[...r.modelValue],f=d[m.value];d.splice(m.value,1),d.splice(l,0,f),y("update:modelValue",d),y("order-changed",{from:m.value,to:l,rows:d})}m.value=null,p.value=!1}},A=()=>{m.value=null,p.value=!1},I=()=>{y("save",r.modelValue),u.value=!1};return E(()=>r.modelValue,()=>{s.value=s.value.filter(e=>r.modelValue.some(l=>l===e))}),E(()=>r.editable,e=>{e||(u.value=!1)}),(e,l)=>{const d=N,f=j;return a(),o("div",{class:w(["ui-table-wrapper",[t.bordered&&"bordered",t.striped&&"striped",t.hover&&"hover",t.size,t.layout,t.scrollable&&"scrollable",p.value&&"dragging",t.editable&&"editable",t.alignTop&&"align-top"]]),style:J(t.scrollable?{maxHeight:t.maxHeight}:{})},[i("div",{class:w(["section-header flex items-center justify-between",t.fixHeader&&"sticky-header-btn"])},[i("div",M,[i("h2",q,h(t.title),1),t.gradeRangeControls?(a(),o("div",F,[i("div",null,[v(d,{label:"구간대 설정"})])])):n("",!0)]),t.editable?(a(),o("div",K,[i("div",P,[t.canAddRow?(a(),G(f,{key:0,type:"button",variant:"secondary-line","icon-only":"",onClick:R,title:"행 추가"},{default:g(()=>l[0]||(l[0]=[i("i",{class:"icon-md icon-plus icon-black"},null,-1)])),_:1})):n("",!0),v(f,{type:"button",variant:"secondary-line","icon-only":"",onClick:H,disabled:s.value.length===0,title:"선택한 행 삭제"},{default:g(()=>l[1]||(l[1]=[i("i",{class:"icon-md icon-delete"},null,-1)])),_:1},8,["disabled"]),v(f,{type:"button",variant:"secondary-line","icon-only":"",onClick:U,class:w({active:u.value}),title:"정렬 모드"},{default:g(()=>l[2]||(l[2]=[i("i",{class:"icon-md icon-sort"},null,-1)])),_:1},8,["class"]),t.canSave?c(e.$slots,"action-button",{key:1},()=>[v(f,{type:"button",variant:"primary",onClick:I},{default:g(()=>l[3]||(l[3]=[b("저장")])),_:1})]):n("",!0)])])):n("",!0),t.excelControls?(a(),o("div",Q,[v(f,{variant:"secondary-line",size:"medium"},{default:g(()=>[l[4]||(l[4]=i("i",{class:"icon-md icon-excel"},null,-1)),b(" "+h(t.excelDownloadLabel),1)]),_:1}),v(f,{variant:"secondary-line",size:"medium"},{default:g(()=>[l[5]||(l[5]=i("i",{class:"icon-md icon-excel"},null,-1)),b(" "+h(t.excelUploadLabel),1)]),_:1})])):n("",!0)],2),u.value&&t.editable?(a(),o("div",W,l[6]||(l[6]=[b(" 행을 드래그하여 순서를 변경할 수 있습니다. "),i("br",null,null,-1),b("완료 후 정렬 버튼을 다시 클릭하세요. ")]))):n("",!0),D.value?(a(),o("div",X,[c(e.$slots,"empty",{addRow:R,editable:t.editable},()=>[i("div",Y,[i("h3",Z,h(t.emptyTitle),1),i("p",_,h(t.emptyDescription),1),t.editable&&t.canAddRow?(a(),o("div",ee,[v(f,{variant:"primary",onClick:R},{default:g(()=>l[7]||(l[7]=[i("i",{class:"icon-sm icon-plus"},null,-1),b(" 첫 번째 항목 추가 ")])),_:1})])):n("",!0)])])])):t.scrollable?(a(),o("div",te,[i("table",{class:w(["ui-table",{"th-left":t.isThLeft}])},[e.$slots.colgroup?(a(),o("colgroup",le,[c(e.$slots,"colgroup")])):n("",!0),e.$slots.header&&t.layout!=="horizontal"?(a(),o("thead",ae,[c(e.$slots,"header",{selectAll:V,isAllSelected:S.value,editable:t.editable})])):n("",!0),e.$slots.body?(a(),o("tbody",oe,[c(e.$slots,"body",{rows:t.modelValue,selectedRows:s.value,toggleRowSelection:$,isRowSelected:B,handleDragStart:C,handleDragOver:T,handleDrop:z,handleDragEnd:A,sortable:u.value,editable:t.editable})])):n("",!0),e.$slots.footer?(a(),o("tfoot",se,[c(e.$slots,"footer")])):n("",!0)],2)])):D.value?n("",!0):(a(),o("table",{key:3,class:w(["ui-table",{"th-left":t.isThLeft}])},[e.$slots.colgroup?(a(),o("colgroup",ne,[c(e.$slots,"colgroup")])):n("",!0),e.$slots.header&&t.layout!=="horizontal"?(a(),o("thead",de,[c(e.$slots,"header",{selectAll:V,isAllSelected:S.value,editable:t.editable})])):n("",!0),t.layout==="horizontal"?(a(),o("thead",ie,[c(e.$slots,"header")])):n("",!0),e.$slots.body?(a(),o("tbody",re,[c(e.$slots,"body",{rows:t.modelValue,selectedRows:s.value,toggleRowSelection:$,isRowSelected:B,handleDragStart:C,handleDragOver:T,handleDrop:z,handleDragEnd:A,sortable:u.value,editable:t.editable})])):n("",!0),e.$slots.footer?(a(),o("tfoot",ue,[c(e.$slots,"footer")])):n("",!0)],2))],6)}}};export{ve as default};
