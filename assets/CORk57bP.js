import{_ as ue,r as D,y as P,f as se,I as re,D as I,c as n,o as i,k as m,a as r,d as A,t as f,m as C,F as Y,g as V,z as B}from"./6key0ePN.js";const oe=["for"],ce={key:0,class:"ui-datepicker__required"},de={class:"ui-datepicker__wrapper"},ve={class:"ui-datepicker__text"},pe={key:0,class:"ui-datepicker__selected-text"},fe={key:1,class:"ui-datepicker__placeholder"},ke={class:"ui-datepicker__range-text"},_e={key:0,class:"ui-datepicker__selected-text"},ge={key:1,class:"ui-datepicker__placeholder"},me={class:"ui-datepicker__range-text"},ye={key:0,class:"ui-datepicker__selected-text"},De={key:1,class:"ui-datepicker__placeholder"},he={key:1,class:"ui-datepicker__calendar"},we={key:0},be={class:"ui-datepicker__header"},Me={class:"ui-datepicker__selectors"},Se={class:"ui-datepicker__dropdown"},Ce=["onClick"],xe={class:"ui-datepicker__dropdown"},Re=["onClick"],Ye={class:"ui-datepicker__weekdays"},Ve={class:"ui-datepicker__days"},Be=["onClick"],Fe={key:1,class:"ui-datepicker__actions"},Ne={key:2,class:"ui-datepicker__error"},Te={key:3,class:"ui-datepicker__helper"},Ee={__name:"UiDatePicker",props:{modelValue:{type:[Date,String,Array,null],default:null},isRange:{type:Boolean,default:!1},label:{type:String,default:""},placeholder:{type:String,default:"날짜 선택"},startPlaceholder:{type:String,default:"시작일"},endPlaceholder:{type:String,default:"종료일"},format:{type:String,default:"YYYY.MM.DD"},clearable:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1},error:{type:Boolean,default:!1},errorMessage:{type:String,default:""},helperText:{type:String,default:""},minDate:{type:[Date,String],default:null},maxDate:{type:[Date,String],default:null},size:{type:String,default:"medium",validator:o=>["small","medium","large","xlarge"].includes(o)},block:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(o,{emit:U}){const u=o,h=U,w=D(!1),v=D(new Date().getMonth()),p=D(new Date().getFullYear()),c=D(null),t=D(null),l=D(null),F=D(null),N=D(null),T=D("days"),b=D(!1),M=D(!1),W=["일","월","화","수","목","금","토"],z=["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],j=P(()=>{const e=[],a=p.value-10,s=p.value+10;for(let k=a;k<=s;k++)e.push(k);return e}),G=P(()=>z[v.value]),H=P(()=>{const e=[],a=new Date(p.value,v.value,1),s=new Date(p.value,v.value+1,0),k=a.getDay(),y=new Date(p.value,v.value,0).getDate();for(let _=0;_<k;_++){const d=new Date(p.value,v.value-1,y-k+_+1);e.push({day:d.getDate(),date:d,currentMonth:!1,disabled:x(d),selected:g(d,c.value),rangeStart:g(d,t.value),rangeEnd:g(d,l.value),inRange:R(d)})}for(let _=1;_<=s.getDate();_++){const d=new Date(p.value,v.value,_);e.push({day:_,date:d,currentMonth:!0,disabled:x(d),selected:g(d,c.value),rangeStart:g(d,t.value),rangeEnd:g(d,l.value),inRange:R(d)})}const ie=42-e.length;for(let _=1;_<=ie;_++){const d=new Date(p.value,v.value+1,_);e.push({day:_,date:d,currentMonth:!1,disabled:x(d),selected:g(d,c.value),rangeStart:g(d,t.value),rangeEnd:g(d,l.value),inRange:R(d)})}return e});se(()=>{J(),document.addEventListener("click",$)}),re(()=>{document.removeEventListener("click",$)});function J(){if(u.modelValue){if(u.isRange&&Array.isArray(u.modelValue))u.modelValue[0]&&(t.value=new Date(u.modelValue[0])),u.modelValue[1]&&(l.value=new Date(u.modelValue[1])),t.value&&(v.value=t.value.getMonth(),p.value=t.value.getFullYear());else if(!u.isRange)try{c.value=new Date(u.modelValue),isNaN(c.value.getTime())?c.value=null:(v.value=c.value.getMonth(),p.value=c.value.getFullYear())}catch{c.value=null}}}function K(){b.value=!b.value,b.value&&(M.value=!1)}function Q(){M.value=!M.value,M.value&&(b.value=!1)}function S(){b.value=!1,M.value=!1}function g(e,a){return!e||!a?!1:e.getDate()===a.getDate()&&e.getMonth()===a.getMonth()&&e.getFullYear()===a.getFullYear()}function x(e){if(u.minDate){const a=new Date(u.minDate);if(e<a)return!0}if(u.maxDate){const a=new Date(u.maxDate);if(e>a)return!0}return!1}function X(e){return e?u.isRange?t.value&&g(e,t.value)||l.value&&g(e,l.value):c.value&&g(e,c.value):!1}function R(e){return!u.isRange||!t.value||!l.value||!e?!1:e>t.value&&e<l.value}function E(e){if(!e||isNaN(e.getTime()))return"";try{const a=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0"),k=String(e.getDate()).padStart(2,"0");let y=u.format;return y=y.replace("YYYY",a),y=y.replace("MM",s),y=y.replace("DD",k),y}catch{return""}}function L(){u.disabled||(w.value=!0,T.value="days",u.isRange&&(F.value=t.value?new Date(t.value):null,N.value=l.value?new Date(l.value):null))}function $(e){!e.target.closest(".ui-datepicker")&&w.value&&(u.isRange&&(t.value=F.value,l.value=N.value),w.value=!1,S())}function Z(){v.value===0?(v.value=11,p.value--):v.value--,S()}function ee(){v.value===11?(v.value=0,p.value++):v.value++,S()}function ae(e){v.value=e,b.value=!1}function te(e){p.value=e,M.value=!1}function le(e){if(!e.disabled)if(S(),u.isRange)if(!t.value||t.value&&l.value)t.value=new Date(e.date),l.value=null;else if(e.date>=t.value)l.value=new Date(e.date),O();else{const a=new Date(t.value);t.value=new Date(e.date),l.value=a,O()}else c.value=new Date(e.date),h("update:modelValue",c.value),h("change",c.value),w.value=!1}function q(e){e.stopPropagation(),u.isRange?(t.value=null,l.value=null,h("update:modelValue",[null,null]),h("change",[null,null])):(c.value=null,h("update:modelValue",null),h("change",null))}function ne(){t.value=F.value,l.value=N.value,w.value=!1,S()}function O(){t.value&&l.value&&(h("update:modelValue",[t.value,l.value]),h("change",[t.value,l.value]),w.value=!1,S())}return I(()=>u.modelValue,e=>{if(e==null){c.value=null,t.value=null,l.value=null;return}if(u.isRange&&Array.isArray(e))t.value=e[0]?new Date(e[0]):null,l.value=e[1]?new Date(e[1]):null;else if(!u.isRange)try{c.value=e?new Date(e):null}catch{c.value=null}},{immediate:!0}),I([c,t,l],()=>{const e=u.isRange?t.value||l.value:c.value;e&&(v.value=e.getMonth(),p.value=e.getFullYear())}),(e,a)=>(i(),n("div",{class:B(["ui-datepicker",[`ui-datepicker--${o.size}`,{"ui-datepicker--opened":w.value,"ui-datepicker--range":o.isRange,"ui-datepicker--disabled":o.disabled,"ui-datepicker--error":o.error,"ui-datepicker--block":o.block}]])},[o.label?(i(),n("label",{key:0,class:"ui-datepicker__label",for:e.id},[A(f(o.label)+" ",1),o.required?(i(),n("span",ce,"*")):m("",!0)],8,oe)):m("",!0),r("div",de,[o.isRange?m("",!0):(i(),n("div",{key:0,class:"ui-datepicker__input",onClick:L},[a[2]||(a[2]=r("i",{class:"icon icon-calendar icon-md ui-datepicker__icon"},null,-1)),r("div",ve,[c.value?(i(),n("span",pe,f(E(c.value)),1)):(i(),n("span",fe,f(o.placeholder||"날짜 선택"),1))]),c.value&&o.clearable?(i(),n("i",{key:0,class:"icon icon-x-circle icon-md ui-datepicker__clear",onClick:C(q,["stop"])})):m("",!0)])),o.isRange?(i(),n("div",{key:1,class:"ui-datepicker__range-input",onClick:L},[a[3]||(a[3]=r("i",{class:"icon icon-calendar icon-md ui-datepicker__icon"},null,-1)),r("div",ke,[t.value?(i(),n("span",_e,f(E(t.value)),1)):(i(),n("span",ge,f(o.startPlaceholder||"시작일"),1))]),a[4]||(a[4]=r("div",{class:"ui-datepicker__range-separator"},"-",-1)),r("div",me,[l.value?(i(),n("span",ye,f(E(l.value)),1)):(i(),n("span",De,f(o.endPlaceholder||"종료일"),1))]),(t.value||l.value)&&o.clearable?(i(),n("i",{key:0,class:"icon icon-x-circle icon-md ui-datepicker__clear",onClick:C(q,["stop"])})):m("",!0)])):m("",!0)]),w.value?(i(),n("div",he,[T.value==="days"?(i(),n("div",we,[r("div",be,[r("button",{class:"ui-datepicker__arrow ui-datepicker__arrow--prev",onClick:Z,type:"button"},a[5]||(a[5]=[r("i",{class:"icon icon-chevron-left icon-md"},null,-1)])),r("div",Me,[r("div",Se,[r("div",{class:"ui-datepicker__month-select",onClick:C(K,["stop"])},[A(f(G.value)+" ",1),a[6]||(a[6]=r("i",{class:"icon icon-chevron-down icon-sm"},null,-1))]),b.value?(i(),n("div",{key:0,class:"ui-datepicker__dropdown-list",onClick:a[0]||(a[0]=C(()=>{},["stop"]))},[(i(),n(Y,null,V(z,(s,k)=>r("div",{key:s,class:B(["ui-datepicker__dropdown-item",{"ui-datepicker__dropdown-item--selected":v.value===k}]),onClick:y=>ae(k)},f(s),11,Ce)),64))])):m("",!0)]),r("div",xe,[r("div",{class:"ui-datepicker__year-select",onClick:C(Q,["stop"])},[A(f(p.value)+" ",1),a[7]||(a[7]=r("i",{class:"icon icon-chevron-down icon-sm"},null,-1))]),M.value?(i(),n("div",{key:0,class:"ui-datepicker__dropdown-list",onClick:a[1]||(a[1]=C(()=>{},["stop"]))},[(i(!0),n(Y,null,V(j.value,s=>(i(),n("div",{key:s,class:B(["ui-datepicker__dropdown-item",{"ui-datepicker__dropdown-item--selected":p.value===s}]),onClick:k=>te(s)},f(s),11,Re))),128))])):m("",!0)])]),r("button",{class:"ui-datepicker__arrow ui-datepicker__arrow--next",onClick:ee,type:"button"},a[8]||(a[8]=[r("i",{class:"icon icon-chevron-right icon-md"},null,-1)]))]),r("div",Ye,[(i(),n(Y,null,V(W,s=>r("div",{key:s,class:"ui-datepicker__weekday"},f(s),1)),64))]),r("div",Ve,[(i(!0),n(Y,null,V(H.value,(s,k)=>(i(),n("div",{key:k,class:B(["ui-datepicker__day",{"ui-datepicker__day--other-month":!s.currentMonth,"ui-datepicker__day--today":s.isToday,"ui-datepicker__day--selected":X(s.date),"ui-datepicker__day--in-range":R(s.date),"ui-datepicker__day--disabled":x(s.date)}]),onClick:y=>!x(s.date)&&le(s)},f(s.day),11,Be))),128))])])):m("",!0),o.isRange&&T.value==="days"?(i(),n("div",Fe,[r("button",{class:"ui-datepicker__action-button ui-datepicker__action-button--cancel",onClick:ne}," 취소 "),r("button",{class:"ui-datepicker__action-button ui-datepicker__action-button--apply",onClick:O}," 적용 ")])):m("",!0)])):m("",!0),o.error&&o.errorMessage?(i(),n("div",Ne,f(o.errorMessage),1)):o.helperText?(i(),n("div",Te,f(o.helperText),1)):m("",!0)],2))}},Pe=ue(Ee,[["__scopeId","data-v-0ebdbb3a"]]);export{Pe as _};
