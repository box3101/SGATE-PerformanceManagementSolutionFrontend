import{_ as N,r as v,H as B,a1 as q,f as K,O as T,c as u,o as i,a as s,h as L,F as E,g as I,k as h,t as f,m as M,v as G,x as g,a5 as H,n as Q,G as j,a6 as J}from"./DLu2o53g.js";const P={class:"ui-multi-select__tags"},R={class:"ui-multi-select__tag-avatar"},W=["src","alt"],X={class:"ui-multi-select__tag-label"},Y=["onClick"],Z={class:"ui-multi-select__input-wrapper"},ee=["placeholder","disabled"],le={class:"ui-multi-select__indicators"},te={key:0,class:"ui-multi-select__spinner"},se={class:"ui-multi-select__dropdown"},ae={key:0,class:"ui-multi-select__no-results"},ue={class:"ui-multi-select__no-results-text"},ie={key:1,class:"ui-multi-select__empty"},ce={key:2,class:"ui-multi-select__options"},ne=["onClick","onMouseenter"],oe={class:"ui-multi-select__option-info"},de={class:"ui-multi-select__option-name"},re={key:0,class:"ui-multi-select__option-email"},ve={key:1,class:"ui-multi-select__option-department"},me={class:"ui-multi-select__option-checkbox"},_e={key:0,viewBox:"0 0 16 16",class:"ui-multi-select__check-icon"},he={__name:"UiMultiSelect",props:{options:{type:Array,default:()=>[]},modelValue:{type:Array,default:()=>[]},placeholder:{type:String,default:"협업자 이름을 입력해주세요"},disabled:{type:Boolean,default:!1},viewOnly:{type:Boolean,default:!1},error:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},size:{type:String,default:"medium",validator:a=>["small","medium","large"].includes(a)},width:{type:[String,Number],default:"100%"}},emits:["update:modelValue","search","focus","blur"],setup(a,{emit:D}){J(e=>({"1ee5e23e":a.width}));const c=a,p=D,r=v(!1),y=v(!1),n=v([...c.modelValue]),d=v(""),o=v(-1),w=v(null),x=v(`multi-select-${Math.random().toString(36).substr(2,9)}`),m=B(()=>c.options.filter(e=>n.value.includes(e.value))),_=B(()=>{if(!d.value)return c.options;const e=d.value.toLowerCase();return c.options.filter(l=>l.label.toLowerCase().includes(e)||l.email&&l.email.toLowerCase().includes(e)||l.department&&l.department.toLowerCase().includes(e))}),k=e=>n.value.includes(e.value),O=e=>{if(c.disabled||c.viewOnly)return;const l=n.value.indexOf(e.value);l===-1?n.value.push(e.value):n.value.splice(l,1),p("update:modelValue",n.value),d.value="",j(()=>{var t;(t=w.value)==null||t.focus()})},C=e=>{if(c.disabled||c.viewOnly)return;const l=n.value.indexOf(e.value);l!==-1&&(n.value.splice(l,1),p("update:modelValue",n.value))},z=()=>{var e;c.disabled||c.viewOnly||(e=w.value)==null||e.focus()},F=()=>{y.value=!0,r.value=!0,o.value=-1,p("focus"),window.dispatchEvent(new CustomEvent("select-dropdown-toggle",{detail:{id:x.value}}))},$=()=>{p("search",d.value),o.value=-1},A=e=>{var l;switch(e.key){case"ArrowDown":e.preventDefault(),o.value<_.value.length-1&&o.value++;break;case"ArrowUp":e.preventDefault(),o.value>0&&o.value--;break;case"Enter":e.preventDefault(),o.value>=0&&_.value[o.value]&&O(_.value[o.value]);break;case"Escape":r.value=!1,(l=w.value)==null||l.blur();break;case"Backspace":!d.value&&m.value.length>0&&C(m.value[m.value.length-1]);break}},S=e=>{e.detail.id!==x.value&&r.value&&(r.value=!1,y.value=!1)},V=e=>{!e.target.closest(".ui-multi-select")&&r.value&&(r.value=!1,y.value=!1)};return q(()=>c.modelValue,e=>{n.value=[...e]},{deep:!0}),K(()=>{document.addEventListener("click",V),window.addEventListener("select-dropdown-toggle",S)}),T(()=>{document.removeEventListener("click",V),window.removeEventListener("select-dropdown-toggle",S)}),(e,l)=>(i(),u("div",{class:g(["ui-multi-select",[`ui-multi-select--${a.size}`,{"ui-multi-select--open":r.value,"ui-multi-select--selected":n.value.length>0,"ui-multi-select--error":a.error,"ui-multi-select--disabled":a.disabled,"ui-multi-select--view":a.viewOnly,"ui-multi-select--focused":y.value}]]),style:Q({width:a.width})},[s("div",{class:"ui-multi-select__control",onClick:z},[s("div",P,[(i(!0),u(E,null,I(m.value,t=>(i(),u("div",{key:t.value,class:"ui-multi-select__tag"},[s("div",R,[t.avatar?(i(),u("img",{key:0,src:t.avatar,alt:t.label,class:"ui-multi-select__avatar-image"},null,8,W)):h("",!0)]),s("span",X,f(t.label),1),!a.disabled&&!a.viewOnly?(i(),u("button",{key:0,class:"ui-multi-select__tag-remove",onClick:M(b=>C(t),["stop"]),type:"button"}," × ",8,Y)):h("",!0)]))),128)),s("div",Z,[L(s("input",{ref_key:"searchInput",ref:w,"onUpdate:modelValue":l[0]||(l[0]=t=>d.value=t),class:"ui-multi-select__input",placeholder:m.value.length===0?a.placeholder:"",disabled:a.disabled||a.viewOnly,onFocus:F,onKeydown:A,onInput:$,autocomplete:"off"},null,40,ee),[[G,d.value]])])]),s("div",le,[a.loading?(i(),u("div",te)):(i(),u("i",{key:1,class:g(["ui-multi-select__icon",{"ui-multi-select__icon--up":r.value}])},null,2))])]),L(s("div",se,[_.value.length===0&&d.value?(i(),u("div",ae,[l[1]||(l[1]=s("div",{class:"ui-multi-select__no-results-icon"},"🔍",-1)),s("div",ue,' "'+f(d.value)+'"에 대한 검색 결과가 없습니다 ',1)])):a.options.length===0&&!d.value?(i(),u("div",ie,l[2]||(l[2]=[s("div",{class:"ui-multi-select__empty-icon"},"👥",-1),s("div",{class:"ui-multi-select__empty-text"},"협업자를 추가해보세요",-1)]))):(i(),u("div",ce,[(i(!0),u(E,null,I(_.value,(t,b)=>(i(),u("div",{key:t.value,class:g(["ui-multi-select__option",{"ui-multi-select__option--selected":k(t),"ui-multi-select__option--highlighted":o.value===b}]),onClick:M(U=>O(t),["stop"]),onMouseenter:U=>o.value=b},[s("div",oe,[s("div",de,f(t.label),1),t.email?(i(),u("div",re,f(t.email),1)):h("",!0),t.department?(i(),u("div",ve,f(t.department),1)):h("",!0)]),s("div",me,[s("div",{class:g(["ui-multi-select__checkbox",{"ui-multi-select__checkbox--checked":k(t)}])},[k(t)?(i(),u("svg",_e,l[3]||(l[3]=[s("path",{d:"M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"},null,-1)]))):h("",!0)],2)])],42,ne))),128))]))],512),[[H,r.value]])],6))}},pe=N(he,[["__scopeId","data-v-a04ca8da"]]);export{pe as default};
