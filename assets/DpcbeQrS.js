import H from"./BlXmp1sg.js";import j from"./DHYk2osD.js";import A from"./BZ5OeYRK.js";import{r as F,z as k,a2 as M,C as L,w as g,o as p,c as h,F as q,g as J,x as _,k as m,a as s,b as v,m as C,d as x,t as f}from"./DarrAPd0.js";import"./DHPyQbzL.js";const K={class:"flex items-center gap-2"},P=["draggable","onDragstart","onDrop"],Q=["rowspan"],W=["rowspan"],X={key:0,class:"definition-content"},Y={key:1,class:"category-content"},Z=["rowspan"],ee={class:"pd-trl10 br vertical-top behavior-cell"},te={class:"text-center"},re={class:"text-center"},oe=["rowspan"],pe={__name:"CompetencyDetailManager",setup(se){const d=F([{id:"group_1",type:"group",isRowspanGroup:!0,competencyName:"전문가의식",definition:"회사의 목표에 따라 부하의 능력을 최대한으로 발휘 시키려고 노력하며, 평소에 부하의 능력, 적성을 정확히 파악하여 그에 따라 일을 맡기고 지속적으로 육성하는가.",category:"BARS",behaviors:[{behavior:"업무 수행에 있어 높은 수준의 원칙과 완성도를 보이며, 체계적이고 독자적인 자기개발에 매진함은 물론, 동료들 또한 적극적으로 업무에 임하도록 기준을 만들고 격려, 유도한다.",level:"5/100",weight:"-"},{behavior:"업무 수행 시 원칙과 기준을 세우고 이에 따라 완성도 높은 결과를 도출하며, 자기개발을 위해 노력하고 동료들과의 협력을 이끌어낸다.",level:"4/80",weight:"-"},{behavior:"업무 수행 시 일정한 원칙과 기준을 가지고 있으며, 지속적인 자기개발을 위해 노력하고 동료들과 원활한 관계를 유지한다.",level:"3/60",weight:"-"}],sortOrder:1},{id:"single_1",type:"single",isRowspanGroup:!1,category:"핵심역량",categoryType:"리더십",behavior:"팀을 이끌고 목표를 달성하는 능력",level:"5",weight:"30",sortOrder:2},{id:"single_2",type:"single",isRowspanGroup:!1,category:"직무역량",categoryType:"문제해결",behavior:"복잡한 문제를 분석하고 해결하는 능력",level:"4",weight:"25",sortOrder:3},{id:"group_2",type:"group",isRowspanGroup:!0,competencyName:"협업능력",definition:"다양한 배경을 가진 구성원들과 효과적으로 협력하여 공동의 목표를 달성하는 능력",category:"BEI",behaviors:[{behavior:"팀원들과의 협력을 통해 시너지를 창출하고, 갈등 상황에서도 건설적인 해결책을 모색한다.",level:"5/100",weight:"25"},{behavior:"팀원들과 협력하여 업무를 수행하며, 의견 차이가 있을 때 적절한 조율을 시도한다.",level:"3/60",weight:"15"}],sortOrder:4},{id:"single_3",type:"single",isRowspanGroup:!1,category:"직무역량",categoryType:"전문성",behavior:"업무 분야의 전문 지식과 기술을 보유하고 활용",level:"4",weight:"22",sortOrder:5}]),G=k(()=>{const t=[];return[...d.value].sort((r,l)=>r.sortOrder-l.sortOrder).forEach(r=>{r.type==="group"?r.behaviors.forEach((l,i)=>{t.push({id:`${r.id}_${i}`,groupId:r.id,subIndex:i,isRowspanGroup:!0,isGroupHeader:i===0,competencyName:r.competencyName,definition:r.definition,type:r.category,behavior:l.behavior,level:l.level,weight:l.weight,rowspanCount:i===0?r.behaviors.length:0,totalGroupSize:r.behaviors.length,sortOrder:r.sortOrder})}):t.push({id:r.id,isRowspanGroup:!1,category:r.category,type:r.categoryType,behavior:r.behavior,level:r.level,weight:r.weight,sortOrder:r.sortOrder})}),t}),N=k(()=>!d.value.some(t=>t.type==="group")),D=(t,e)=>{if(!t.isRowspanGroup)return!0;switch(e){case"checkbox":case"definition":case"type":case"actions":return t.isGroupHeader;default:return!0}},O=(t,e)=>{if(!t.isRowspanGroup||!t.isGroupHeader)return 1;switch(e){case"checkbox":case"definition":case"type":case"actions":return t.totalGroupSize;default:return 1}},V=t=>{const e=[];return t.isRowspanGroup&&(e.push("rowspan-group"),t.isGroupHeader&&e.push("group-header")),e.join(" ")},T=t=>t.isRowspanGroup?t.isGroupHeader:!0,I=t=>{if(d.value.some(l=>l.type==="group"))return console.warn("그룹 행이 있는 경우 일반 정렬을 사용할 수 없습니다. 드래그 앤 드롭을 사용하세요."),!1;const{field:e,direction:r}=t;d.value.sort((l,i)=>{let n=l[e]||"",u=i[e]||"";return!isNaN(n)&&!isNaN(u)&&(n=Number(n),u=Number(u)),r==="asc"?n>u?1:-1:n<u?1:-1}),d.value.forEach((l,i)=>{l.sortOrder=i+1})},S=(t,e,r)=>{if(r.isRowspanGroup&&!r.isGroupHeader)return t.preventDefault(),!1;t.dataTransfer.setData("sourceIndex",e.toString()),t.dataTransfer.setData("sourceId",r.groupId||r.id),t.dataTransfer.setData("sourceType",r.isRowspanGroup?"group":"single")},E=t=>{t.preventDefault()},U=(t,e)=>{t.preventDefault();const r=parseInt(t.dataTransfer.getData("sourceIndex")),l=t.dataTransfer.getData("sourceId"),i=t.dataTransfer.getData("sourceType");if(isNaN(r)||r===e)return;const n=d.value.find(a=>a.id===l);if(!n)return;const b=G.value[e];let c;if(b.isRowspanGroup){const a=d.value.find(w=>w.id===b.groupId);c=(a==null?void 0:a.sortOrder)||1}else{const a=d.value.find(w=>w.id===b.id);c=(a==null?void 0:a.sortOrder)||1}n.sortOrder<c?(d.value.forEach(a=>{a.sortOrder>n.sortOrder&&a.sortOrder<=c&&a.sortOrder--}),n.sortOrder=c):(d.value.forEach(a=>{a.sortOrder>=c&&a.sortOrder<n.sortOrder&&a.sortOrder++}),n.sortOrder=c)},$=()=>{},z=t=>{switch(t){case"핵심역량":return"category-core";case"직무역량":return"category-job";default:return"category-default"}},B=t=>{console.log("상세보기/수정:",t)};return M(d,t=>{console.log("데이터 변경됨:",t.map(e=>({id:e.id,sortOrder:e.sortOrder})))},{deep:!0}),(t,e)=>{const r=H,l=j,i=A;return p(),L(i,{modelValue:G.value,"onUpdate:modelValue":e[3]||(e[3]=n=>G.value=n),title:"역량항목 구분 (개선된 멀티행 정렬)",bordered:"",scrollable:"",sortable:N.value,editable:"","max-height":"calc(100vh - 200px)",canAddRow:!1,canSave:!1,isDragging:!0,onSort:I},{"header-action-right":g(()=>[s("div",K,[v(r,{variant:"secondary-line"},{default:g(()=>e[4]||(e[4]=[x("NCS")])),_:1}),v(r,{variant:"secondary-line"},{default:g(()=>e[5]||(e[5]=[x("공통/리더십")])),_:1}),v(r,{variant:"secondary"},{default:g(()=>e[6]||(e[6]=[x("추가")])),_:1})])]),colgroup:g(()=>e[7]||(e[7]=[s("col",{style:{width:"40px"}},null,-1),s("col",{style:{width:"200px"}},null,-1),s("col",{style:{width:"100px"}},null,-1),s("col",{style:{width:"auto"}},null,-1),s("col",{style:{width:"100px"}},null,-1),s("col",{style:{width:"100px"}},null,-1),s("col",{style:{width:"40px"}},null,-1)])),header:g(({selectAll:n,isAllSelected:u})=>[s("th",null,[v(l,{size:"large",onClick:e[0]||(e[0]=C(()=>{},["stop"])),modelValue:u,"onUpdate:modelValue":n},null,8,["modelValue","onUpdate:modelValue"])]),e[8]||(e[8]=s("th",null,"역량정의/역량항목",-1)),e[9]||(e[9]=s("th",null,"구분",-1)),e[10]||(e[10]=s("th",null,"행동기준/행동수준/역량정의",-1)),e[11]||(e[11]=s("th",null,"수준/점수",-1)),e[12]||(e[12]=s("th",null,"가중",-1)),e[13]||(e[13]=s("th",null,"수정",-1))]),body:g(({rows:n,toggleRowSelection:u,isRowSelected:b,handleDragStart:c,handleDragOver:a,handleDrop:w,handleDragEnd:ae})=>[(p(!0),h(q,null,J(n,(o,R)=>(p(),h("tr",{key:`${o.groupId||"single"}-${o.id}-${o.subIndex||0}`,class:_(V(o)),draggable:T(o),onDragstart:y=>S(y,R,o),onDragover:e[2]||(e[2]=y=>E(y)),onDrop:y=>U(y,R),onDragend:$},[D(o,"checkbox")?(p(),h("td",{key:0,rowspan:O(o,"checkbox"),class:"txt-c vertical-top checkbox-cell"},[v(l,{size:"large",onClick:e[1]||(e[1]=C(()=>{},["stop"])),modelValue:b(o),"onUpdate:modelValue":()=>u(o)},null,8,["modelValue","onUpdate:modelValue"])],8,Q)):m("",!0),D(o,"definition")?(p(),h("td",{key:1,rowspan:O(o,"definition"),class:"vertical-middle"},[o.isRowspanGroup&&o.isGroupHeader?(p(),h("div",X,[s("strong",null,"["+f(o.competencyName)+"]",1),e[14]||(e[14]=s("br",null,null,-1)),x(" "+f(o.definition),1)])):o.isRowspanGroup?m("",!0):(p(),h("div",Y,[s("span",{class:_(["category-badge",z(o.category)])},f(o.category),3)]))],8,W)):m("",!0),D(o,"type")?(p(),h("td",{key:2,rowspan:O(o,"type"),class:"text-center"},f(o.type),9,Z)):m("",!0),s("td",ee,[s("div",{class:_(o.isRowspanGroup?"behavior-rowspan":"behavior-normal")},f(o.behavior),3)]),s("td",te,f(o.level),1),s("td",re,f(o.weight),1),D(o,"actions")?(p(),h("td",{key:3,rowspan:O(o,"actions")},[v(r,{variant:"ghost",size:"small",onClick:y=>B(o)},{default:g(()=>e[15]||(e[15]=[s("i",{class:"icon icon-md icon-edit"},null,-1)])),_:2},1032,["onClick"])],8,oe)):m("",!0)],42,P))),128))]),_:1},8,["modelValue","sortable"])}}};export{pe as default};
