import Q from"./YaOjrOF8.js";import X from"./Cqkz2W17.js";import Z from"./BSy2J7Lg.js";import ee from"./CMx2HPmr.js";import{_ as S,z as g,c as a,o as l,a as e,k as h,x as b,t as s,F as x,g as w,r as k,f as te,E as ne,G as oe,b as C,w as se,d as z}from"./BAIvXrOt.js";import"./DwTRQzcU.js";const ae={class:"report-card"},le={class:"report-header"},ie={class:"report-meta"},re={class:"create-time"},de={class:"author-info"},ce={class:"submit-target"},ue={class:"report-title"},pe={key:0,class:"report-summary"},ve={class:"report-content"},me={class:"content-section"},he={class:"content-body"},_e={class:"content-text"},fe={key:0,class:"content-section"},ge={class:"content-body"},ye={class:"content-text"},ke={key:1,class:"content-section"},be={class:"content-body"},xe={class:"content-text"},Ce={key:2,class:"content-section"},we={class:"attachments-list"},$e={class:"attachment-icon"},Te={class:"attachment-info"},Pe={class:"attachment-name"},De={class:"attachment-size"},Ve=["onClick"],Re={key:3,class:"content-section"},ze={class:"feedbacks-list"},Me={class:"feedback-header"},Fe={class:"feedback-author"},Be={class:"feedback-time"},Ie={class:"feedback-content"},Ae={__name:"ReportDetailCard",props:{report:{type:Object,required:!0,validator:r=>r&&r.extendedProps&&r.title}},setup(r){const p=r,$=g(()=>p.report.extendedProps.reportType==="daily"?"일간보고":"주간보고"),T=g(()=>p.report.extendedProps.reportType==="daily"?"daily":"weekly"),P=g(()=>p.report.extendedProps.attachments&&p.report.extendedProps.attachments.length>0),y=g(()=>p.report.extendedProps.feedbacks&&p.report.extendedProps.feedbacks.length>0);function m(v){var i;const c=(i=v.split(".").pop())==null?void 0:i.toLowerCase();return{pdf:"icon-file-pdf",doc:"icon-file-doc",docx:"icon-file-doc",xls:"icon-file-excel",xlsx:"icon-file-excel",ppt:"icon-file-ppt",pptx:"icon-file-ppt",jpg:"icon-file-image",jpeg:"icon-file-image",png:"icon-file-image",gif:"icon-file-image",zip:"icon-file-zip",rar:"icon-file-zip"}[c]||"icon-file-default"}function d(v){if(v===0)return"0 Bytes";const c=1024,u=["Bytes","KB","MB","GB"],i=Math.floor(Math.log(v)/Math.log(c));return parseFloat((v/Math.pow(c,i)).toFixed(1))+" "+u[i]}function D(v){return new Intl.DateTimeFormat("ko-KR",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(v))}function V(v){console.log("파일 다운로드:",v.name)}return(v,c)=>(l(),a("div",ae,[e("div",le,[e("div",ie,[e("span",{class:b(["type-badge",T.value])},s($.value),3),e("span",re,s(r.report.extendedProps.createTime),1),e("span",de,s(r.report.extendedProps.author),1),e("span",ce,"→ "+s(r.report.extendedProps.submitTarget),1)]),e("h2",ue,s(r.report.title),1),r.report.extendedProps.summary?(l(),a("p",pe,s(r.report.extendedProps.summary),1)):h("",!0)]),e("div",ve,[e("div",me,[c[0]||(c[0]=e("h3",{class:"section-title"},"수행 내용",-1)),e("div",he,[e("p",_e,s(r.report.extendedProps.actualContent),1)])]),r.report.extendedProps.planContent?(l(),a("div",fe,[c[1]||(c[1]=e("h3",{class:"section-title"},"다음 계획",-1)),e("div",ge,[e("p",ye,s(r.report.extendedProps.planContent),1)])])):h("",!0),r.report.extendedProps.etcContent?(l(),a("div",ke,[c[2]||(c[2]=e("h3",{class:"section-title"},"기타 의견",-1)),e("div",be,[e("p",xe,s(r.report.extendedProps.etcContent),1)])])):h("",!0),P.value?(l(),a("div",Ce,[c[4]||(c[4]=e("h3",{class:"section-title"},"첨부파일",-1)),e("div",we,[(l(!0),a(x,null,w(r.report.extendedProps.attachments,u=>(l(),a("div",{key:u.id,class:"attachment-item"},[e("div",$e,[e("i",{class:b(m(u.name))},null,2)]),e("div",Te,[e("span",Pe,s(u.name),1),e("span",De,"("+s(d(u.size))+")",1)]),e("button",{class:"download-button",onClick:i=>V(u)},c[3]||(c[3]=[e("i",{class:"icon-download"},null,-1)]),8,Ve)]))),128))])])):h("",!0),y.value?(l(),a("div",Re,[c[5]||(c[5]=e("h3",{class:"section-title"},"피드백",-1)),e("div",ze,[(l(!0),a(x,null,w(r.report.extendedProps.feedbacks,u=>(l(),a("div",{key:u.id,class:"feedback-item"},[e("div",Me,[e("span",Fe,s(u.author),1),e("span",Be,s(D(u.createdAt)),1)]),e("p",Ie,s(u.content),1)]))),128))])])):h("",!0)])]))}},Ee=S(Ae,[["__scopeId","data-v-a19016c9"]]),Se={class:"report-page"},Ue={class:"report-controls com-header"},Le={class:"checkbox-group"},je={class:"select-group"},Ge={class:"report-viewer-container"},Ke={class:"view-mode-tabs"},Ne=["onClick"],Oe={key:0,class:"report-counter"},He={key:0,class:"single-view"},qe={key:0,class:"navigation-bar"},We=["disabled"],Ye={class:"progress-nav"},Je={class:"report-indicators"},Qe=["onClick","title"],Xe={class:"author-preview"},Ze=["disabled"],et={key:1,class:"report-detail"},tt={key:1,class:"timeline-view"},nt={class:"timeline-container"},ot={class:"timeline-marker"},st={key:0,class:"timeline-line"},at={class:"timeline-content"},lt={class:"time-header"},it={class:"create-time"},rt={class:"author-name"},dt=["onClick"],ct={class:"report-title"},ut={class:"report-content"},pt={__name:"view",setup(r){const p=k(null),$=k(!0),T=k(!0),P=k("w"),y=k(!1),m=k("single"),d=k(0),D=[{value:"w",label:"작성일 기준"},{value:"r",label:"보고일 기준"}],V=[{value:"single",label:"단일 보기"},{value:"timeline",label:"타임라인"}],v={dayMaxEvents:!1,moreLinkClick:"popover",eventDisplay:"block"},c=k([{id:"1",title:"[이찬용] 프로젝트 A 진행상황",start:"2025-05-16",allDay:!0,backgroundColor:"#0084ff",borderColor:"#0084ff",extendedProps:{reportType:"weekly",author:"이찬용",submitTarget:"한성진",actualContent:`리타게팅 랜딩페이지 수정
우체국뱅킹 ui/ux 개선 퍼블리싱 작업

Sgate 아카데미 퍼블리싱`,planContent:`리타게팅 랜딩페이지 수정
우체국뱅킹 ui/ux 개선 퍼블리싱 작업
Sgate 아카데미 퍼블리싱

sgate 인사평가 퍼블리싱`,etcContent:"특별한 의견 없음",attachments:[{id:1,name:"프로젝트_진행현황.xlsx",size:15234},{id:2,name:"화면설계서.pdf",size:3421567}],feedbacks:[{id:1,author:"한성진",content:"수고하셨습니다. 다음 주 일정 조율이 필요할 것 같습니다.",createdAt:"2025-05-16T16:30:00"}],summary:"프로젝트 A 1차 개발 완료",createTime:"09:30"}},{id:"2",title:"[김영희] 품질관리 점검",start:"2025-05-16",allDay:!0,backgroundColor:"#ff6b35",borderColor:"#ff6b35",extendedProps:{reportType:"daily",author:"김영희",submitTarget:"이부장",actualContent:`생산라인 전체 점검 완료
- 1라인: 정상 가동
- 2라인: 미세 조정 필요
- 3라인: 정상 가동`,planContent:`내일 계획:
- 2라인 미세 조정 작업
- 월간 품질 보고서 작성
- 신규 장비 점검`,etcContent:"전반적으로 양호한 상태",attachments:[{id:3,name:"품질점검표.pdf",size:892345}],feedbacks:[],summary:"생산라인 품질관리 점검 완료",createTime:"16:45"}},{id:"3",title:"[정수민] 회계 업무 처리",start:"2025-05-16",allDay:!0,backgroundColor:"#6f42c1",borderColor:"#6f42c1",extendedProps:{reportType:"daily",author:"정수민",submitTarget:"최팀장",actualContent:`월간 회계 마감 완료
- 매출/매입 정리
- 비용 분석
- 예산 대비 실적 검토`,planContent:`내일 계획:
- 분기 보고서 작성
- 예산 수정안 검토
- 세무사 미팅 준비`,etcContent:"예산 대비 105% 달성",attachments:[{id:5,name:"월간정산서.xlsx",size:234567},{id:6,name:"예산분석표.pdf",size:445566}],feedbacks:[],summary:"월간 회계 마감 및 실적 분석",createTime:"11:30"}},{id:"4",title:"[박민수] 마케팅 활동 보고",start:"2025-05-16",allDay:!0,backgroundColor:"#28a745",borderColor:"#28a745",extendedProps:{reportType:"daily",author:"박민수",submitTarget:"김과장",actualContent:`고객사 3곳 방문 완료
- A사: 제품 데모 진행
- B사: 계약 조건 협의
- C사: 추가 요구사항 청취`,planContent:`내일 계획:
- A사 후속 미팅 준비
- B사 계약서 검토
- 신규 고객사 발굴`,etcContent:"전반적으로 긍정적인 반응",attachments:[],feedbacks:[],summary:"고객사 방문 및 제품 소개",createTime:"14:20"}}]),u=g(()=>c.value.filter(t=>{const n=$.value&&t.extendedProps.reportType==="daily",_=T.value&&t.extendedProps.reportType==="weekly";return n||_})),i=g(()=>{if(!p.value)return[];const t=A(p.value);return u.value.filter(n=>A(n.start)===t)}),M=g(()=>i.value[d.value]||null),F=g(()=>[...i.value].sort((t,n)=>{const _=t.extendedProps.createTime,R=n.extendedProps.createTime;return _.localeCompare(R)})),U=g(()=>{if(!p.value)return"보고서 뷰어";const t=q(p.value),n=i.value.length;return`${t} 보고서 (${n}건)`});function L(t){p.value=t.date,d.value=0,m.value="single",y.value=!0}function j(t){p.value=t.event.start;const n=i.value.findIndex(_=>_.id===t.event.id);d.value=n>=0?n:0,m.value="single",y.value=!0}function G(t){m.value=t}function B(){d.value<i.value.length-1&&d.value++}function I(){d.value>0&&d.value--}function K(t){d.value=t}function N(t){d.value=t,m.value="single"}function O(t){return`${t.extendedProps.author} - ${t.extendedProps.createTime}`}function H(t){return t==="daily"?"일간":"주간"}function q(t){return t?new Intl.DateTimeFormat("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date(t)):""}function A(t){if(!t)return"";const n=new Date(t);return`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}-${String(n.getDate()).padStart(2,"0")}`}function E(t){if(y.value)switch(t.key){case"ArrowLeft":t.preventDefault(),I();break;case"ArrowRight":t.preventDefault(),B();break;case"Escape":t.preventDefault(),y.value=!1;break}}return te(()=>{window.addEventListener("keydown",E)}),ne(()=>{window.removeEventListener("keydown",E)}),oe(m,()=>{m.value==="single"&&(d.value=0)}),(t,n)=>{const _=Q,R=X,W=Z;return l(),a(x,null,[e("div",Se,[e("div",Ue,[e("div",Le,[C(_,{size:"large",modelValue:$.value,"onUpdate:modelValue":n[0]||(n[0]=o=>$.value=o),label:"일간보고",value:"d"},null,8,["modelValue"]),C(_,{size:"large",modelValue:T.value,"onUpdate:modelValue":n[1]||(n[1]=o=>T.value=o),label:"주간보고",value:"w"},null,8,["modelValue"])]),e("div",je,[C(R,{modelValue:P.value,"onUpdate:modelValue":n[2]||(n[2]=o=>P.value=o),class:"date-selector",options:D},null,8,["modelValue"])])]),C(ee,{modelValue:p.value,"onUpdate:modelValue":n[3]||(n[3]=o=>p.value=o),events:u.value,onDateClick:L,onEventClick:j,useViewportHeight:!0,viewportHeight:80,customOptions:v},null,8,["modelValue","events"])]),C(W,{modelValue:y.value,"onUpdate:modelValue":n[4]||(n[4]=o=>y.value=o),title:U.value,size:"xlarge",showFooter:!1,class:"report-viewer-modal"},{default:se(()=>[e("div",Ge,[e("div",Ke,[(l(),a(x,null,w(V,o=>e("button",{key:o.value,onClick:f=>G(o.value),class:b(["tab-button",{active:m.value===o.value}])},[z(s(o.label)+" ",1),o.value==="single"&&i.value.length>1?(l(),a("span",Oe,s(d.value+1)+"/"+s(i.value.length),1)):h("",!0)],10,Ne)),64))]),m.value==="single"?(l(),a("div",He,[i.value.length>1?(l(),a("div",qe,[e("button",{onClick:I,disabled:d.value===0,class:b(["nav-button",{disabled:d.value===0}])},n[5]||(n[5]=[e("i",{class:"icon-chevron-left"},null,-1),z(" 이전 ")]),10,We),e("div",Ye,[e("div",Je,[(l(!0),a(x,null,w(i.value,(o,f)=>(l(),a("button",{key:o.id,onClick:Y=>K(f),class:b(["indicator-button",{active:f===d.value}]),title:O(o)},s(f+1),11,Qe))),128))]),e("div",Xe,[(l(!0),a(x,null,w(i.value,(o,f)=>(l(),a("span",{key:o.id,class:b(["author-name",{active:f===d.value}])},s(o.extendedProps.author)+s(f<i.value.length-1?",":""),3))),128))])]),e("button",{onClick:B,disabled:d.value===i.value.length-1,class:b(["nav-button",{disabled:d.value===i.value.length-1}])},n[6]||(n[6]=[z(" 다음 "),e("i",{class:"icon-chevron-right"},null,-1)]),10,Ze)])):h("",!0),M.value?(l(),a("div",et,[C(Ee,{report:M.value},null,8,["report"])])):h("",!0)])):m.value==="timeline"?(l(),a("div",tt,[e("div",nt,[(l(!0),a(x,null,w(F.value,(o,f)=>(l(),a("div",{key:o.id,class:"timeline-item"},[e("div",ot,[n[7]||(n[7]=e("div",{class:"timeline-dot"},null,-1)),f<F.value.length-1?(l(),a("div",st)):h("",!0)]),e("div",at,[e("div",lt,[e("span",it,s(o.extendedProps.createTime),1),e("span",rt,s(o.extendedProps.author),1),e("span",{class:b(["report-type-badge",o.extendedProps.reportType])},s(H(o.extendedProps.reportType)),3)]),e("div",{class:"report-preview",onClick:Y=>N(i.value.findIndex(J=>J.id===o.id))},[e("h4",ct,s(o.title),1),e("p",ut,s(o.extendedProps.actualContent),1)],8,dt)])]))),128))])])):h("",!0)])]),_:1},8,["modelValue","title"])],64)}}},yt=S(pt,[["__scopeId","data-v-77d20a46"]]);export{yt as default};
