import me from"./BEhfI_eV.js";import fe from"./CL-xsEu0.js";import _e from"./vvAW6bpE.js";import ye from"./DoYn9-sc.js";import ke from"./BbtyAUt6.js";import he from"./Ddog1ZcS.js";import ge from"./6uOmeRzD.js";import{_ as xe,r as m,z as $,f as Ce,E as be,c as a,a as t,b as r,w as c,F,o as i,t as p,d as y,g as O,k as g,C as U,x as we}from"./CjorAzL9.js";import"./Ba6N9w-C.js";const Te={class:"report-page"},Ve={class:"report-controls"},Pe={class:"checkbox-group"},De={class:"select-group"},Re={class:"modal-title"},Fe={class:"author-tags"},Ie=["onClick"],Be={class:"modal-content",style:{position:"relative",top:"-15px"}},Oe={key:0,class:"report-container"},Ue={class:"report-header"},ze={class:"author-info"},Me={class:"report-actions"},Se={class:"left-actions"},Ae={class:"report-body"},Ee={class:"report-section"},$e={class:"report-content-flex"},Le={class:"report-content-item"},He={class:"report-section-title"},Ke=["innerHTML"],Ne={class:"report-content-item"},Ge={class:"report-section-title"},je=["innerHTML"],We={class:"report-content-item"},Ye={class:"report-section-title"},qe=["innerHTML"],Je={class:"mt-20"},Qe={class:"report-section"},Xe={class:"content-body"},Ze={class:"mt-20"},et={class:"report-section"},tt={class:"content-body"},nt={key:0,class:"attachments-list"},ot={class:"file-name"},lt={class:"file-size"},st={key:1,class:"no-attachments"},it={class:"mt-20"},at={class:"report-section"},dt={class:"content-body"},rt={key:0,class:"existing-feedbacks"},ut={class:"feedback-header"},ct={class:"feedback-author-info"},pt={class:"feedback-date"},vt={class:"feedback-actions"},mt={key:0,class:"feedback-edit-form"},ft={class:"feedback-edit-actions"},_t={key:1,class:"feedback-content"},yt={key:2,class:"feedback-replies"},kt={class:"reply-header"},ht={class:"reply-author-info"},gt={class:"reply-date"},xt={class:"reply-actions"},Ct={key:0,class:"reply-edit-form"},bt={class:"reply-edit-actions"},wt={key:1,class:"reply-content"},Tt={key:3,class:"reply-input-form"},Vt={class:"reply-input-actions"},Pt={class:"new-feedback-form"},Dt={class:"flex justify-end"},Rt={key:1,class:"no-report"},Ft={__name:"view",setup(It){const k=m(null),z=m(!0),M=m(!0),L=m("w"),x=m(!1),_=m(0),T=m(""),h=m(""),V=m(null),S=m(null),C=m(""),A=m(null),b=m(""),J=[{value:"w",label:"작성일 기준"},{value:"r",label:"보고일 기준"}],Q={dayMaxEvents:!1,moreLinkClick:"popover",eventDisplay:"block"},X=m([{id:"1",title:"[이찬용] 프로젝트 A 진행상황",start:"2025-05-16",allDay:!0,backgroundColor:"#0AF",borderColor:"#0AF",extendedProps:{reportType:"weekly",author:"이찬용",submitTarget:"한성진",actualContent:`리타게팅 랜딩페이지 수정
우체국뱅킹 ui/ux 개선 퍼블리싱 작업
Sgate 아카데미 퍼블리싱
Vue.js 컴포넌트 리팩토링
반응형 레이아웃 최적화`,planContent:`차주 계획:
- 리타게팅 랜딩페이지 최종 검수
- 우체국뱅킹 ui/ux 개선 완료
- Sgate 아카데미 퍼블리싱 마무리
- 신규 프로젝트 기획 참여`,etcContent:"전반적으로 계획대로 진행 중입니다.",attachments:[{id:1,name:"프로젝트_진행현황.xlsx",size:15234},{id:2,name:"화면설계서.pdf",size:3421567}],feedbacks:[{id:1,author:"한성진",content:"수고하셨습니다. 다음 주 일정 조율이 필요할 것 같습니다.",createdAt:"2025-05-16T16:30:00",replies:[{id:101,author:"이찬용",content:"네, 알겠습니다. 월요일에 미팅 잡겠습니다.",createdAt:"2025-05-16T17:00:00"}]}],summary:"프로젝트 A 1차 개발 완료",createTime:"09:30"}},{id:"2",title:"[김영희] 품질관리 점검",start:"2025-05-16",allDay:!0,backgroundColor:"#00B248",borderColor:"#00B248",extendedProps:{reportType:"daily",author:"김영희",submitTarget:"이부장",actualContent:`생산라인 전체 점검 완료
- 1라인: 정상 가동
- 2라인: 미세 조정 필요
- 3라인: 정상 가동`,planContent:`내일 계획:
- 2라인 미세 조정 작업
- 월간 품질 보고서 작성
- 신규 장비 점검`,etcContent:"전반적으로 양호한 상태입니다.",attachments:[{id:3,name:"품질점검표.pdf",size:892345}],feedbacks:[],summary:"생산라인 품질관리 점검 완료",createTime:"16:45"}},{id:"3",title:"[정수민] 회계 업무 처리",start:"2025-05-16",allDay:!0,backgroundColor:"#00B248",borderColor:"#00B248",extendedProps:{reportType:"daily",author:"정수민",submitTarget:"최팀장",actualContent:`월간 회계 마감 완료
- 매출/매입 정리
- 비용 분석
- 예산 대비 실적 검토`,planContent:`내일 계획:
- 분기 보고서 작성
- 예산 수정안 검토
- 세무사 미팅 준비`,etcContent:"예산 대비 105% 달성",attachments:[{id:5,name:"월간정산서.xlsx",size:234567},{id:6,name:"예산분석표.pdf",size:445566}],feedbacks:[],summary:"월간 회계 마감 및 실적 분석",createTime:"11:30"}},{id:"4",title:"[박민수] 마케팅 활동 보고",start:"2025-05-16",allDay:!0,backgroundColor:"#00B248",borderColor:"#00B248",extendedProps:{reportType:"daily",author:"박민수",submitTarget:"김과장",actualContent:`고객사 3곳 방문 완료
- A사: 제품 데모 진행
- B사: 계약 조건 협의
- C사: 추가 요구사항 청취`,planContent:`내일 계획:
- A사 후속 미팅 준비
- B사 계약서 검토
- 신규 고객사 발굴`,etcContent:"전반적으로 긍정적인 반응",attachments:[],feedbacks:[],summary:"고객사 방문 및 제품 소개",createTime:"14:20"}}]),H=$(()=>X.value.filter(n=>{const e=z.value&&n.extendedProps.reportType==="daily",o=M.value&&n.extendedProps.reportType==="weekly";return e||o})),P=$(()=>{if(!k.value)return[];const n=j(k.value);return H.value.filter(e=>j(e.start)===n)}),l=$(()=>P.value[_.value]||null);function Z(n){k.value=n.date,_.value=0,x.value=!0}function ee(n){k.value=n.event.start;const e=P.value.findIndex(o=>o.id===n.event.id);_.value=e>=0?e:0,x.value=!0}function te(n){n>=0&&n<P.value.length&&(_.value=n)}function ne(){if(!T.value.trim()||!l.value)return;const n={id:Date.now(),author:w(),content:T.value,createdAt:new Date().toISOString(),replies:[]};l.value.extendedProps.feedbacks||(l.value.extendedProps.feedbacks=[]),l.value.extendedProps.feedbacks.push(n),T.value=""}function w(){return"현재사용자"}function oe(n){S.value=n.id,C.value=n.content}function K(){S.value=null,C.value=""}function le(n){const e=l.value.extendedProps.feedbacks.find(o=>o.id===n);e&&C.value.trim()&&(e.content=C.value,e.updatedAt=new Date().toISOString(),K())}function se(n){if(confirm("정말로 이 피드백을 삭제하시겠습니까?")){const e=l.value.extendedProps.feedbacks.findIndex(o=>o.id===n);e>-1&&l.value.extendedProps.feedbacks.splice(e,1)}}function ie(n){V.value===n?(V.value=null,h.value=""):(V.value=n,h.value="")}function N(){V.value=null,h.value=""}function ae(n){if(!h.value.trim())return;const e=l.value.extendedProps.feedbacks.find(o=>o.id===n);if(e){e.replies||(e.replies=[]);const o={id:Date.now(),author:w(),content:h.value,createdAt:new Date().toISOString()};e.replies.push(o),N()}}function de(n){A.value=n.id,b.value=n.content}function G(){A.value=null,b.value=""}function re(n,e){const o=l.value.extendedProps.feedbacks.find(v=>v.id===n);if(o&&o.replies){const v=o.replies.find(D=>D.id===e);v&&b.value.trim()&&(v.content=b.value,v.updatedAt=new Date().toISOString(),G())}}function ue(n,e){if(confirm("정말로 이 댓글을 삭제하시겠습니까?")){const o=l.value.extendedProps.feedbacks.find(v=>v.id===n);if(o&&o.replies){const v=o.replies.findIndex(D=>D.id===e);v>-1&&o.replies.splice(v,1)}}}function ce(n){return n?new Intl.DateTimeFormat("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date(n)):""}function j(n){if(!n)return"";const e=new Date(n);return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`}function W(n){return new Intl.DateTimeFormat("ko-KR",{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(new Date(n))}function E(n){return n?n.replace(/\n/g,"<br>"):""}function pe(n){if(n===0)return"0 Bytes";const e=1024,o=["Bytes","KB","MB","GB"],v=Math.floor(Math.log(n)/Math.log(e));return parseFloat((n/Math.pow(e,v)).toFixed(2))+" "+o[v]}function Y(n){if(x.value)switch(n.key){case"ArrowLeft":n.preventDefault(),_.value>0&&_.value--;break;case"ArrowRight":n.preventDefault(),_.value<P.value.length-1&&_.value++;break;case"Escape":n.preventDefault(),x.value=!1;break}}return Ce(()=>{window.addEventListener("keydown",Y)}),be(()=>{window.removeEventListener("keydown",Y)}),(n,e)=>{const o=me,v=fe,D=_e,f=ye,I=ke,ve=he;return i(),a(F,null,[t("div",Te,[t("div",Ve,[t("div",Pe,[r(o,{size:"large",modelValue:z.value,"onUpdate:modelValue":e[0]||(e[0]=u=>z.value=u),label:"일간보고",value:"d"},null,8,["modelValue"]),r(o,{size:"large",modelValue:M.value,"onUpdate:modelValue":e[1]||(e[1]=u=>M.value=u),label:"주간보고",value:"w"},null,8,["modelValue"])]),t("div",De,[r(v,{class:"w-150",modelValue:L.value,"onUpdate:modelValue":e[2]||(e[2]=u=>L.value=u),options:J},null,8,["modelValue"])])]),r(ge,{modelValue:k.value,"onUpdate:modelValue":e[3]||(e[3]=u=>k.value=u),events:H.value,onDateClick:Z,onEventClick:ee,useViewportHeight:!0,viewportHeight:85,customOptions:Q},null,8,["modelValue","events"])]),r(ve,{modelValue:x.value,"onUpdate:modelValue":e[8]||(e[8]=u=>x.value=u),size:"xlarge",height:"90vh",showFooter:!1},{title:c(()=>[t("div",Re,[y(p(ce(k.value))+" 보고서 ",1),t("div",Fe,[(i(!0),a(F,null,O(P.value,(u,R)=>(i(),a("span",{key:u.id,class:we(["author-tag",{weekly:u.extendedProps.reportType==="weekly",daily:u.extendedProps.reportType==="daily",active:R===_.value}]),onClick:s=>te(R)},p(u.extendedProps.author),11,Ie))),128))])])]),default:c(()=>{var u,R;return[t("div",Be,[l.value?(i(),a("div",Oe,[t("div",Ue,[t("div",ze,[e[9]||(e[9]=t("i",{class:"icon icon-xlg icon-user icon-white"},null,-1)),t("span",null,p(l.value.extendedProps.author),1)]),t("div",Me,[t("div",Se,[r(D,{position:"left"},{trigger:c(()=>e[10]||(e[10]=[y(" 제출대상 "),t("i",{class:"icon-md icon-user",style:{position:"relative",top:"2px"}},null,-1)])),default:c(()=>[t("p",null,p(l.value.extendedProps.submitTarget)+" 외 10명",1)]),_:1})])])]),t("div",Ae,[t("div",Ee,[t("div",$e,[t("div",Le,[t("h3",He,p((l.value.extendedProps.reportType==="weekly","KPI")),1),t("div",{class:"content-body",innerHTML:E(l.value.extendedProps.actualContent)},null,8,Ke)]),t("div",Ne,[t("h3",Ge,p((l.value.extendedProps.reportType==="weekly","금주실적")),1),t("div",{class:"content-body",innerHTML:E(l.value.extendedProps.actualContent)},null,8,je)]),t("div",We,[t("h3",Ye,p((l.value.extendedProps.reportType==="weekly","차주계획")),1),t("div",{class:"content-body",innerHTML:E(l.value.extendedProps.planContent)},null,8,qe)])])]),t("div",Je,[t("div",Qe,[e[11]||(e[11]=t("h2",{class:"report-section-title"},"의견/기타",-1)),t("div",Xe,p(l.value.extendedProps.etcContent||"특별한 의견 없음"),1)])]),t("div",Ze,[t("div",et,[e[13]||(e[13]=t("h2",{class:"report-section-title"},"첨부파일",-1)),t("div",tt,[(u=l.value.extendedProps.attachments)!=null&&u.length?(i(),a("div",nt,[(i(!0),a(F,null,O(l.value.extendedProps.attachments,s=>(i(),a("div",{key:s.id,class:"attachment-item"},[e[12]||(e[12]=t("i",{class:"icon icon-file"},null,-1)),t("span",ot,p(s.name),1),t("span",lt,"("+p(pe(s.size))+")",1)]))),128))])):(i(),a("div",st,"첨부파일이 없습니다."))])])]),t("div",it,[t("div",at,[e[26]||(e[26]=t("h2",{class:"report-section-title"},"피드백",-1)),t("div",dt,[(R=l.value.extendedProps.feedbacks)!=null&&R.length?(i(),a("div",rt,[(i(!0),a(F,null,O(l.value.extendedProps.feedbacks,s=>{var q;return i(),a("div",{key:s.id,class:"feedback-item"},[t("div",ut,[t("div",ct,[t("strong",null,p(s.author),1),t("span",pt,p(W(s.createdAt)),1)]),t("div",vt,[s.author===w()?(i(),U(f,{key:0,variant:"ghost",iconOnly:"",onClick:d=>oe(s),title:"수정"},{default:c(()=>e[14]||(e[14]=[t("i",{class:"icon icon-pencil icon-md"},null,-1)])),_:2},1032,["onClick"])):g("",!0),s.author===w()?(i(),U(f,{key:1,variant:"ghost",iconOnly:"",onClick:d=>se(s.id),title:"삭제"},{default:c(()=>e[15]||(e[15]=[t("i",{class:"icon icon-delete icon-md"},null,-1)])),_:2},1032,["onClick"])):g("",!0),r(f,{variant:"ghost",iconOnly:"",onClick:d=>ie(s.id),title:"댓글"},{default:c(()=>e[16]||(e[16]=[t("i",{class:"icon icon-reply icon-md"},null,-1)])),_:2},1032,["onClick"])])]),S.value===s.id?(i(),a("div",mt,[r(I,{modelValue:C.value,"onUpdate:modelValue":e[4]||(e[4]=d=>C.value=d),rows:3,maxRows:5,placeholder:"피드백을 수정해주세요."},null,8,["modelValue"]),t("div",ft,[r(f,{iconOnly:"",variant:"secondary",onClick:K},{default:c(()=>e[17]||(e[17]=[y(" 취소 ")])),_:1}),r(f,{iconOnly:"",variant:"primary",onClick:d=>le(s.id)},{default:c(()=>e[18]||(e[18]=[y(" 저장 ")])),_:2},1032,["onClick"])])])):(i(),a("div",_t,p(s.content),1)),(q=s.replies)!=null&&q.length?(i(),a("div",yt,[(i(!0),a(F,null,O(s.replies,d=>(i(),a("div",{key:d.id,class:"reply-item"},[t("div",kt,[t("div",ht,[t("strong",null,p(d.author),1),t("span",gt,p(W(d.createdAt)),1)]),t("div",xt,[d.author===w()?(i(),U(f,{key:0,variant:"ghost",iconOnly:"",onClick:B=>de(d),title:"수정"},{default:c(()=>e[19]||(e[19]=[t("i",{class:"icon icon-pencil icon-md"},null,-1)])),_:2},1032,["onClick"])):g("",!0),d.author===w()?(i(),U(f,{key:1,variant:"ghost",iconOnly:"",onClick:B=>ue(s.id,d.id),title:"삭제"},{default:c(()=>e[20]||(e[20]=[t("i",{class:"icon icon-delete icon-md"},null,-1)])),_:2},1032,["onClick"])):g("",!0)])]),A.value===d.id?(i(),a("div",Ct,[r(I,{modelValue:b.value,"onUpdate:modelValue":e[5]||(e[5]=B=>b.value=B),rows:2,maxRows:3,placeholder:"댓글을 수정해주세요."},null,8,["modelValue"]),t("div",bt,[r(f,{size:"small",iconOnly:"",variant:"secondary",onClick:G},{default:c(()=>e[21]||(e[21]=[y(" 취소 ")])),_:1}),r(f,{size:"small",iconOnly:"",variant:"primary",onClick:B=>re(s.id,d.id)},{default:c(()=>e[22]||(e[22]=[y(" 저장 ")])),_:2},1032,["onClick"])])])):(i(),a("div",wt,p(d.content),1))]))),128))])):g("",!0),V.value===s.id?(i(),a("div",Tt,[r(I,{modelValue:h.value,"onUpdate:modelValue":e[6]||(e[6]=d=>h.value=d),rows:2,maxRows:3,placeholder:"댓글을 입력해주세요."},null,8,["modelValue"]),t("div",Vt,[r(f,{iconOnly:"",variant:"secondary",onClick:N},{default:c(()=>e[23]||(e[23]=[y(" 취소 ")])),_:1}),r(f,{iconOnly:"",variant:"primary",onClick:d=>ae(s.id)},{default:c(()=>e[24]||(e[24]=[y(" 댓글 등록 ")])),_:2},1032,["onClick"])])])):g("",!0)])}),128))])):g("",!0),t("div",Pt,[r(I,{modelValue:T.value,"onUpdate:modelValue":e[7]||(e[7]=s=>T.value=s),rows:5,maxRows:5,placeholder:"피드백을 입력해주세요."},null,8,["modelValue"]),t("div",Dt,[r(f,{class:"mt-10",size:"large",variant:"primary",onClick:ne},{default:c(()=>e[25]||(e[25]=[y(" 등록 ")])),_:1})])])])])])])])):(i(),a("div",Rt,"선택된 보고서가 없습니다."))])]}),_:1},8,["modelValue"])],64)}}},Lt=xe(Ft,[["__scopeId","data-v-0b7371f6"]]);export{Lt as default};
