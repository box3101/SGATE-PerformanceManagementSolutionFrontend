import{_ as O}from"./O5AxrnfE.js";import{r as m,s as E,H as p,c as i,o as r,a as c,k as f,t as H,b as g,w as b,x as y,d as N,A as h,n as j}from"./BQpTzB5Q.js";const L={class:"section-header flex items-center justify-between"},U={class:"heading-4"},q={key:0,class:"table-actions"},F={class:"button-group flex items-center gap-5"},G={key:0,class:"sort-mode-message"},J={key:0},K={key:2},M={key:3},W={__name:"UiTable",props:{bordered:{type:Boolean,default:!1},striped:{type:Boolean,default:!1},hover:{type:Boolean,default:!1},size:{type:String,default:"medium",validator:t=>["small","medium","large"].includes(t)},layout:{type:String,default:"vertical",validator:t=>["vertical","horizontal"].includes(t)},isThLeft:{type:Boolean,default:!1},scrollable:{type:Boolean,default:!1},maxHeight:{type:String,default:"400px"},modelValue:{type:Array,default:()=>[]},editable:{type:Boolean,default:!1},defaultRowData:{type:Object,default:()=>({})},sortableOption:{type:Boolean,default:!1},title:{type:String,default:""}},emits:["update:modelValue","save","row-added","row-deleted","order-changed"],setup(t,{emit:V}){const n=V,d=t,o=m([]),s=m(d.sortableOption),v=m(!1),u=m(null),w=E(()=>d.modelValue.length>0&&o.value.length===d.modelValue.length),R=()=>{w.value?o.value=[]:o.value=[...d.modelValue]},D=e=>{if(s.value)return;const l=o.value.findIndex(a=>a===e);l===-1?o.value.push(e):o.value.splice(l,1)},S=e=>o.value.includes(e),k=()=>{const l={id:Date.now(),...d.defaultRowData,selected:!1},a=[...d.modelValue,l];n("update:modelValue",a),n("row-added",l)},B=()=>{if(o.value.length===0)return;const e=[...o.value],l=d.modelValue.filter(a=>!o.value.includes(a));n("update:modelValue",l),o.value=[],n("row-deleted",e)},C=()=>{s.value=!s.value,s.value||(o.value=[])},$=(e,l)=>{if(s.value){u.value=l,v.value=!0,e.dataTransfer.effectAllowed="move";try{const a=e.target.closest("tr");a&&e.dataTransfer.setDragImage(a,0,0)}catch(a){console.warn("Drag image not supported in this browser",a)}}},A=e=>{s.value&&(e.preventDefault(),e.dataTransfer.dropEffect="move")},T=(e,l)=>{if(!(!s.value||u.value===null)){if(e.preventDefault(),u.value!==l){const a=[...d.modelValue],[I]=a.splice(u.value,1);a.splice(l,0,I),n("update:modelValue",a),n("order-changed",{from:u.value,to:l,rows:a})}u.value=null,v.value=!1}},z=()=>{u.value=null,v.value=!1},x=()=>{n("save",d.modelValue),s.value=!1};return p(()=>d.modelValue,()=>{o.value=o.value.filter(e=>d.modelValue.some(l=>l===e))}),p(()=>d.editable,e=>{e||(s.value=!1)}),(e,l)=>{const a=O;return r(),i("div",{class:y(["ui-table-wrapper",[t.bordered&&"bordered",t.striped&&"striped",t.hover&&"hover",t.size,t.layout,t.scrollable&&"scrollable",v.value&&"dragging",t.editable&&"editable"]]),style:j(t.scrollable?{maxHeight:t.maxHeight}:{})},[c("div",L,[c("h2",U,H(t.title),1),t.editable?(r(),i("div",q,[c("div",F,[g(a,{type:"button",variant:"secondary-line","icon-only":"",onClick:k,title:"행 추가"},{default:b(()=>l[0]||(l[0]=[c("i",{class:"icon-md icon-plus"},null,-1)])),_:1}),g(a,{type:"button",variant:"secondary-line","icon-only":"",onClick:B,disabled:o.value.length===0,title:"선택한 행 삭제"},{default:b(()=>l[1]||(l[1]=[c("i",{class:"icon-md icon-delete"},null,-1)])),_:1},8,["disabled"]),g(a,{type:"button",variant:"secondary-line","icon-only":"",onClick:C,class:y({active:s.value}),title:"정렬 모드"},{default:b(()=>l[2]||(l[2]=[c("i",{class:"icon-md icon-sort"},null,-1)])),_:1},8,["class"]),g(a,{type:"button",variant:"primary",onClick:x},{default:b(()=>l[3]||(l[3]=[N("저장")])),_:1})])])):f("",!0)]),s.value&&t.editable?(r(),i("div",G," 행을 드래그하여 순서를 변경할 수 있습니다. 완료 후 정렬 버튼을 다시 클릭하세요. ")):f("",!0),c("table",{class:y(["ui-table",{"th-left":t.isThLeft}])},[e.$slots.colgroup?(r(),i("colgroup",J,[h(e.$slots,"colgroup")])):f("",!0),e.$slots.header&&t.layout!=="horizontal"?(r(),i("thead",{key:1,class:y({"sticky-header":t.scrollable})},[h(e.$slots,"header",{selectAll:R,isAllSelected:w.value,editable:t.editable,sortable:s.value})],2)):f("",!0),e.$slots.body?(r(),i("tbody",K,[h(e.$slots,"body",{rows:t.modelValue,selectedRows:o.value,toggleRowSelection:D,isRowSelected:S,handleDragStart:$,handleDragOver:A,handleDrop:T,handleDragEnd:z,sortable:s.value,editable:t.editable})])):f("",!0),e.$slots.footer?(r(),i("tfoot",M,[h(e.$slots,"footer")])):f("",!0)],2)],6)}}};export{W as _};
