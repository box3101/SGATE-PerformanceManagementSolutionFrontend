import be from"./BgwLtuoS.js";import{_ as Le}from"./Ca3ZC5Px.js";import{_ as $e,r as f,e as V,f as De,z as Ve,c as u,b as _,a as t,l as T,F as g,g as w,w as W,o as d,y as B,d as P,t as h,p as Te,n as M,A as le}from"./CAclH53C.js";import Ue from"./CJgJiCif.js";import Re from"./Bhfyblq3.js";import{C as Se,U as de}from"./CmYO-IDL.js";import{U as ce}from"./Do9odV8X.js";import"./t1T9INsT.js";import"./dsJ_FfKF.js";import"./xm8hiCE-.js";import"./DRD9ci4F.js";import"./Dw3Ni7_h.js";const Ce={class:"task-board-page"},He={class:"board-content"},Ae={class:"categories-container"},Ne={key:0,class:"empty-category"},We={class:"add-placeholder-icon"},Be={key:0},Pe={key:1},Xe={class:"empty-category"},Ee={class:"add-placeholder-icon"},Oe={class:"edit-title-btn"},Ye={key:0,class:"card-detail"},Fe={class:"card-detail-header"},Ie={class:"card-detail-title"},Qe={class:"card-detail-tags"},Ze={class:"card-detail-content"},je={class:"card-comments-section"},qe={class:"comment-input-container"},Ge={class:"comments-list"},Je={class:"comment-header"},Ke={class:"comment-author"},et={class:"comment-author-name"},tt={class:"comment-date"},st={class:"comment-body"},it={class:"comment-actions-row"},nt=["onClick"],ot={key:0,class:"reply-form"},at={class:"reply-form-actions"},lt=["onClick"],dt={key:1,class:"replies-list"},ct={class:"reply-header"},rt={class:"reply-author"},ut={class:"reply-author-name"},mt={class:"reply-date"},ht={class:"reply-body"},pt=["onMousedown"],vt={class:"detached-modal-title"},_t={class:"detached-modal-actions"},xt=["onClick"],ft=["onClick"],gt={class:"detached-modal-body"},wt={class:"card-detail"},yt={class:"card-detail-header"},zt={class:"card-detail-tags"},Mt={class:"card-detail-info"},kt={class:"info-item"},bt={class:"info-value"},Lt={class:"info-item"},$t={class:"info-value"},Dt={class:"info-item"},Vt={class:"info-value"},Tt={class:"card-detail-content"},Ut={class:"card-comments-section"},Rt={class:"comment-input-container"},St={class:"comment-actions"},Ct=["onClick"],Ht={class:"comments-list"},At={class:"comment-header"},Nt={class:"comment-author"},Wt={class:"comment-author-name"},Bt={class:"comment-date"},Pt={class:"comment-body"},Xt={class:"comment-actions-row"},Et=["onClick"],Ot={key:0,class:"reply-form"},Yt={class:"reply-form-actions"},Ft=["onClick"],It=["onClick"],Qt={key:1,class:"replies-list"},Zt={class:"reply-header"},jt={class:"reply-author"},qt={class:"reply-author-name"},Gt={class:"reply-date"},Jt={class:"reply-body"},Kt=["onMousedown"],es=["onMousedown"],ts=["onMousedown"],ss=["onMousedown"],is=["onMousedown"],ns=["onMousedown"],os=["onMousedown"],as=["onMousedown"],ls={__name:"TaskBoard",setup(ds){const $=f([{id:1,title:"할 일",cards:[{id:1,title:"디자인 시스템 구축",tags:["디자인","UI/UX"],date:"2023-09-15",comments:3,attachments:2,commentsList:[{id:"comment-1",author:"김윤기",date:"2023-09-10 14:30",text:"디자인 시스템 초안 완료했습니다. 리뷰 부탁드립니다.",replies:[]},{id:"comment-2",author:"이지은",date:"2023-09-11 09:15",text:"컬러 팔레트 부분 조금 수정이 필요할 것 같습니다. 미팅에서 논의해요.",replies:[{id:"reply-1",author:"김윤기",date:"2023-09-11 10:30",text:"네, 미팅에서 논의하겠습니다. 추가 의견 있으시면 미리 공유해주세요."}]}]},{id:2,title:"사용자 피드백 수집",tags:["리서치","사용자경험"],date:"2023-09-20",comments:1,attachments:0,commentsList:[{id:"comment-4",author:"최수진",date:"2023-09-18 11:20",text:"설문조사 양식 초안 작성했습니다. 검토 부탁드려요.",replies:[]}]},{id:5,title:"프로토타입 제작",tags:["디자인","프로토타입"],date:"2023-09-30",comments:0,attachments:1,commentsList:[]},{id:6,title:"사용성 테스트 계획",tags:["테스트","QA"],date:"2023-10-05",comments:0,attachments:0,commentsList:[]},{id:7,title:"경쟁사 분석 보고서",tags:["리서치","분석"],date:"2023-10-10",comments:0,attachments:0,commentsList:[]}]},{id:2,title:"진행 중",cards:[{id:3,title:"랜딩 페이지 개발",tags:["프론트엔드","개발"],date:"2023-09-25",comments:2,attachments:3,commentsList:[{id:"comment-5",author:"김개발",date:"2023-09-22 10:30",text:"헤더 부분 반응형 이슈가 있습니다. 수정 중입니다.",replies:[]},{id:"comment-6",author:"이디자인",date:"2023-09-23 15:45",text:"모바일 뷰에서 버튼 크기 조정이 필요합니다.",replies:[]}]},{id:8,title:"API 연동 작업",tags:["백엔드","API"],date:"2023-10-15",comments:1,attachments:0,commentsList:[{id:"comment-7",author:"박서버",date:"2023-10-12 09:30",text:"인증 API 문서 업데이트했습니다. 참고해주세요.",replies:[]}]},{id:9,title:"데이터 시각화 구현",tags:["데이터","차트"],date:"2023-10-20",comments:0,attachments:1,commentsList:[]}]},{id:3,title:"완료",cards:[{id:4,title:"로그인 기능 구현",tags:["백엔드","보안"],date:"2023-09-10",comments:0,attachments:1,commentsList:[]},{id:10,title:"회원가입 페이지 개발",tags:["프론트엔드","UI"],date:"2023-09-05",comments:0,attachments:0,commentsList:[]},{id:11,title:"DB 스키마 설계",tags:["데이터베이스","설계"],date:"2023-08-28",comments:2,attachments:1,commentsList:[{id:"comment-8",author:"김데이터",date:"2023-08-25 11:20",text:"인덱스 최적화 작업 완료했습니다.",replies:[]},{id:"comment-9",author:"이백엔드",date:"2023-08-26 14:30",text:"쿼리 성능 테스트 결과 첨부합니다.",replies:[]}]}]}]),X=f(!1),C=f(!1),m=f(null),U=f(""),Z=f(null),j=V({}),H=V({}),D=f(null),y=f(""),k=f(null),b=V({}),L=V({}),E=V({}),c=f([]),re=V({});let O=!1,R=null,Y={x:0,y:0},F=!1,S=null,q="",I={x:0,y:0},r={width:0,height:0},x={x:0,y:0};function G(){X.value=!0}function ue(o){m.value=o,C.value=!0}function J(o){if(!o||c.value.findIndex(n=>n.card.id===o.id)!==-1)return;C.value=!1;const i=c.value.length*30,a=window.innerWidth,e=window.innerHeight,l={id:`detached-${o.id}-${Date.now()}`,card:{...o},position:{x:Math.min((a-500)/2+i,a-550),y:Math.min((e-600)/2+i,e-650)},size:{width:500,height:600},isMaximized:!1,originalSize:{width:500,height:600},originalPosition:{x:(a-500)/2+i,y:(e-600)/2+i},style:{left:`${Math.min((a-500)/2+i,a-550)}px`,top:`${Math.min((e-600)/2+i,e-650)}px`,width:"500px",height:"600px",zIndex:1e3+c.value.length}};c.value.push(l)}function me(o){const s=c.value.findIndex(i=>i.id===o);s!==-1&&c.value.splice(s,1)}function he(o){const s=c.value.findIndex(a=>a.id===o);if(s===-1)return;const i=c.value[s];i.isMaximized?(i.size={...i.originalSize},i.position={...i.originalPosition},i.isMaximized=!1):(i.originalSize={...i.size},i.originalPosition={...i.position},i.size={width:window.innerWidth-40,height:window.innerHeight-40},i.position={x:20,y:20},i.isMaximized=!0),Q(o)}function pe(o,s){const i=c.value.findIndex(e=>e.id===s);if(i===-1)return;const a=c.value[i];a.isMaximized||(O=!0,R=s,Y={x:o.clientX-a.position.x,y:o.clientY-a.position.y},K(s),o.preventDefault())}function z(o,s,i){const a=c.value.findIndex(l=>l.id===s);if(a===-1)return;const e=c.value[a];e.isMaximized||(F=!0,S=s,q=i,I={x:o.clientX,y:o.clientY},r={width:e.size.width,height:e.size.height},x={x:e.position.x,y:e.position.y},K(s),o.preventDefault())}function K(o){let s=1e3;c.value.forEach(a=>{const e=parseInt(a.style.zIndex);e>s&&(s=e)});const i=c.value.findIndex(a=>a.id===o);i!==-1&&(c.value[i].style.zIndex=(s+1).toString())}function ee(o){if(O&&R){const s=c.value.findIndex(p=>p.id===R);if(s===-1)return;const i=c.value[s],a=o.clientX-Y.x,e=o.clientY-Y.y,l=window.innerWidth-i.size.width,n=window.innerHeight-i.size.height;i.position={x:Math.max(0,Math.min(a,l)),y:Math.max(0,Math.min(e,n))},Q(R)}else if(F&&S){const s=c.value.findIndex(p=>p.id===S);if(s===-1)return;const i=c.value[s],a=o.clientX-I.x,e=o.clientY-I.y,l=300,n=200;switch(q){case"se":i.size={width:Math.max(l,r.width+a),height:Math.max(n,r.height+e)};break;case"sw":const p=Math.max(l,r.width-a);i.position={x:x.x-(p-r.width),y:x.y},i.size={width:p,height:Math.max(n,r.height+e)};break;case"ne":const v=Math.max(n,r.height-e);i.position={x:x.x,y:x.y-(v-r.height)},i.size={width:Math.max(l,r.width+a),height:v};break;case"nw":const N=Math.max(l,r.width-a),ne=Math.max(n,r.height-e);i.position={x:x.x-(N-r.width),y:x.y-(ne-r.height)},i.size={width:N,height:ne};break;case"n":const oe=Math.max(n,r.height-e);i.position={x:x.x,y:x.y-(oe-r.height)},i.size={width:r.width,height:oe};break;case"s":i.size={width:r.width,height:Math.max(n,r.height+e)};break;case"e":i.size={width:Math.max(l,r.width+a),height:r.height};break;case"w":const ae=Math.max(l,r.width-a);i.position={x:x.x-(ae-r.width),y:x.y},i.size={width:ae,height:r.height};break}Q(S)}}function te(){O=!1,F=!1,R=null,S=null}function Q(o){const s=c.value.findIndex(a=>a.id===o);if(s===-1)return;const i=c.value[s];i.style={...i.style,left:`${i.position.x}px`,top:`${i.position.y}px`,width:`${i.size.width}px`,height:`${i.size.height}px`}}De(()=>{window.addEventListener("mousemove",ee),window.addEventListener("mouseup",te)}),Ve(()=>{window.removeEventListener("mousemove",ee),window.removeEventListener("mouseup",te)});function se(){console.log("새 카테고리 추가"),$.value.push({id:$.value.length+1,title:"카테고리 "+($.value.length+1),cards:[]})}function ve(){if(!U.value.trim()||!m.value)return;m.value.commentsList||(m.value.commentsList=[]);const o={id:`comment-${Date.now()}`,author:"김윤기",date:new Date().toLocaleString(),text:U.value.trim(),replies:[]};m.value.commentsList.push(o),m.value.comments=m.value.commentsList.length,U.value="",A(m.value)}function _e(o){const s=H[o];if(!s||!s.trim())return;const i=c.value.findIndex(l=>l.id===o);if(i===-1)return;const a=c.value[i].card;a.commentsList||(a.commentsList=[]);const e={id:`comment-${Date.now()}`,author:"김윤기",date:new Date().toLocaleString(),text:s.trim(),replies:[]};a.commentsList.push(e),a.comments=a.commentsList.length,H[o]="",A(a)}function xe(o){D.value===o?(D.value=null,y.value=""):(D.value=o,y.value="",le(()=>{k.value&&k.value.focus()}))}function fe(o,s){b[o]===s?(b[o]=null,L[o]=""):(b[o]=s,L[o]="",le(()=>{const i=E[`${o}-${s}`];i&&i.focus()}))}function ge(){D.value=null,y.value=""}function we(o){b[o]=null,L[o]=""}function ye(o){if(!y.value.trim()||!m.value)return;const s=m.value.commentsList.findIndex(a=>a.id===o);if(s===-1)return;const i={id:`reply-${Date.now()}`,author:"김윤기",date:new Date().toLocaleString(),text:y.value.trim()};m.value.commentsList[s].replies||(m.value.commentsList[s].replies=[]),m.value.commentsList[s].replies.push(i),D.value=null,y.value="",A(m.value)}function ze(o,s){const i=L[o];if(!i||!i.trim())return;const a=c.value.findIndex(p=>p.id===o);if(a===-1)return;const e=c.value[a].card,l=e.commentsList.findIndex(p=>p.id===s);if(l===-1)return;const n={id:`reply-${Date.now()}`,author:"김윤기",date:new Date().toLocaleString(),text:i.trim()};e.commentsList[l].replies||(e.commentsList[l].replies=[]),e.commentsList[l].replies.push(n),b[o]=null,L[o]="",A(e)}function ie(o,s){const i=s?j[s]:Z.value;if(!i)return;i.style.height="auto";const a=80;i.style.height=`${Math.max(i.scrollHeight,a)}px`}function Me(){if(!k.value)return;k.value.style.height="auto";const o=60;k.value.style.height=`${Math.max(k.value.scrollHeight,o)}px`}function ke(o,s){const i=b[s];if(!i)return;const a=E[`${s}-${i}`];if(!a)return;a.style.height="auto";const e=60;a.style.height=`${Math.max(a.scrollHeight,e)}px`}function A(o){$.value.forEach(s=>{const i=s.cards.findIndex(a=>a.id===o.id);i!==-1&&(s.cards[i].comments=o.comments,s.cards[i].commentsList=[...o.commentsList])})}return(o,s)=>{const i=be,a=Le;return d(),u("div",Ce,[_(Ue,{onAddCategory:se}),t("section",He,[t("ul",Ae,[$.value.length===0?(d(),u("div",Ne,[t("div",{class:"add-category-placeholder",onClick:se},[t("div",We,[_(i,{name:"mdi:plus",size:"24"})]),s[5]||(s[5]=t("p",null,"새 카테고리 추가하기",-1))])])):T("",!0),(d(!0),u(g,null,w($.value,e=>(d(),B(Re,{key:e.id,title:e.title,onAddBoard:G,onOpenMenu:o.openCategoryMenu},{default:W(()=>[e.cards.length>0?(d(),u("div",Be,[(d(!0),u(g,null,w(e.cards,l=>(d(),B(Se,{key:l.id,title:l.title,tags:l.tags,date:l.date,comments:l.comments,attachments:l.attachments,cardId:l.id,onClick:n=>ue(l),onOpenInNewWindow:n=>J(l)},null,8,["title","tags","date","comments","attachments","cardId","onClick","onOpenInNewWindow"]))),128))])):(d(),u("div",Pe,[t("div",Xe,[t("div",{class:"add-card-placeholder",onClick:G},[t("div",Ee,[_(i,{name:"mdi:plus",size:"24"})]),s[6]||(s[6]=t("p",null,[P(" 해당 카테고리의 "),t("br"),P(" 첫 업무카드를 등록해보세요. ")],-1))])])]))]),_:2},1032,["title","onOpenMenu"]))),128))])]),_(ce,{modelValue:X.value,"onUpdate:modelValue":s[0]||(s[0]=e=>X.value=e),position:"right",title:"카드 추가"},{headerActions:W(()=>[t("button",Oe,[_(i,{name:"mdi:pencil",size:"16"})])]),_:1},8,["modelValue"]),_(ce,{modelValue:C.value,"onUpdate:modelValue":s[4]||(s[4]=e=>C.value=e),position:"right",title:"카드 상세",size:"medium"},{headerActions:W(()=>[t("button",{class:"detach-modal-btn",onClick:s[1]||(s[1]=e=>J(m.value))},[_(i,{name:"mdi:arrow-expand",size:"16"})])]),default:W(()=>[m.value?(d(),u("div",Ye,[t("div",Fe,[t("h2",Ie,h(m.value.title),1),t("div",Qe,[(d(!0),u(g,null,w(m.value.tags,(e,l)=>(d(),B(de,{key:l,text:e,size:"small"},null,8,["text"]))),128))])]),t("div",Ze,[t("div",je,[s[10]||(s[10]=t("h3",{class:"content-section-title"},"활동내역",-1)),t("div",qe,[_(a,{placeholder:"내용을 입력해주세요.",modelValue:U.value,"onUpdate:modelValue":s[2]||(s[2]=e=>U.value=e),rows:"3",onInput:ie,ref_key:"commentTextarea",ref:Z},null,8,["modelValue"]),t("div",{class:"comment-actions"},[t("button",{class:"comment-submit-btn",onClick:ve},"등록")])]),t("div",Ge,[(d(!0),u(g,null,w(m.value.commentsList,(e,l)=>(d(),u("div",{key:l,class:"comment-item"},[t("div",Je,[t("div",Ke,[s[7]||(s[7]=t("img",{src:"https://via.placeholder.com/32",alt:"User Avatar",class:"comment-avatar"},null,-1)),t("span",et,h(e.author),1)]),t("span",tt,h(e.date),1)]),t("div",st,h(e.text),1),t("div",it,[t("button",{class:"reply-btn",onClick:n=>xe(e.id)},[_(i,{name:"mdi:reply",size:"14"}),s[8]||(s[8]=P(" 답글 "))],8,nt)]),D.value===e.id?(d(),u("div",ot,[_(a,{class:"reply-textarea",placeholder:"답글을 입력해주세요...",modelValue:y.value,"onUpdate:modelValue":s[3]||(s[3]=n=>y.value=n),rows:"2",onInput:Me,ref_for:!0,ref_key:"replyTextarea",ref:k},null,8,["modelValue"]),t("div",at,[t("button",{class:"cancel-btn",onClick:ge},"취소"),t("button",{class:"submit-btn",onClick:n=>ye(e.id)},"등록",8,lt)])])):T("",!0),e.replies&&e.replies.length>0?(d(),u("div",dt,[(d(!0),u(g,null,w(e.replies,(n,p)=>(d(),u("div",{key:p,class:"reply-item"},[t("div",ct,[t("div",rt,[s[9]||(s[9]=t("img",{src:"https://via.placeholder.com/24",alt:"User Avatar",class:"reply-avatar"},null,-1)),t("span",ut,h(n.author),1)]),t("span",mt,h(n.date),1)]),t("div",ht,h(n.text),1)]))),128))])):T("",!0)]))),128))])])])])):T("",!0)]),_:1},8,["modelValue"]),(d(!0),u(g,null,w(c.value,(e,l)=>(d(),u("div",{key:e.id,class:"detached-modal",style:Te(e.style),ref_for:!0,ref:n=>{n&&(re[e.id]=n)}},[t("div",{class:"detached-modal-header",onMousedown:n=>pe(n,e.id)},[t("h3",vt,h(e.card.title),1),t("div",_t,[t("button",{class:"detached-modal-btn",onClick:n=>he(e.id)},[_(i,{name:e.isMaximized?"mdi:arrow-collapse":"mdi:arrow-expand",size:"16"},null,8,["name"])],8,xt),t("button",{class:"detached-modal-btn",onClick:n=>me(e.id)},[_(i,{name:"mdi:close",size:"16"})],8,ft)])],40,pt),t("div",gt,[t("div",wt,[t("div",yt,[t("div",zt,[(d(!0),u(g,null,w(e.card.tags,(n,p)=>(d(),B(de,{key:p,text:n,size:"small"},null,8,["text"]))),128))])]),t("div",Mt,[t("div",kt,[s[11]||(s[11]=t("span",{class:"info-label"},"기간",-1)),t("span",bt,h(e.card.date),1)]),t("div",Lt,[s[12]||(s[12]=t("span",{class:"info-label"},"댓글",-1)),t("span",$t,h(e.card.comments||0),1)]),t("div",Dt,[s[13]||(s[13]=t("span",{class:"info-label"},"첨부파일",-1)),t("span",Vt,h(e.card.attachments||0),1)])]),t("div",Tt,[t("div",Ut,[s[17]||(s[17]=t("h3",{class:"content-section-title"},"활동내역",-1)),t("div",Rt,[_(a,{class:"comment-textarea",placeholder:"내용을 입력해주세요.",modelValue:H[e.id],"onUpdate:modelValue":n=>H[e.id]=n,rows:"3",onInput:n=>ie(n,e.id),ref_for:!0,ref:n=>{n&&(j[e.id]=n)}},null,8,["modelValue","onUpdate:modelValue","onInput"]),t("div",St,[t("button",{class:"comment-submit-btn",onClick:n=>_e(e.id)},"등록",8,Ct)])]),t("div",Ht,[(d(!0),u(g,null,w(e.card.commentsList,(n,p)=>(d(),u("div",{key:p,class:"comment-item"},[t("div",At,[t("div",Nt,[s[14]||(s[14]=t("img",{src:"https://via.placeholder.com/32",alt:"User Avatar",class:"comment-avatar"},null,-1)),t("span",Wt,h(n.author),1)]),t("span",Bt,h(n.date),1)]),t("div",Pt,h(n.text),1),t("div",Xt,[t("button",{class:"reply-btn",onClick:v=>fe(e.id,n.id)},[_(i,{name:"mdi:reply",size:"14"}),s[15]||(s[15]=P(" 답글 "))],8,Et)]),b[e.id]===n.id?(d(),u("div",Ot,[_(a,{placeholder:"답글을 입력해주세요...",modelValue:L[e.id],"onUpdate:modelValue":v=>L[e.id]=v,rows:"2",onInput:v=>ke(v,e.id),ref_for:!0,ref:v=>{v&&(E[`${e.id}-${n.id}`]=v)}},null,8,["modelValue","onUpdate:modelValue","onInput"]),t("div",Yt,[t("button",{class:"cancel-btn",onClick:v=>we(e.id)},"취소",8,Ft),t("button",{class:"submit-btn",onClick:v=>ze(e.id,n.id)},"등록",8,It)])])):T("",!0),n.replies&&n.replies.length>0?(d(),u("div",Qt,[(d(!0),u(g,null,w(n.replies,(v,N)=>(d(),u("div",{key:N,class:"reply-item"},[t("div",Zt,[t("div",jt,[s[16]||(s[16]=t("img",{src:"https://via.placeholder.com/24",alt:"User Avatar",class:"reply-avatar"},null,-1)),t("span",qt,h(v.author),1)]),t("span",Gt,h(v.date),1)]),t("div",Jt,h(v.text),1)]))),128))])):T("",!0)]))),128))])])])])]),t("div",{class:"resize-handle resize-handle-se",onMousedown:M(n=>z(n,e.id,"se"),["stop"])},null,40,Kt),t("div",{class:"resize-handle resize-handle-sw",onMousedown:M(n=>z(n,e.id,"sw"),["stop"])},null,40,es),t("div",{class:"resize-handle resize-handle-ne",onMousedown:M(n=>z(n,e.id,"ne"),["stop"])},null,40,ts),t("div",{class:"resize-handle resize-handle-nw",onMousedown:M(n=>z(n,e.id,"nw"),["stop"])},null,40,ss),t("div",{class:"resize-handle resize-handle-n",onMousedown:M(n=>z(n,e.id,"n"),["stop"])},null,40,is),t("div",{class:"resize-handle resize-handle-s",onMousedown:M(n=>z(n,e.id,"s"),["stop"])},null,40,ns),t("div",{class:"resize-handle resize-handle-e",onMousedown:M(n=>z(n,e.id,"e"),["stop"])},null,40,os),t("div",{class:"resize-handle resize-handle-w",onMousedown:M(n=>z(n,e.id,"w"),["stop"])},null,40,as)],4))),128))])}}},ys=$e(ls,[["__scopeId","data-v-1c18b44c"]]);export{ys as default};
